function yy(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();var vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bf={exports:{}},Ko={},Uf={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),by=Symbol.for("react.portal"),wy=Symbol.for("react.fragment"),_y=Symbol.for("react.strict_mode"),jy=Symbol.for("react.profiler"),Ny=Symbol.for("react.provider"),Sy=Symbol.for("react.context"),ky=Symbol.for("react.forward_ref"),Cy=Symbol.for("react.suspense"),Py=Symbol.for("react.memo"),Ey=Symbol.for("react.lazy"),Gh=Symbol.iterator;function Ly(e){return e===null||typeof e!="object"?null:(e=Gh&&e[Gh]||e["@@iterator"],typeof e=="function"?e:null)}var $f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zf=Object.assign,Hf={};function Zr(e,t,r){this.props=e,this.context=t,this.refs=Hf,this.updater=r||$f}Zr.prototype.isReactComponent={};Zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wf(){}Wf.prototype=Zr.prototype;function Id(e,t,r){this.props=e,this.context=t,this.refs=Hf,this.updater=r||$f}var zd=Id.prototype=new Wf;zd.constructor=Id;Zf(zd,Zr.prototype);zd.isPureReactComponent=!0;var Kh=Array.isArray,Vf=Object.prototype.hasOwnProperty,Dd={current:null},qf={key:!0,ref:!0,__self:!0,__source:!0};function Gf(e,t,r){var i,o={},l=null,d=null;if(t!=null)for(i in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(l=""+t.key),t)Vf.call(t,i)&&!qf.hasOwnProperty(i)&&(o[i]=t[i]);var h=arguments.length-2;if(h===1)o.children=r;else if(1<h){for(var m=Array(h),p=0;p<h;p++)m[p]=arguments[p+2];o.children=m}if(e&&e.defaultProps)for(i in h=e.defaultProps,h)o[i]===void 0&&(o[i]=h[i]);return{$$typeof:ra,type:e,key:l,ref:d,props:o,_owner:Dd.current}}function Ty(e,t){return{$$typeof:ra,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fd(e){return typeof e=="object"&&e!==null&&e.$$typeof===ra}function My(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Qh=/\/+/g;function Yl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?My(""+e.key):t.toString(36)}function so(e,t,r,i,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(l){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case ra:case by:d=!0}}if(d)return d=e,o=o(d),e=i===""?"."+Yl(d,0):i,Kh(o)?(r="",e!=null&&(r=e.replace(Qh,"$&/")+"/"),so(o,t,r,"",function(p){return p})):o!=null&&(Fd(o)&&(o=Ty(o,r+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(Qh,"$&/")+"/")+e)),t.push(o)),1;if(d=0,i=i===""?".":i+":",Kh(e))for(var h=0;h<e.length;h++){l=e[h];var m=i+Yl(l,h);d+=so(l,t,r,m,o)}else if(m=Ly(e),typeof m=="function")for(e=m.call(e),h=0;!(l=e.next()).done;)l=l.value,m=i+Yl(l,h++),d+=so(l,t,r,m,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Aa(e,t,r){if(e==null)return e;var i=[],o=0;return so(e,i,"","",function(l){return t.call(r,l,o++)}),i}function Ry(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rt={current:null},ro={transition:null},Oy={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:ro,ReactCurrentOwner:Dd};function Kf(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Aa,forEach:function(e,t,r){Aa(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Aa(e,function(){t++}),t},toArray:function(e){return Aa(e,function(t){return t})||[]},only:function(e){if(!Fd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Me.Component=Zr;Me.Fragment=wy;Me.Profiler=jy;Me.PureComponent=Id;Me.StrictMode=_y;Me.Suspense=Cy;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oy;Me.act=Kf;Me.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Zf({},e.props),o=e.key,l=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,d=Dd.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(m in t)Vf.call(t,m)&&!qf.hasOwnProperty(m)&&(i[m]=t[m]===void 0&&h!==void 0?h[m]:t[m])}var m=arguments.length-2;if(m===1)i.children=r;else if(1<m){h=Array(m);for(var p=0;p<m;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:ra,type:e.type,key:o,ref:l,props:i,_owner:d}};Me.createContext=function(e){return e={$$typeof:Sy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ny,_context:e},e.Consumer=e};Me.createElement=Gf;Me.createFactory=function(e){var t=Gf.bind(null,e);return t.type=e,t};Me.createRef=function(){return{current:null}};Me.forwardRef=function(e){return{$$typeof:ky,render:e}};Me.isValidElement=Fd;Me.lazy=function(e){return{$$typeof:Ey,_payload:{_status:-1,_result:e},_init:Ry}};Me.memo=function(e,t){return{$$typeof:Py,type:e,compare:t===void 0?null:t}};Me.startTransition=function(e){var t=ro.transition;ro.transition={};try{e()}finally{ro.transition=t}};Me.unstable_act=Kf;Me.useCallback=function(e,t){return Rt.current.useCallback(e,t)};Me.useContext=function(e){return Rt.current.useContext(e)};Me.useDebugValue=function(){};Me.useDeferredValue=function(e){return Rt.current.useDeferredValue(e)};Me.useEffect=function(e,t){return Rt.current.useEffect(e,t)};Me.useId=function(){return Rt.current.useId()};Me.useImperativeHandle=function(e,t,r){return Rt.current.useImperativeHandle(e,t,r)};Me.useInsertionEffect=function(e,t){return Rt.current.useInsertionEffect(e,t)};Me.useLayoutEffect=function(e,t){return Rt.current.useLayoutEffect(e,t)};Me.useMemo=function(e,t){return Rt.current.useMemo(e,t)};Me.useReducer=function(e,t,r){return Rt.current.useReducer(e,t,r)};Me.useRef=function(e){return Rt.current.useRef(e)};Me.useState=function(e){return Rt.current.useState(e)};Me.useSyncExternalStore=function(e,t,r){return Rt.current.useSyncExternalStore(e,t,r)};Me.useTransition=function(){return Rt.current.useTransition()};Me.version="18.3.1";Uf.exports=Me;var v=Uf.exports;const Ie=Ff(v),Ay=yy({__proto__:null,default:Ie},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy=v,zy=Symbol.for("react.element"),Dy=Symbol.for("react.fragment"),Fy=Object.prototype.hasOwnProperty,By=Iy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uy={key:!0,ref:!0,__self:!0,__source:!0};function Qf(e,t,r){var i,o={},l=null,d=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(d=t.ref);for(i in t)Fy.call(t,i)&&!Uy.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:zy,type:e,key:l,ref:d,props:o,_owner:By.current}}Ko.Fragment=Dy;Ko.jsx=Qf;Ko.jsxs=Qf;Bf.exports=Ko;var s=Bf.exports,Tc={},Yf={exports:{}},Kt={},Jf={exports:{}},Xf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,T){var F=U.length;U.push(T);e:for(;0<F;){var $=F-1>>>1,G=U[$];if(0<o(G,T))U[$]=T,U[F]=G,F=$;else break e}}function r(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var T=U[0],F=U.pop();if(F!==T){U[0]=F;e:for(var $=0,G=U.length,ce=G>>>1;$<ce;){var ue=2*($+1)-1,xe=U[ue],ie=ue+1,q=U[ie];if(0>o(xe,F))ie<G&&0>o(q,xe)?(U[$]=q,U[ie]=F,$=ie):(U[$]=xe,U[ue]=F,$=ue);else if(ie<G&&0>o(q,F))U[$]=q,U[ie]=F,$=ie;else break e}}return T}function o(U,T){var F=U.sortIndex-T.sortIndex;return F!==0?F:U.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var m=[],p=[],b=1,g=null,S=3,w=!1,N=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(U){for(var T=r(p);T!==null;){if(T.callback===null)i(p);else if(T.startTime<=U)i(p),T.sortIndex=T.expirationTime,t(m,T);else break;T=r(p)}}function E(U){if(y=!1,k(U),!N)if(r(m)!==null)N=!0,ae(A);else{var T=r(p);T!==null&&_e(E,T.startTime-U)}}function A(U,T){N=!1,y&&(y=!1,_(I),I=-1),w=!0;var F=S;try{for(k(T),g=r(m);g!==null&&(!(g.expirationTime>T)||U&&!D());){var $=g.callback;if(typeof $=="function"){g.callback=null,S=g.priorityLevel;var G=$(g.expirationTime<=T);T=e.unstable_now(),typeof G=="function"?g.callback=G:g===r(m)&&i(m),k(T)}else i(m);g=r(m)}if(g!==null)var ce=!0;else{var ue=r(p);ue!==null&&_e(E,ue.startTime-T),ce=!1}return ce}finally{g=null,S=F,w=!1}}var M=!1,P=null,I=-1,z=5,V=-1;function D(){return!(e.unstable_now()-V<z)}function J(){if(P!==null){var U=e.unstable_now();V=U;var T=!0;try{T=P(!0,U)}finally{T?te():(M=!1,P=null)}}else M=!1}var te;if(typeof x=="function")te=function(){x(J)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ge=se.port2;se.port1.onmessage=J,te=function(){ge.postMessage(null)}}else te=function(){C(J,0)};function ae(U){P=U,M||(M=!0,te())}function _e(U,T){I=C(function(){U(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){N||w||(N=!0,ae(A))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return r(m)},e.unstable_next=function(U){switch(S){case 1:case 2:case 3:var T=3;break;default:T=S}var F=S;S=T;try{return U()}finally{S=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,T){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var F=S;S=U;try{return T()}finally{S=F}},e.unstable_scheduleCallback=function(U,T,F){var $=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?$+F:$):F=$,U){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=F+G,U={id:b++,callback:T,priorityLevel:U,startTime:F,expirationTime:G,sortIndex:-1},F>$?(U.sortIndex=F,t(p,U),r(m)===null&&U===r(p)&&(y?(_(I),I=-1):y=!0,_e(E,F-$))):(U.sortIndex=G,t(m,U),N||w||(N=!0,ae(A))),U},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(U){var T=S;return function(){var F=S;S=T;try{return U.apply(this,arguments)}finally{S=F}}}})(Xf);Jf.exports=Xf;var $y=Jf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy=v,Gt=$y;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ep=new Set,Ai={};function er(e,t){Rr(e,t),Rr(e+"Capture",t)}function Rr(e,t){for(Ai[e]=t,e=0;e<t.length;e++)ep.add(t[e])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mc=Object.prototype.hasOwnProperty,Hy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yh={},Jh={};function Wy(e){return Mc.call(Jh,e)?!0:Mc.call(Yh,e)?!1:Hy.test(e)?Jh[e]=!0:(Yh[e]=!0,!1)}function Vy(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qy(e,t,r,i){if(t===null||typeof t>"u"||Vy(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,r,i,o,l,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=d}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jt[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jt[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jt[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jt[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jt[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jt[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jt[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jt[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jt[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bd=/[\-:]([a-z])/g;function Ud(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bd,Ud);jt[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bd,Ud);jt[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bd,Ud);jt[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});jt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function $d(e,t,r,i){var o=jt.hasOwnProperty(t)?jt[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qy(t,r,o,i)&&(r=null),i||o===null?Wy(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,i=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Yn=Zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ia=Symbol.for("react.element"),pr=Symbol.for("react.portal"),gr=Symbol.for("react.fragment"),Zd=Symbol.for("react.strict_mode"),Rc=Symbol.for("react.profiler"),tp=Symbol.for("react.provider"),np=Symbol.for("react.context"),Hd=Symbol.for("react.forward_ref"),Oc=Symbol.for("react.suspense"),Ac=Symbol.for("react.suspense_list"),Wd=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),sp=Symbol.for("react.offscreen"),Xh=Symbol.iterator;function di(e){return e===null||typeof e!="object"?null:(e=Xh&&e[Xh]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,Jl;function vi(e){if(Jl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Jl=t&&t[1]||""}return`
`+Jl+e}var Xl=!1;function ec(e,t){if(!e||Xl)return"";Xl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var i=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){i=p}e.call(t.prototype)}else{try{throw Error()}catch(p){i=p}e()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),l=i.stack.split(`
`),d=o.length-1,h=l.length-1;1<=d&&0<=h&&o[d]!==l[h];)h--;for(;1<=d&&0<=h;d--,h--)if(o[d]!==l[h]){if(d!==1||h!==1)do if(d--,h--,0>h||o[d]!==l[h]){var m=`
`+o[d].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=d&&0<=h);break}}}finally{Xl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?vi(e):""}function Gy(e){switch(e.tag){case 5:return vi(e.type);case 16:return vi("Lazy");case 13:return vi("Suspense");case 19:return vi("SuspenseList");case 0:case 2:case 15:return e=ec(e.type,!1),e;case 11:return e=ec(e.type.render,!1),e;case 1:return e=ec(e.type,!0),e;default:return""}}function Ic(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gr:return"Fragment";case pr:return"Portal";case Rc:return"Profiler";case Zd:return"StrictMode";case Oc:return"Suspense";case Ac:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case np:return(e.displayName||"Context")+".Consumer";case tp:return(e._context.displayName||"Context")+".Provider";case Hd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wd:return t=e.displayName||null,t!==null?t:Ic(e.type)||"Memo";case is:t=e._payload,e=e._init;try{return Ic(e(t))}catch{}}return null}function Ky(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ic(t);case 8:return t===Zd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function js(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qy(e){var t=rp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(d){i=""+d,l.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function za(e){e._valueTracker||(e._valueTracker=Qy(e))}function ip(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=rp(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function bo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zc(e,t){var r=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function em(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=js(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ap(e,t){t=t.checked,t!=null&&$d(e,"checked",t,!1)}function Dc(e,t){ap(e,t);var r=js(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fc(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fc(e,t.type,js(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function tm(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fc(e,t,r){(t!=="number"||bo(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bi=Array.isArray;function Cr(e,t,r,i){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&i&&(e[r].defaultSelected=!0)}else{for(r=""+js(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Bc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nm(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ne(92));if(bi(r)){if(1<r.length)throw Error(ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:js(r)}}function op(e,t){var r=js(t.value),i=js(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function sm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Da,cp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Da.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ii(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yy=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(e){Yy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ni[t]=Ni[e]})});function dp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ni.hasOwnProperty(e)&&Ni[e]?(""+t).trim():t+"px"}function up(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=dp(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,o):e[r]=o}}var Jy=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $c(e,t){if(t){if(Jy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function Zc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=null;function Vd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wc=null,Pr=null,Er=null;function rm(e){if(e=oa(e)){if(typeof Wc!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=el(t),Wc(e.stateNode,e.type,t))}}function hp(e){Pr?Er?Er.push(e):Er=[e]:Pr=e}function mp(){if(Pr){var e=Pr,t=Er;if(Er=Pr=null,rm(e),t)for(e=0;e<t.length;e++)rm(t[e])}}function fp(e,t){return e(t)}function pp(){}var tc=!1;function gp(e,t,r){if(tc)return e(t,r);tc=!0;try{return fp(e,t,r)}finally{tc=!1,(Pr!==null||Er!==null)&&(pp(),mp())}}function zi(e,t){var r=e.stateNode;if(r===null)return null;var i=el(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ne(231,t,typeof r));return r}var Vc=!1;if(Hn)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){Vc=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{Vc=!1}function Xy(e,t,r,i,o,l,d,h,m){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(b){this.onError(b)}}var Si=!1,wo=null,_o=!1,qc=null,ev={onError:function(e){Si=!0,wo=e}};function tv(e,t,r,i,o,l,d,h,m){Si=!1,wo=null,Xy.apply(ev,arguments)}function nv(e,t,r,i,o,l,d,h,m){if(tv.apply(this,arguments),Si){if(Si){var p=wo;Si=!1,wo=null}else throw Error(ne(198));_o||(_o=!0,qc=p)}}function tr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function xp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function im(e){if(tr(e)!==e)throw Error(ne(188))}function sv(e){var t=e.alternate;if(!t){if(t=tr(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var r=e,i=t;;){var o=r.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===r)return im(o),e;if(l===i)return im(o),t;l=l.sibling}throw Error(ne(188))}if(r.return!==i.return)r=o,i=l;else{for(var d=!1,h=o.child;h;){if(h===r){d=!0,r=o,i=l;break}if(h===i){d=!0,i=o,r=l;break}h=h.sibling}if(!d){for(h=l.child;h;){if(h===r){d=!0,r=l,i=o;break}if(h===i){d=!0,i=l,r=o;break}h=h.sibling}if(!d)throw Error(ne(189))}}if(r.alternate!==i)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?e:t}function yp(e){return e=sv(e),e!==null?vp(e):null}function vp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vp(e);if(t!==null)return t;e=e.sibling}return null}var bp=Gt.unstable_scheduleCallback,am=Gt.unstable_cancelCallback,rv=Gt.unstable_shouldYield,iv=Gt.unstable_requestPaint,nt=Gt.unstable_now,av=Gt.unstable_getCurrentPriorityLevel,qd=Gt.unstable_ImmediatePriority,wp=Gt.unstable_UserBlockingPriority,jo=Gt.unstable_NormalPriority,ov=Gt.unstable_LowPriority,_p=Gt.unstable_IdlePriority,Qo=null,Ln=null;function lv(e){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Qo,e,void 0,(e.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:uv,cv=Math.log,dv=Math.LN2;function uv(e){return e>>>=0,e===0?32:31-(cv(e)/dv|0)|0}var Fa=64,Ba=4194304;function wi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function No(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,o=e.suspendedLanes,l=e.pingedLanes,d=r&268435455;if(d!==0){var h=d&~o;h!==0?i=wi(h):(l&=d,l!==0&&(i=wi(l)))}else d=r&~o,d!==0?i=wi(d):l!==0&&(i=wi(l));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-gn(t),o=1<<r,i|=e[r],t&=~o;return i}function hv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mv(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var d=31-gn(l),h=1<<d,m=o[d];m===-1?(!(h&r)||h&i)&&(o[d]=hv(h,t)):m<=t&&(e.expiredLanes|=h),l&=~h}}function Gc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jp(){var e=Fa;return Fa<<=1,!(Fa&4194240)&&(Fa=64),e}function nc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ia(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gn(t),e[t]=r}function fv(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-gn(r),l=1<<o;t[o]=0,i[o]=-1,e[o]=-1,r&=~l}}function Gd(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-gn(r),o=1<<i;o&t|e[i]&t&&(e[i]|=t),r&=~o}}var Fe=0;function Np(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sp,Kd,kp,Cp,Pp,Kc=!1,Ua=[],fs=null,ps=null,gs=null,Di=new Map,Fi=new Map,os=[],pv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function om(e,t){switch(e){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Di.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fi.delete(t.pointerId)}}function hi(e,t,r,i,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},t!==null&&(t=oa(t),t!==null&&Kd(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function gv(e,t,r,i,o){switch(t){case"focusin":return fs=hi(fs,e,t,r,i,o),!0;case"dragenter":return ps=hi(ps,e,t,r,i,o),!0;case"mouseover":return gs=hi(gs,e,t,r,i,o),!0;case"pointerover":var l=o.pointerId;return Di.set(l,hi(Di.get(l)||null,e,t,r,i,o)),!0;case"gotpointercapture":return l=o.pointerId,Fi.set(l,hi(Fi.get(l)||null,e,t,r,i,o)),!0}return!1}function Ep(e){var t=Bs(e.target);if(t!==null){var r=tr(t);if(r!==null){if(t=r.tag,t===13){if(t=xp(r),t!==null){e.blockedOn=t,Pp(e.priority,function(){kp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function io(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Hc=i,r.target.dispatchEvent(i),Hc=null}else return t=oa(r),t!==null&&Kd(t),e.blockedOn=r,!1;t.shift()}return!0}function lm(e,t,r){io(e)&&r.delete(t)}function xv(){Kc=!1,fs!==null&&io(fs)&&(fs=null),ps!==null&&io(ps)&&(ps=null),gs!==null&&io(gs)&&(gs=null),Di.forEach(lm),Fi.forEach(lm)}function mi(e,t){e.blockedOn===t&&(e.blockedOn=null,Kc||(Kc=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,xv)))}function Bi(e){function t(o){return mi(o,e)}if(0<Ua.length){mi(Ua[0],e);for(var r=1;r<Ua.length;r++){var i=Ua[r];i.blockedOn===e&&(i.blockedOn=null)}}for(fs!==null&&mi(fs,e),ps!==null&&mi(ps,e),gs!==null&&mi(gs,e),Di.forEach(t),Fi.forEach(t),r=0;r<os.length;r++)i=os[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<os.length&&(r=os[0],r.blockedOn===null);)Ep(r),r.blockedOn===null&&os.shift()}var Lr=Yn.ReactCurrentBatchConfig,So=!0;function yv(e,t,r,i){var o=Fe,l=Lr.transition;Lr.transition=null;try{Fe=1,Qd(e,t,r,i)}finally{Fe=o,Lr.transition=l}}function vv(e,t,r,i){var o=Fe,l=Lr.transition;Lr.transition=null;try{Fe=4,Qd(e,t,r,i)}finally{Fe=o,Lr.transition=l}}function Qd(e,t,r,i){if(So){var o=Qc(e,t,r,i);if(o===null)hc(e,t,i,ko,r),om(e,i);else if(gv(o,e,t,r,i))i.stopPropagation();else if(om(e,i),t&4&&-1<pv.indexOf(e)){for(;o!==null;){var l=oa(o);if(l!==null&&Sp(l),l=Qc(e,t,r,i),l===null&&hc(e,t,i,ko,r),l===o)break;o=l}o!==null&&i.stopPropagation()}else hc(e,t,i,null,r)}}var ko=null;function Qc(e,t,r,i){if(ko=null,e=Vd(i),e=Bs(e),e!==null)if(t=tr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=xp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ko=e,null}function Lp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(av()){case qd:return 1;case wp:return 4;case jo:case ov:return 16;case _p:return 536870912;default:return 16}default:return 16}}var cs=null,Yd=null,ao=null;function Tp(){if(ao)return ao;var e,t=Yd,r=t.length,i,o="value"in cs?cs.value:cs.textContent,l=o.length;for(e=0;e<r&&t[e]===o[e];e++);var d=r-e;for(i=1;i<=d&&t[r-i]===o[l-i];i++);return ao=o.slice(e,1<i?1-i:void 0)}function oo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $a(){return!0}function cm(){return!1}function Qt(e){function t(r,i,o,l,d){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(r=e[h],this[h]=r?r(l):l[h]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?$a:cm,this.isPropagationStopped=cm,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jd=Qt(Hr),aa=Xe({},Hr,{view:0,detail:0}),bv=Qt(aa),sc,rc,fi,Yo=Xe({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fi&&(fi&&e.type==="mousemove"?(sc=e.screenX-fi.screenX,rc=e.screenY-fi.screenY):rc=sc=0,fi=e),sc)},movementY:function(e){return"movementY"in e?e.movementY:rc}}),dm=Qt(Yo),wv=Xe({},Yo,{dataTransfer:0}),_v=Qt(wv),jv=Xe({},aa,{relatedTarget:0}),ic=Qt(jv),Nv=Xe({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sv=Qt(Nv),kv=Xe({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cv=Qt(kv),Pv=Xe({},Hr,{data:0}),um=Qt(Pv),Ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tv[e])?!!t[e]:!1}function Xd(){return Mv}var Rv=Xe({},aa,{key:function(e){if(e.key){var t=Ev[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xd,charCode:function(e){return e.type==="keypress"?oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ov=Qt(Rv),Av=Xe({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hm=Qt(Av),Iv=Xe({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xd}),zv=Qt(Iv),Dv=Xe({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fv=Qt(Dv),Bv=Xe({},Yo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Uv=Qt(Bv),$v=[9,13,27,32],eu=Hn&&"CompositionEvent"in window,ki=null;Hn&&"documentMode"in document&&(ki=document.documentMode);var Zv=Hn&&"TextEvent"in window&&!ki,Mp=Hn&&(!eu||ki&&8<ki&&11>=ki),mm=" ",fm=!1;function Rp(e,t){switch(e){case"keyup":return $v.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Op(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xr=!1;function Hv(e,t){switch(e){case"compositionend":return Op(t);case"keypress":return t.which!==32?null:(fm=!0,mm);case"textInput":return e=t.data,e===mm&&fm?null:e;default:return null}}function Wv(e,t){if(xr)return e==="compositionend"||!eu&&Rp(e,t)?(e=Tp(),ao=Yd=cs=null,xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mp&&t.locale!=="ko"?null:t.data;default:return null}}var Vv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vv[e.type]:t==="textarea"}function Ap(e,t,r,i){hp(i),t=Co(t,"onChange"),0<t.length&&(r=new Jd("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Ci=null,Ui=null;function qv(e){Vp(e,0)}function Jo(e){var t=br(e);if(ip(t))return e}function Gv(e,t){if(e==="change")return t}var Ip=!1;if(Hn){var ac;if(Hn){var oc="oninput"in document;if(!oc){var gm=document.createElement("div");gm.setAttribute("oninput","return;"),oc=typeof gm.oninput=="function"}ac=oc}else ac=!1;Ip=ac&&(!document.documentMode||9<document.documentMode)}function xm(){Ci&&(Ci.detachEvent("onpropertychange",zp),Ui=Ci=null)}function zp(e){if(e.propertyName==="value"&&Jo(Ui)){var t=[];Ap(t,Ui,e,Vd(e)),gp(qv,t)}}function Kv(e,t,r){e==="focusin"?(xm(),Ci=t,Ui=r,Ci.attachEvent("onpropertychange",zp)):e==="focusout"&&xm()}function Qv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(Ui)}function Yv(e,t){if(e==="click")return Jo(t)}function Jv(e,t){if(e==="input"||e==="change")return Jo(t)}function Xv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yn=typeof Object.is=="function"?Object.is:Xv;function $i(e,t){if(yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!Mc.call(t,o)||!yn(e[o],t[o]))return!1}return!0}function ym(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vm(e,t){var r=ym(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ym(r)}}function Dp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fp(){for(var e=window,t=bo();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=bo(e.document)}return t}function tu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eb(e){var t=Fp(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Dp(r.ownerDocument.documentElement,r)){if(i!==null&&tu(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!e.extend&&l>i&&(o=i,i=l,l=o),o=vm(r,l);var d=vm(r,i);o&&d&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>i?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tb=Hn&&"documentMode"in document&&11>=document.documentMode,yr=null,Yc=null,Pi=null,Jc=!1;function bm(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jc||yr==null||yr!==bo(i)||(i=yr,"selectionStart"in i&&tu(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Pi&&$i(Pi,i)||(Pi=i,i=Co(Yc,"onSelect"),0<i.length&&(t=new Jd("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=yr)))}function Za(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vr={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionend:Za("Transition","TransitionEnd")},lc={},Bp={};Hn&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Xo(e){if(lc[e])return lc[e];if(!vr[e])return e;var t=vr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Bp)return lc[e]=t[r];return e}var Up=Xo("animationend"),$p=Xo("animationiteration"),Zp=Xo("animationstart"),Hp=Xo("transitionend"),Wp=new Map,wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(e,t){Wp.set(e,t),er(t,[e])}for(var cc=0;cc<wm.length;cc++){var dc=wm[cc],nb=dc.toLowerCase(),sb=dc[0].toUpperCase()+dc.slice(1);ks(nb,"on"+sb)}ks(Up,"onAnimationEnd");ks($p,"onAnimationIteration");ks(Zp,"onAnimationStart");ks("dblclick","onDoubleClick");ks("focusin","onFocus");ks("focusout","onBlur");ks(Hp,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));er("onBeforeInput",["compositionend","keypress","textInput","paste"]);er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rb=new Set("cancel close invalid load scroll toggle".split(" ").concat(_i));function _m(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,nv(i,t,void 0,e),e.currentTarget=null}function Vp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],o=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var d=i.length-1;0<=d;d--){var h=i[d],m=h.instance,p=h.currentTarget;if(h=h.listener,m!==l&&o.isPropagationStopped())break e;_m(o,h,p),l=m}else for(d=0;d<i.length;d++){if(h=i[d],m=h.instance,p=h.currentTarget,h=h.listener,m!==l&&o.isPropagationStopped())break e;_m(o,h,p),l=m}}}if(_o)throw e=qc,_o=!1,qc=null,e}function Ze(e,t){var r=t[sd];r===void 0&&(r=t[sd]=new Set);var i=e+"__bubble";r.has(i)||(qp(t,e,2,!1),r.add(i))}function uc(e,t,r){var i=0;t&&(i|=4),qp(r,e,i,t)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[Ha]){e[Ha]=!0,ep.forEach(function(r){r!=="selectionchange"&&(rb.has(r)||uc(r,!1,e),uc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ha]||(t[Ha]=!0,uc("selectionchange",!1,t))}}function qp(e,t,r,i){switch(Lp(t)){case 1:var o=yv;break;case 4:o=vv;break;default:o=Qd}r=o.bind(null,t,r,e),o=void 0,!Vc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function hc(e,t,r,i,o){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var d=i.tag;if(d===3||d===4){var h=i.stateNode.containerInfo;if(h===o||h.nodeType===8&&h.parentNode===o)break;if(d===4)for(d=i.return;d!==null;){var m=d.tag;if((m===3||m===4)&&(m=d.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;d=d.return}for(;h!==null;){if(d=Bs(h),d===null)return;if(m=d.tag,m===5||m===6){i=l=d;continue e}h=h.parentNode}}i=i.return}gp(function(){var p=l,b=Vd(r),g=[];e:{var S=Wp.get(e);if(S!==void 0){var w=Jd,N=e;switch(e){case"keypress":if(oo(r)===0)break e;case"keydown":case"keyup":w=Ov;break;case"focusin":N="focus",w=ic;break;case"focusout":N="blur",w=ic;break;case"beforeblur":case"afterblur":w=ic;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=dm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=_v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=zv;break;case Up:case $p:case Zp:w=Sv;break;case Hp:w=Fv;break;case"scroll":w=bv;break;case"wheel":w=Uv;break;case"copy":case"cut":case"paste":w=Cv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=hm}var y=(t&4)!==0,C=!y&&e==="scroll",_=y?S!==null?S+"Capture":null:S;y=[];for(var x=p,k;x!==null;){k=x;var E=k.stateNode;if(k.tag===5&&E!==null&&(k=E,_!==null&&(E=zi(x,_),E!=null&&y.push(Hi(x,E,k)))),C)break;x=x.return}0<y.length&&(S=new w(S,N,null,r,b),g.push({event:S,listeners:y}))}}if(!(t&7)){e:{if(S=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",S&&r!==Hc&&(N=r.relatedTarget||r.fromElement)&&(Bs(N)||N[Wn]))break e;if((w||S)&&(S=b.window===b?b:(S=b.ownerDocument)?S.defaultView||S.parentWindow:window,w?(N=r.relatedTarget||r.toElement,w=p,N=N?Bs(N):null,N!==null&&(C=tr(N),N!==C||N.tag!==5&&N.tag!==6)&&(N=null)):(w=null,N=p),w!==N)){if(y=dm,E="onMouseLeave",_="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=hm,E="onPointerLeave",_="onPointerEnter",x="pointer"),C=w==null?S:br(w),k=N==null?S:br(N),S=new y(E,x+"leave",w,r,b),S.target=C,S.relatedTarget=k,E=null,Bs(b)===p&&(y=new y(_,x+"enter",N,r,b),y.target=k,y.relatedTarget=C,E=y),C=E,w&&N)t:{for(y=w,_=N,x=0,k=y;k;k=mr(k))x++;for(k=0,E=_;E;E=mr(E))k++;for(;0<x-k;)y=mr(y),x--;for(;0<k-x;)_=mr(_),k--;for(;x--;){if(y===_||_!==null&&y===_.alternate)break t;y=mr(y),_=mr(_)}y=null}else y=null;w!==null&&jm(g,S,w,y,!1),N!==null&&C!==null&&jm(g,C,N,y,!0)}}e:{if(S=p?br(p):window,w=S.nodeName&&S.nodeName.toLowerCase(),w==="select"||w==="input"&&S.type==="file")var A=Gv;else if(pm(S))if(Ip)A=Jv;else{A=Qv;var M=Kv}else(w=S.nodeName)&&w.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(A=Yv);if(A&&(A=A(e,p))){Ap(g,A,r,b);break e}M&&M(e,S,p),e==="focusout"&&(M=S._wrapperState)&&M.controlled&&S.type==="number"&&Fc(S,"number",S.value)}switch(M=p?br(p):window,e){case"focusin":(pm(M)||M.contentEditable==="true")&&(yr=M,Yc=p,Pi=null);break;case"focusout":Pi=Yc=yr=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,bm(g,r,b);break;case"selectionchange":if(tb)break;case"keydown":case"keyup":bm(g,r,b)}var P;if(eu)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else xr?Rp(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(Mp&&r.locale!=="ko"&&(xr||I!=="onCompositionStart"?I==="onCompositionEnd"&&xr&&(P=Tp()):(cs=b,Yd="value"in cs?cs.value:cs.textContent,xr=!0)),M=Co(p,I),0<M.length&&(I=new um(I,e,null,r,b),g.push({event:I,listeners:M}),P?I.data=P:(P=Op(r),P!==null&&(I.data=P)))),(P=Zv?Hv(e,r):Wv(e,r))&&(p=Co(p,"onBeforeInput"),0<p.length&&(b=new um("onBeforeInput","beforeinput",null,r,b),g.push({event:b,listeners:p}),b.data=P))}Vp(g,t)})}function Hi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Co(e,t){for(var r=t+"Capture",i=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=zi(e,r),l!=null&&i.unshift(Hi(e,l,o)),l=zi(e,t),l!=null&&i.push(Hi(e,l,o))),e=e.return}return i}function mr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jm(e,t,r,i,o){for(var l=t._reactName,d=[];r!==null&&r!==i;){var h=r,m=h.alternate,p=h.stateNode;if(m!==null&&m===i)break;h.tag===5&&p!==null&&(h=p,o?(m=zi(r,l),m!=null&&d.unshift(Hi(r,m,h))):o||(m=zi(r,l),m!=null&&d.push(Hi(r,m,h)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var ib=/\r\n?/g,ab=/\u0000|\uFFFD/g;function Nm(e){return(typeof e=="string"?e:""+e).replace(ib,`
`).replace(ab,"")}function Wa(e,t,r){if(t=Nm(t),Nm(e)!==t&&r)throw Error(ne(425))}function Po(){}var Xc=null,ed=null;function td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nd=typeof setTimeout=="function"?setTimeout:void 0,ob=typeof clearTimeout=="function"?clearTimeout:void 0,Sm=typeof Promise=="function"?Promise:void 0,lb=typeof queueMicrotask=="function"?queueMicrotask:typeof Sm<"u"?function(e){return Sm.resolve(null).then(e).catch(cb)}:nd;function cb(e){setTimeout(function(){throw e})}function mc(e,t){var r=t,i=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){e.removeChild(o),Bi(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);Bi(t)}function xs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function km(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),En="__reactFiber$"+Wr,Wi="__reactProps$"+Wr,Wn="__reactContainer$"+Wr,sd="__reactEvents$"+Wr,db="__reactListeners$"+Wr,ub="__reactHandles$"+Wr;function Bs(e){var t=e[En];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Wn]||r[En]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=km(e);e!==null;){if(r=e[En])return r;e=km(e)}return t}e=r,r=e.parentNode}return null}function oa(e){return e=e[En]||e[Wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function el(e){return e[Wi]||null}var rd=[],wr=-1;function Cs(e){return{current:e}}function Ve(e){0>wr||(e.current=rd[wr],rd[wr]=null,wr--)}function $e(e,t){wr++,rd[wr]=e.current,e.current=t}var Ns={},Pt=Cs(Ns),Ft=Cs(!1),qs=Ns;function Or(e,t){var r=e.type.contextTypes;if(!r)return Ns;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in r)o[l]=t[l];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Bt(e){return e=e.childContextTypes,e!=null}function Eo(){Ve(Ft),Ve(Pt)}function Cm(e,t,r){if(Pt.current!==Ns)throw Error(ne(168));$e(Pt,t),$e(Ft,r)}function Gp(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(ne(108,Ky(e)||"Unknown",o));return Xe({},r,i)}function Lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ns,qs=Pt.current,$e(Pt,e),$e(Ft,Ft.current),!0}function Pm(e,t,r){var i=e.stateNode;if(!i)throw Error(ne(169));r?(e=Gp(e,t,qs),i.__reactInternalMemoizedMergedChildContext=e,Ve(Ft),Ve(Pt),$e(Pt,e)):Ve(Ft),$e(Ft,r)}var Dn=null,tl=!1,fc=!1;function Kp(e){Dn===null?Dn=[e]:Dn.push(e)}function hb(e){tl=!0,Kp(e)}function Ps(){if(!fc&&Dn!==null){fc=!0;var e=0,t=Fe;try{var r=Dn;for(Fe=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Dn=null,tl=!1}catch(o){throw Dn!==null&&(Dn=Dn.slice(e+1)),bp(qd,Ps),o}finally{Fe=t,fc=!1}}return null}var _r=[],jr=0,To=null,Mo=0,nn=[],sn=0,Gs=null,Fn=1,Bn="";function zs(e,t){_r[jr++]=Mo,_r[jr++]=To,To=e,Mo=t}function Qp(e,t,r){nn[sn++]=Fn,nn[sn++]=Bn,nn[sn++]=Gs,Gs=e;var i=Fn;e=Bn;var o=32-gn(i)-1;i&=~(1<<o),r+=1;var l=32-gn(t)+o;if(30<l){var d=o-o%5;l=(i&(1<<d)-1).toString(32),i>>=d,o-=d,Fn=1<<32-gn(t)+o|r<<o|i,Bn=l+e}else Fn=1<<l|r<<o|i,Bn=e}function nu(e){e.return!==null&&(zs(e,1),Qp(e,1,0))}function su(e){for(;e===To;)To=_r[--jr],_r[jr]=null,Mo=_r[--jr],_r[jr]=null;for(;e===Gs;)Gs=nn[--sn],nn[sn]=null,Bn=nn[--sn],nn[sn]=null,Fn=nn[--sn],nn[sn]=null}var Vt=null,Wt=null,qe=!1,pn=null;function Yp(e,t){var r=rn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Em(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vt=e,Wt=xs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vt=e,Wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Gs!==null?{id:Fn,overflow:Bn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=rn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Vt=e,Wt=null,!0):!1;default:return!1}}function id(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ad(e){if(qe){var t=Wt;if(t){var r=t;if(!Em(e,t)){if(id(e))throw Error(ne(418));t=xs(r.nextSibling);var i=Vt;t&&Em(e,t)?Yp(i,r):(e.flags=e.flags&-4097|2,qe=!1,Vt=e)}}else{if(id(e))throw Error(ne(418));e.flags=e.flags&-4097|2,qe=!1,Vt=e}}}function Lm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vt=e}function Va(e){if(e!==Vt)return!1;if(!qe)return Lm(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!td(e.type,e.memoizedProps)),t&&(t=Wt)){if(id(e))throw Jp(),Error(ne(418));for(;t;)Yp(e,t),t=xs(t.nextSibling)}if(Lm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Wt=xs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Wt=null}}else Wt=Vt?xs(e.stateNode.nextSibling):null;return!0}function Jp(){for(var e=Wt;e;)e=xs(e.nextSibling)}function Ar(){Wt=Vt=null,qe=!1}function ru(e){pn===null?pn=[e]:pn.push(e)}var mb=Yn.ReactCurrentBatchConfig;function pi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var i=r.stateNode}if(!i)throw Error(ne(147,e));var o=i,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(d){var h=o.refs;d===null?delete h[l]:h[l]=d},t._stringRef=l,t)}if(typeof e!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tm(e){var t=e._init;return t(e._payload)}function Xp(e){function t(_,x){if(e){var k=_.deletions;k===null?(_.deletions=[x],_.flags|=16):k.push(x)}}function r(_,x){if(!e)return null;for(;x!==null;)t(_,x),x=x.sibling;return null}function i(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function o(_,x){return _=ws(_,x),_.index=0,_.sibling=null,_}function l(_,x,k){return _.index=k,e?(k=_.alternate,k!==null?(k=k.index,k<x?(_.flags|=2,x):k):(_.flags|=2,x)):(_.flags|=1048576,x)}function d(_){return e&&_.alternate===null&&(_.flags|=2),_}function h(_,x,k,E){return x===null||x.tag!==6?(x=wc(k,_.mode,E),x.return=_,x):(x=o(x,k),x.return=_,x)}function m(_,x,k,E){var A=k.type;return A===gr?b(_,x,k.props.children,E,k.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===is&&Tm(A)===x.type)?(E=o(x,k.props),E.ref=pi(_,x,k),E.return=_,E):(E=po(k.type,k.key,k.props,null,_.mode,E),E.ref=pi(_,x,k),E.return=_,E)}function p(_,x,k,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==k.containerInfo||x.stateNode.implementation!==k.implementation?(x=_c(k,_.mode,E),x.return=_,x):(x=o(x,k.children||[]),x.return=_,x)}function b(_,x,k,E,A){return x===null||x.tag!==7?(x=Ws(k,_.mode,E,A),x.return=_,x):(x=o(x,k),x.return=_,x)}function g(_,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return x=wc(""+x,_.mode,k),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ia:return k=po(x.type,x.key,x.props,null,_.mode,k),k.ref=pi(_,null,x),k.return=_,k;case pr:return x=_c(x,_.mode,k),x.return=_,x;case is:var E=x._init;return g(_,E(x._payload),k)}if(bi(x)||di(x))return x=Ws(x,_.mode,k,null),x.return=_,x;qa(_,x)}return null}function S(_,x,k,E){var A=x!==null?x.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return A!==null?null:h(_,x,""+k,E);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ia:return k.key===A?m(_,x,k,E):null;case pr:return k.key===A?p(_,x,k,E):null;case is:return A=k._init,S(_,x,A(k._payload),E)}if(bi(k)||di(k))return A!==null?null:b(_,x,k,E,null);qa(_,k)}return null}function w(_,x,k,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return _=_.get(k)||null,h(x,_,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ia:return _=_.get(E.key===null?k:E.key)||null,m(x,_,E,A);case pr:return _=_.get(E.key===null?k:E.key)||null,p(x,_,E,A);case is:var M=E._init;return w(_,x,k,M(E._payload),A)}if(bi(E)||di(E))return _=_.get(k)||null,b(x,_,E,A,null);qa(x,E)}return null}function N(_,x,k,E){for(var A=null,M=null,P=x,I=x=0,z=null;P!==null&&I<k.length;I++){P.index>I?(z=P,P=null):z=P.sibling;var V=S(_,P,k[I],E);if(V===null){P===null&&(P=z);break}e&&P&&V.alternate===null&&t(_,P),x=l(V,x,I),M===null?A=V:M.sibling=V,M=V,P=z}if(I===k.length)return r(_,P),qe&&zs(_,I),A;if(P===null){for(;I<k.length;I++)P=g(_,k[I],E),P!==null&&(x=l(P,x,I),M===null?A=P:M.sibling=P,M=P);return qe&&zs(_,I),A}for(P=i(_,P);I<k.length;I++)z=w(P,_,I,k[I],E),z!==null&&(e&&z.alternate!==null&&P.delete(z.key===null?I:z.key),x=l(z,x,I),M===null?A=z:M.sibling=z,M=z);return e&&P.forEach(function(D){return t(_,D)}),qe&&zs(_,I),A}function y(_,x,k,E){var A=di(k);if(typeof A!="function")throw Error(ne(150));if(k=A.call(k),k==null)throw Error(ne(151));for(var M=A=null,P=x,I=x=0,z=null,V=k.next();P!==null&&!V.done;I++,V=k.next()){P.index>I?(z=P,P=null):z=P.sibling;var D=S(_,P,V.value,E);if(D===null){P===null&&(P=z);break}e&&P&&D.alternate===null&&t(_,P),x=l(D,x,I),M===null?A=D:M.sibling=D,M=D,P=z}if(V.done)return r(_,P),qe&&zs(_,I),A;if(P===null){for(;!V.done;I++,V=k.next())V=g(_,V.value,E),V!==null&&(x=l(V,x,I),M===null?A=V:M.sibling=V,M=V);return qe&&zs(_,I),A}for(P=i(_,P);!V.done;I++,V=k.next())V=w(P,_,I,V.value,E),V!==null&&(e&&V.alternate!==null&&P.delete(V.key===null?I:V.key),x=l(V,x,I),M===null?A=V:M.sibling=V,M=V);return e&&P.forEach(function(J){return t(_,J)}),qe&&zs(_,I),A}function C(_,x,k,E){if(typeof k=="object"&&k!==null&&k.type===gr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Ia:e:{for(var A=k.key,M=x;M!==null;){if(M.key===A){if(A=k.type,A===gr){if(M.tag===7){r(_,M.sibling),x=o(M,k.props.children),x.return=_,_=x;break e}}else if(M.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===is&&Tm(A)===M.type){r(_,M.sibling),x=o(M,k.props),x.ref=pi(_,M,k),x.return=_,_=x;break e}r(_,M);break}else t(_,M);M=M.sibling}k.type===gr?(x=Ws(k.props.children,_.mode,E,k.key),x.return=_,_=x):(E=po(k.type,k.key,k.props,null,_.mode,E),E.ref=pi(_,x,k),E.return=_,_=E)}return d(_);case pr:e:{for(M=k.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===k.containerInfo&&x.stateNode.implementation===k.implementation){r(_,x.sibling),x=o(x,k.children||[]),x.return=_,_=x;break e}else{r(_,x);break}else t(_,x);x=x.sibling}x=_c(k,_.mode,E),x.return=_,_=x}return d(_);case is:return M=k._init,C(_,x,M(k._payload),E)}if(bi(k))return N(_,x,k,E);if(di(k))return y(_,x,k,E);qa(_,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,x!==null&&x.tag===6?(r(_,x.sibling),x=o(x,k),x.return=_,_=x):(r(_,x),x=wc(k,_.mode,E),x.return=_,_=x),d(_)):r(_,x)}return C}var Ir=Xp(!0),eg=Xp(!1),Ro=Cs(null),Oo=null,Nr=null,iu=null;function au(){iu=Nr=Oo=null}function ou(e){var t=Ro.current;Ve(Ro),e._currentValue=t}function od(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Tr(e,t){Oo=e,iu=Nr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zt=!0),e.firstContext=null)}function ln(e){var t=e._currentValue;if(iu!==e)if(e={context:e,memoizedValue:t,next:null},Nr===null){if(Oo===null)throw Error(ne(308));Nr=e,Oo.dependencies={lanes:0,firstContext:e}}else Nr=Nr.next=e;return t}var Us=null;function lu(e){Us===null?Us=[e]:Us.push(e)}function tg(e,t,r,i){var o=t.interleaved;return o===null?(r.next=r,lu(t)):(r.next=o.next,o.next=r),t.interleaved=r,Vn(e,i)}function Vn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var as=!1;function cu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ng(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ys(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Oe&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,Vn(e,r)}return o=i.interleaved,o===null?(t.next=t,lu(i)):(t.next=o.next,o.next=t),i.interleaved=t,Vn(e,r)}function lo(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Gd(e,r)}}function Mm(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?o=l=d:l=l.next=d,r=r.next}while(r!==null);l===null?o=l=t:l=l.next=t}else o=l=t;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ao(e,t,r,i){var o=e.updateQueue;as=!1;var l=o.firstBaseUpdate,d=o.lastBaseUpdate,h=o.shared.pending;if(h!==null){o.shared.pending=null;var m=h,p=m.next;m.next=null,d===null?l=p:d.next=p,d=m;var b=e.alternate;b!==null&&(b=b.updateQueue,h=b.lastBaseUpdate,h!==d&&(h===null?b.firstBaseUpdate=p:h.next=p,b.lastBaseUpdate=m))}if(l!==null){var g=o.baseState;d=0,b=p=m=null,h=l;do{var S=h.lane,w=h.eventTime;if((i&S)===S){b!==null&&(b=b.next={eventTime:w,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var N=e,y=h;switch(S=t,w=r,y.tag){case 1:if(N=y.payload,typeof N=="function"){g=N.call(w,g,S);break e}g=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=y.payload,S=typeof N=="function"?N.call(w,g,S):N,S==null)break e;g=Xe({},g,S);break e;case 2:as=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,S=o.effects,S===null?o.effects=[h]:S.push(h))}else w={eventTime:w,lane:S,tag:h.tag,payload:h.payload,callback:h.callback,next:null},b===null?(p=b=w,m=g):b=b.next=w,d|=S;if(h=h.next,h===null){if(h=o.shared.pending,h===null)break;S=h,h=S.next,S.next=null,o.lastBaseUpdate=S,o.shared.pending=null}}while(!0);if(b===null&&(m=g),o.baseState=m,o.firstBaseUpdate=p,o.lastBaseUpdate=b,t=o.shared.interleaved,t!==null){o=t;do d|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);Qs|=d,e.lanes=d,e.memoizedState=g}}function Rm(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(ne(191,o));o.call(i)}}}var la={},Tn=Cs(la),Vi=Cs(la),qi=Cs(la);function $s(e){if(e===la)throw Error(ne(174));return e}function du(e,t){switch($e(qi,t),$e(Vi,e),$e(Tn,la),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Uc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Uc(t,e)}Ve(Tn),$e(Tn,t)}function zr(){Ve(Tn),Ve(Vi),Ve(qi)}function sg(e){$s(qi.current);var t=$s(Tn.current),r=Uc(t,e.type);t!==r&&($e(Vi,e),$e(Tn,r))}function uu(e){Vi.current===e&&(Ve(Tn),Ve(Vi))}var Ye=Cs(0);function Io(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pc=[];function hu(){for(var e=0;e<pc.length;e++)pc[e]._workInProgressVersionPrimary=null;pc.length=0}var co=Yn.ReactCurrentDispatcher,gc=Yn.ReactCurrentBatchConfig,Ks=0,Je=null,ut=null,pt=null,zo=!1,Ei=!1,Gi=0,fb=0;function Nt(){throw Error(ne(321))}function mu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!yn(e[r],t[r]))return!1;return!0}function fu(e,t,r,i,o,l){if(Ks=l,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,co.current=e===null||e.memoizedState===null?yb:vb,e=r(i,o),Ei){l=0;do{if(Ei=!1,Gi=0,25<=l)throw Error(ne(301));l+=1,pt=ut=null,t.updateQueue=null,co.current=bb,e=r(i,o)}while(Ei)}if(co.current=Do,t=ut!==null&&ut.next!==null,Ks=0,pt=ut=Je=null,zo=!1,t)throw Error(ne(300));return e}function pu(){var e=Gi!==0;return Gi=0,e}function Pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Je.memoizedState=pt=e:pt=pt.next=e,pt}function cn(){if(ut===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=pt===null?Je.memoizedState:pt.next;if(t!==null)pt=t,ut=e;else{if(e===null)throw Error(ne(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},pt===null?Je.memoizedState=pt=e:pt=pt.next=e}return pt}function Ki(e,t){return typeof t=="function"?t(e):t}function xc(e){var t=cn(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var i=ut,o=i.baseQueue,l=r.pending;if(l!==null){if(o!==null){var d=o.next;o.next=l.next,l.next=d}i.baseQueue=o=l,r.pending=null}if(o!==null){l=o.next,i=i.baseState;var h=d=null,m=null,p=l;do{var b=p.lane;if((Ks&b)===b)m!==null&&(m=m.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:e(i,p.action);else{var g={lane:b,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};m===null?(h=m=g,d=i):m=m.next=g,Je.lanes|=b,Qs|=b}p=p.next}while(p!==null&&p!==l);m===null?d=i:m.next=h,yn(i,t.memoizedState)||(zt=!0),t.memoizedState=i,t.baseState=d,t.baseQueue=m,r.lastRenderedState=i}if(e=r.interleaved,e!==null){o=e;do l=o.lane,Je.lanes|=l,Qs|=l,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function yc(e){var t=cn(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var i=r.dispatch,o=r.pending,l=t.memoizedState;if(o!==null){r.pending=null;var d=o=o.next;do l=e(l,d.action),d=d.next;while(d!==o);yn(l,t.memoizedState)||(zt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,i]}function rg(){}function ig(e,t){var r=Je,i=cn(),o=t(),l=!yn(i.memoizedState,o);if(l&&(i.memoizedState=o,zt=!0),i=i.queue,gu(lg.bind(null,r,i,e),[e]),i.getSnapshot!==t||l||pt!==null&&pt.memoizedState.tag&1){if(r.flags|=2048,Qi(9,og.bind(null,r,i,o,t),void 0,null),xt===null)throw Error(ne(349));Ks&30||ag(r,t,o)}return o}function ag(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function og(e,t,r,i){t.value=r,t.getSnapshot=i,cg(t)&&dg(e)}function lg(e,t,r){return r(function(){cg(t)&&dg(e)})}function cg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!yn(e,r)}catch{return!0}}function dg(e){var t=Vn(e,1);t!==null&&xn(t,e,1,-1)}function Om(e){var t=Pn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:e},t.queue=e,e=e.dispatch=xb.bind(null,Je,e),[t.memoizedState,e]}function Qi(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function ug(){return cn().memoizedState}function uo(e,t,r,i){var o=Pn();Je.flags|=e,o.memoizedState=Qi(1|t,r,void 0,i===void 0?null:i)}function nl(e,t,r,i){var o=cn();i=i===void 0?null:i;var l=void 0;if(ut!==null){var d=ut.memoizedState;if(l=d.destroy,i!==null&&mu(i,d.deps)){o.memoizedState=Qi(t,r,l,i);return}}Je.flags|=e,o.memoizedState=Qi(1|t,r,l,i)}function Am(e,t){return uo(8390656,8,e,t)}function gu(e,t){return nl(2048,8,e,t)}function hg(e,t){return nl(4,2,e,t)}function mg(e,t){return nl(4,4,e,t)}function fg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pg(e,t,r){return r=r!=null?r.concat([e]):null,nl(4,4,fg.bind(null,t,e),r)}function xu(){}function gg(e,t){var r=cn();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&mu(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function xg(e,t){var r=cn();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&mu(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function yg(e,t,r){return Ks&21?(yn(r,t)||(r=jp(),Je.lanes|=r,Qs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zt=!0),e.memoizedState=r)}function pb(e,t){var r=Fe;Fe=r!==0&&4>r?r:4,e(!0);var i=gc.transition;gc.transition={};try{e(!1),t()}finally{Fe=r,gc.transition=i}}function vg(){return cn().memoizedState}function gb(e,t,r){var i=bs(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},bg(e))wg(t,r);else if(r=tg(e,t,r,i),r!==null){var o=Mt();xn(r,e,i,o),_g(r,t,i)}}function xb(e,t,r){var i=bs(e),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(bg(e))wg(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var d=t.lastRenderedState,h=l(d,r);if(o.hasEagerState=!0,o.eagerState=h,yn(h,d)){var m=t.interleaved;m===null?(o.next=o,lu(t)):(o.next=m.next,m.next=o),t.interleaved=o;return}}catch{}finally{}r=tg(e,t,o,i),r!==null&&(o=Mt(),xn(r,e,i,o),_g(r,t,i))}}function bg(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function wg(e,t){Ei=zo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function _g(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Gd(e,r)}}var Do={readContext:ln,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},yb={readContext:ln,useCallback:function(e,t){return Pn().memoizedState=[e,t===void 0?null:t],e},useContext:ln,useEffect:Am,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,uo(4194308,4,fg.bind(null,t,e),r)},useLayoutEffect:function(e,t){return uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return uo(4,2,e,t)},useMemo:function(e,t){var r=Pn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Pn();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=gb.bind(null,Je,e),[i.memoizedState,e]},useRef:function(e){var t=Pn();return e={current:e},t.memoizedState=e},useState:Om,useDebugValue:xu,useDeferredValue:function(e){return Pn().memoizedState=e},useTransition:function(){var e=Om(!1),t=e[0];return e=pb.bind(null,e[1]),Pn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Je,o=Pn();if(qe){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=t(),xt===null)throw Error(ne(349));Ks&30||ag(i,t,r)}o.memoizedState=r;var l={value:r,getSnapshot:t};return o.queue=l,Am(lg.bind(null,i,l,e),[e]),i.flags|=2048,Qi(9,og.bind(null,i,l,r,t),void 0,null),r},useId:function(){var e=Pn(),t=xt.identifierPrefix;if(qe){var r=Bn,i=Fn;r=(i&~(1<<32-gn(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Gi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=fb++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vb={readContext:ln,useCallback:gg,useContext:ln,useEffect:gu,useImperativeHandle:pg,useInsertionEffect:hg,useLayoutEffect:mg,useMemo:xg,useReducer:xc,useRef:ug,useState:function(){return xc(Ki)},useDebugValue:xu,useDeferredValue:function(e){var t=cn();return yg(t,ut.memoizedState,e)},useTransition:function(){var e=xc(Ki)[0],t=cn().memoizedState;return[e,t]},useMutableSource:rg,useSyncExternalStore:ig,useId:vg,unstable_isNewReconciler:!1},bb={readContext:ln,useCallback:gg,useContext:ln,useEffect:gu,useImperativeHandle:pg,useInsertionEffect:hg,useLayoutEffect:mg,useMemo:xg,useReducer:yc,useRef:ug,useState:function(){return yc(Ki)},useDebugValue:xu,useDeferredValue:function(e){var t=cn();return ut===null?t.memoizedState=e:yg(t,ut.memoizedState,e)},useTransition:function(){var e=yc(Ki)[0],t=cn().memoizedState;return[e,t]},useMutableSource:rg,useSyncExternalStore:ig,useId:vg,unstable_isNewReconciler:!1};function mn(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ld(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Xe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var sl={isMounted:function(e){return(e=e._reactInternals)?tr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Mt(),o=bs(e),l=Un(i,o);l.payload=t,r!=null&&(l.callback=r),t=ys(e,l,o),t!==null&&(xn(t,e,o,i),lo(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Mt(),o=bs(e),l=Un(i,o);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=ys(e,l,o),t!==null&&(xn(t,e,o,i),lo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Mt(),i=bs(e),o=Un(r,i);o.tag=2,t!=null&&(o.callback=t),t=ys(e,o,i),t!==null&&(xn(t,e,i,r),lo(t,e,i))}};function Im(e,t,r,i,o,l,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,d):t.prototype&&t.prototype.isPureReactComponent?!$i(r,i)||!$i(o,l):!0}function jg(e,t,r){var i=!1,o=Ns,l=t.contextType;return typeof l=="object"&&l!==null?l=ln(l):(o=Bt(t)?qs:Pt.current,i=t.contextTypes,l=(i=i!=null)?Or(e,o):Ns),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sl,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function zm(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&sl.enqueueReplaceState(t,t.state,null)}function cd(e,t,r,i){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},cu(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=ln(l):(l=Bt(t)?qs:Pt.current,o.context=Or(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ld(e,t,l,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&sl.enqueueReplaceState(o,o.state,null),Ao(e,r,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Dr(e,t){try{var r="",i=t;do r+=Gy(i),i=i.return;while(i);var o=r}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function vc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function dd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var wb=typeof WeakMap=="function"?WeakMap:Map;function Ng(e,t,r){r=Un(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Bo||(Bo=!0,bd=i),dd(e,t)},r}function Sg(e,t,r){r=Un(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;r.payload=function(){return i(o)},r.callback=function(){dd(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){dd(e,t),typeof i!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function Dm(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new wb;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(r)||(o.add(r),e=Ab.bind(null,e,t,r),t.then(e,e))}function Fm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Bm(e,t,r,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Un(-1,1),t.tag=2,ys(r,t,1))),r.lanes|=1),e)}var _b=Yn.ReactCurrentOwner,zt=!1;function Tt(e,t,r,i){t.child=e===null?eg(t,null,r,i):Ir(t,e.child,r,i)}function Um(e,t,r,i,o){r=r.render;var l=t.ref;return Tr(t,o),i=fu(e,t,r,i,l,o),r=pu(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qn(e,t,o)):(qe&&r&&nu(t),t.flags|=1,Tt(e,t,i,o),t.child)}function $m(e,t,r,i,o){if(e===null){var l=r.type;return typeof l=="function"&&!Su(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,kg(e,t,l,i,o)):(e=po(r.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var d=l.memoizedProps;if(r=r.compare,r=r!==null?r:$i,r(d,i)&&e.ref===t.ref)return qn(e,t,o)}return t.flags|=1,e=ws(l,i),e.ref=t.ref,e.return=t,t.child=e}function kg(e,t,r,i,o){if(e!==null){var l=e.memoizedProps;if($i(l,i)&&e.ref===t.ref)if(zt=!1,t.pendingProps=i=l,(e.lanes&o)!==0)e.flags&131072&&(zt=!0);else return t.lanes=e.lanes,qn(e,t,o)}return ud(e,t,r,i,o)}function Cg(e,t,r){var i=t.pendingProps,o=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(kr,Ht),Ht|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(kr,Ht),Ht|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:r,$e(kr,Ht),Ht|=i}else l!==null?(i=l.baseLanes|r,t.memoizedState=null):i=r,$e(kr,Ht),Ht|=i;return Tt(e,t,o,r),t.child}function Pg(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ud(e,t,r,i,o){var l=Bt(r)?qs:Pt.current;return l=Or(t,l),Tr(t,o),r=fu(e,t,r,i,l,o),i=pu(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qn(e,t,o)):(qe&&i&&nu(t),t.flags|=1,Tt(e,t,r,o),t.child)}function Zm(e,t,r,i,o){if(Bt(r)){var l=!0;Lo(t)}else l=!1;if(Tr(t,o),t.stateNode===null)ho(e,t),jg(t,r,i),cd(t,r,i,o),i=!0;else if(e===null){var d=t.stateNode,h=t.memoizedProps;d.props=h;var m=d.context,p=r.contextType;typeof p=="object"&&p!==null?p=ln(p):(p=Bt(r)?qs:Pt.current,p=Or(t,p));var b=r.getDerivedStateFromProps,g=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function";g||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==i||m!==p)&&zm(t,d,i,p),as=!1;var S=t.memoizedState;d.state=S,Ao(t,i,d,o),m=t.memoizedState,h!==i||S!==m||Ft.current||as?(typeof b=="function"&&(ld(t,r,b,i),m=t.memoizedState),(h=as||Im(t,r,h,i,S,m,p))?(g||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=m),d.props=i,d.state=m,d.context=p,i=h):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{d=t.stateNode,ng(e,t),h=t.memoizedProps,p=t.type===t.elementType?h:mn(t.type,h),d.props=p,g=t.pendingProps,S=d.context,m=r.contextType,typeof m=="object"&&m!==null?m=ln(m):(m=Bt(r)?qs:Pt.current,m=Or(t,m));var w=r.getDerivedStateFromProps;(b=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==g||S!==m)&&zm(t,d,i,m),as=!1,S=t.memoizedState,d.state=S,Ao(t,i,d,o);var N=t.memoizedState;h!==g||S!==N||Ft.current||as?(typeof w=="function"&&(ld(t,r,w,i),N=t.memoizedState),(p=as||Im(t,r,p,i,S,N,m)||!1)?(b||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(i,N,m),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(i,N,m)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=N),d.props=i,d.state=N,d.context=m,i=p):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),i=!1)}return hd(e,t,r,i,l,o)}function hd(e,t,r,i,o,l){Pg(e,t);var d=(t.flags&128)!==0;if(!i&&!d)return o&&Pm(t,r,!1),qn(e,t,l);i=t.stateNode,_b.current=t;var h=d&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&d?(t.child=Ir(t,e.child,null,l),t.child=Ir(t,null,h,l)):Tt(e,t,h,l),t.memoizedState=i.state,o&&Pm(t,r,!0),t.child}function Eg(e){var t=e.stateNode;t.pendingContext?Cm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cm(e,t.context,!1),du(e,t.containerInfo)}function Hm(e,t,r,i,o){return Ar(),ru(o),t.flags|=256,Tt(e,t,r,i),t.child}var md={dehydrated:null,treeContext:null,retryLane:0};function fd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lg(e,t,r){var i=t.pendingProps,o=Ye.current,l=!1,d=(t.flags&128)!==0,h;if((h=d)||(h=e!==null&&e.memoizedState===null?!1:(o&2)!==0),h?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),$e(Ye,o&1),e===null)return ad(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=i.children,e=i.fallback,l?(i=t.mode,l=t.child,d={mode:"hidden",children:d},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=d):l=al(d,i,0,null),e=Ws(e,i,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=fd(r),t.memoizedState=md,e):yu(t,d));if(o=e.memoizedState,o!==null&&(h=o.dehydrated,h!==null))return jb(e,t,d,i,h,o,r);if(l){l=i.fallback,d=t.mode,o=e.child,h=o.sibling;var m={mode:"hidden",children:i.children};return!(d&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=m,t.deletions=null):(i=ws(o,m),i.subtreeFlags=o.subtreeFlags&14680064),h!==null?l=ws(h,l):(l=Ws(l,d,r,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,i=l,l=t.child,d=e.child.memoizedState,d=d===null?fd(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=e.childLanes&~r,t.memoizedState=md,i}return l=e.child,e=l.sibling,i=ws(l,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function yu(e,t){return t=al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ga(e,t,r,i){return i!==null&&ru(i),Ir(t,e.child,null,r),e=yu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jb(e,t,r,i,o,l,d){if(r)return t.flags&256?(t.flags&=-257,i=vc(Error(ne(422))),Ga(e,t,d,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=i.fallback,o=t.mode,i=al({mode:"visible",children:i.children},o,0,null),l=Ws(l,o,d,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,t.mode&1&&Ir(t,e.child,null,d),t.child.memoizedState=fd(d),t.memoizedState=md,l);if(!(t.mode&1))return Ga(e,t,d,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var h=i.dgst;return i=h,l=Error(ne(419)),i=vc(l,i,void 0),Ga(e,t,d,i)}if(h=(d&e.childLanes)!==0,zt||h){if(i=xt,i!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|d)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Vn(e,o),xn(i,e,o,-1))}return Nu(),i=vc(Error(ne(421))),Ga(e,t,d,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Ib.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Wt=xs(o.nextSibling),Vt=t,qe=!0,pn=null,e!==null&&(nn[sn++]=Fn,nn[sn++]=Bn,nn[sn++]=Gs,Fn=e.id,Bn=e.overflow,Gs=t),t=yu(t,i.children),t.flags|=4096,t)}function Wm(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),od(e.return,t,r)}function bc(e,t,r,i,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=r,l.tailMode=o)}function Tg(e,t,r){var i=t.pendingProps,o=i.revealOrder,l=i.tail;if(Tt(e,t,i.children,r),i=Ye.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wm(e,r,t);else if(e.tag===19)Wm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if($e(Ye,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&Io(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),bc(t,!1,o,r,l);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Io(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}bc(t,!0,r,null,l);break;case"together":bc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ho(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Qs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,r=ws(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ws(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Nb(e,t,r){switch(t.tag){case 3:Eg(t),Ar();break;case 5:sg(t);break;case 1:Bt(t.type)&&Lo(t);break;case 4:du(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;$e(Ro,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?($e(Ye,Ye.current&1),t.flags|=128,null):r&t.child.childLanes?Lg(e,t,r):($e(Ye,Ye.current&1),e=qn(e,t,r),e!==null?e.sibling:null);$e(Ye,Ye.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return Tg(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),$e(Ye,Ye.current),i)break;return null;case 22:case 23:return t.lanes=0,Cg(e,t,r)}return qn(e,t,r)}var Mg,pd,Rg,Og;Mg=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pd=function(){};Rg=function(e,t,r,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,$s(Tn.current);var l=null;switch(r){case"input":o=zc(e,o),i=zc(e,i),l=[];break;case"select":o=Xe({},o,{value:void 0}),i=Xe({},i,{value:void 0}),l=[];break;case"textarea":o=Bc(e,o),i=Bc(e,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Po)}$c(r,i);var d;r=null;for(p in o)if(!i.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var h=o[p];for(d in h)h.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Ai.hasOwnProperty(p)?l||(l=[]):(l=l||[]).push(p,null));for(p in i){var m=i[p];if(h=o!=null?o[p]:void 0,i.hasOwnProperty(p)&&m!==h&&(m!=null||h!=null))if(p==="style")if(h){for(d in h)!h.hasOwnProperty(d)||m&&m.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in m)m.hasOwnProperty(d)&&h[d]!==m[d]&&(r||(r={}),r[d]=m[d])}else r||(l||(l=[]),l.push(p,r)),r=m;else p==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(l=l||[]).push(p,m)):p==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(p,""+m):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(p)?(m!=null&&p==="onScroll"&&Ze("scroll",e),l||h===m||(l=[])):(l=l||[]).push(p,m))}r&&(l=l||[]).push("style",r);var p=l;(t.updateQueue=p)&&(t.flags|=4)}};Og=function(e,t,r,i){r!==i&&(t.flags|=4)};function gi(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Sb(e,t,r){var i=t.pendingProps;switch(su(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return Bt(t.type)&&Eo(),St(t),null;case 3:return i=t.stateNode,zr(),Ve(Ft),Ve(Pt),hu(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Va(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pn!==null&&(jd(pn),pn=null))),pd(e,t),St(t),null;case 5:uu(t);var o=$s(qi.current);if(r=t.type,e!==null&&t.stateNode!=null)Rg(e,t,r,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(ne(166));return St(t),null}if(e=$s(Tn.current),Va(t)){i=t.stateNode,r=t.type;var l=t.memoizedProps;switch(i[En]=t,i[Wi]=l,e=(t.mode&1)!==0,r){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(o=0;o<_i.length;o++)Ze(_i[o],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":em(i,l),Ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Ze("invalid",i);break;case"textarea":nm(i,l),Ze("invalid",i)}$c(r,l),o=null;for(var d in l)if(l.hasOwnProperty(d)){var h=l[d];d==="children"?typeof h=="string"?i.textContent!==h&&(l.suppressHydrationWarning!==!0&&Wa(i.textContent,h,e),o=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(l.suppressHydrationWarning!==!0&&Wa(i.textContent,h,e),o=["children",""+h]):Ai.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&Ze("scroll",i)}switch(r){case"input":za(i),tm(i,l,!0);break;case"textarea":za(i),sm(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Po)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=d.createElement(r,{is:i.is}):(e=d.createElement(r),r==="select"&&(d=e,i.multiple?d.multiple=!0:i.size&&(d.size=i.size))):e=d.createElementNS(e,r),e[En]=t,e[Wi]=i,Mg(e,t,!1,!1),t.stateNode=e;e:{switch(d=Zc(r,i),r){case"dialog":Ze("cancel",e),Ze("close",e),o=i;break;case"iframe":case"object":case"embed":Ze("load",e),o=i;break;case"video":case"audio":for(o=0;o<_i.length;o++)Ze(_i[o],e);o=i;break;case"source":Ze("error",e),o=i;break;case"img":case"image":case"link":Ze("error",e),Ze("load",e),o=i;break;case"details":Ze("toggle",e),o=i;break;case"input":em(e,i),o=zc(e,i),Ze("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=Xe({},i,{value:void 0}),Ze("invalid",e);break;case"textarea":nm(e,i),o=Bc(e,i),Ze("invalid",e);break;default:o=i}$c(r,o),h=o;for(l in h)if(h.hasOwnProperty(l)){var m=h[l];l==="style"?up(e,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&cp(e,m)):l==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&Ii(e,m):typeof m=="number"&&Ii(e,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ai.hasOwnProperty(l)?m!=null&&l==="onScroll"&&Ze("scroll",e):m!=null&&$d(e,l,m,d))}switch(r){case"input":za(e),tm(e,i,!1);break;case"textarea":za(e),sm(e);break;case"option":i.value!=null&&e.setAttribute("value",""+js(i.value));break;case"select":e.multiple=!!i.multiple,l=i.value,l!=null?Cr(e,!!i.multiple,l,!1):i.defaultValue!=null&&Cr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Po)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)Og(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ne(166));if(r=$s(qi.current),$s(Tn.current),Va(t)){if(i=t.stateNode,r=t.memoizedProps,i[En]=t,(l=i.nodeValue!==r)&&(e=Vt,e!==null))switch(e.tag){case 3:Wa(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wa(i.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[En]=t,t.stateNode=i}return St(t),null;case 13:if(Ve(Ye),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Wt!==null&&t.mode&1&&!(t.flags&128))Jp(),Ar(),t.flags|=98560,l=!1;else if(l=Va(t),i!==null&&i.dehydrated!==null){if(e===null){if(!l)throw Error(ne(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ne(317));l[En]=t}else Ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),l=!1}else pn!==null&&(jd(pn),pn=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?mt===0&&(mt=3):Nu())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return zr(),pd(e,t),e===null&&Zi(t.stateNode.containerInfo),St(t),null;case 10:return ou(t.type._context),St(t),null;case 17:return Bt(t.type)&&Eo(),St(t),null;case 19:if(Ve(Ye),l=t.memoizedState,l===null)return St(t),null;if(i=(t.flags&128)!==0,d=l.rendering,d===null)if(i)gi(l,!1);else{if(mt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Io(e),d!==null){for(t.flags|=128,gi(l,!1),i=d.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)l=r,e=i,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,e=d.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $e(Ye,Ye.current&1|2),t.child}e=e.sibling}l.tail!==null&&nt()>Fr&&(t.flags|=128,i=!0,gi(l,!1),t.lanes=4194304)}else{if(!i)if(e=Io(d),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),gi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!qe)return St(t),null}else 2*nt()-l.renderingStartTime>Fr&&r!==1073741824&&(t.flags|=128,i=!0,gi(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(r=l.last,r!==null?r.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,r=Ye.current,$e(Ye,i?r&1|2:r&1),t):(St(t),null);case 22:case 23:return ju(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ht&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function kb(e,t){switch(su(t),t.tag){case 1:return Bt(t.type)&&Eo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zr(),Ve(Ft),Ve(Pt),hu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uu(t),null;case 13:if(Ve(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));Ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(Ye),null;case 4:return zr(),null;case 10:return ou(t.type._context),null;case 22:case 23:return ju(),null;case 24:return null;default:return null}}var Ka=!1,kt=!1,Cb=typeof WeakSet=="function"?WeakSet:Set,me=null;function Sr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){et(e,t,i)}else r.current=null}function gd(e,t,r){try{r()}catch(i){et(e,t,i)}}var Vm=!1;function Pb(e,t){if(Xc=So,e=Fp(),tu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var d=0,h=-1,m=-1,p=0,b=0,g=e,S=null;t:for(;;){for(var w;g!==r||o!==0&&g.nodeType!==3||(h=d+o),g!==l||i!==0&&g.nodeType!==3||(m=d+i),g.nodeType===3&&(d+=g.nodeValue.length),(w=g.firstChild)!==null;)S=g,g=w;for(;;){if(g===e)break t;if(S===r&&++p===o&&(h=d),S===l&&++b===i&&(m=d),(w=g.nextSibling)!==null)break;g=S,S=g.parentNode}g=w}r=h===-1||m===-1?null:{start:h,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(ed={focusedElem:e,selectionRange:r},So=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var y=N.memoizedProps,C=N.memoizedState,_=t.stateNode,x=_.getSnapshotBeforeUpdate(t.elementType===t.type?y:mn(t.type,y),C);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(E){et(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return N=Vm,Vm=!1,N}function Li(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&gd(t,r,l)}o=o.next}while(o!==i)}}function rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function xd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Ag(e){var t=e.alternate;t!==null&&(e.alternate=null,Ag(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[En],delete t[Wi],delete t[sd],delete t[db],delete t[ub])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ig(e){return e.tag===5||e.tag===3||e.tag===4}function qm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ig(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yd(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Po));else if(i!==4&&(e=e.child,e!==null))for(yd(e,t,r),e=e.sibling;e!==null;)yd(e,t,r),e=e.sibling}function vd(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(vd(e,t,r),e=e.sibling;e!==null;)vd(e,t,r),e=e.sibling}var bt=null,fn=!1;function ts(e,t,r){for(r=r.child;r!==null;)zg(e,t,r),r=r.sibling}function zg(e,t,r){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Qo,r)}catch{}switch(r.tag){case 5:kt||Sr(r,t);case 6:var i=bt,o=fn;bt=null,ts(e,t,r),bt=i,fn=o,bt!==null&&(fn?(e=bt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):bt.removeChild(r.stateNode));break;case 18:bt!==null&&(fn?(e=bt,r=r.stateNode,e.nodeType===8?mc(e.parentNode,r):e.nodeType===1&&mc(e,r),Bi(e)):mc(bt,r.stateNode));break;case 4:i=bt,o=fn,bt=r.stateNode.containerInfo,fn=!0,ts(e,t,r),bt=i,fn=o;break;case 0:case 11:case 14:case 15:if(!kt&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,d=l.destroy;l=l.tag,d!==void 0&&(l&2||l&4)&&gd(r,t,d),o=o.next}while(o!==i)}ts(e,t,r);break;case 1:if(!kt&&(Sr(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(h){et(r,t,h)}ts(e,t,r);break;case 21:ts(e,t,r);break;case 22:r.mode&1?(kt=(i=kt)||r.memoizedState!==null,ts(e,t,r),kt=i):ts(e,t,r);break;default:ts(e,t,r)}}function Gm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Cb),t.forEach(function(i){var o=zb.bind(null,e,i);r.has(i)||(r.add(i),i.then(o,o))})}}function hn(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var l=e,d=t,h=d;e:for(;h!==null;){switch(h.tag){case 5:bt=h.stateNode,fn=!1;break e;case 3:bt=h.stateNode.containerInfo,fn=!0;break e;case 4:bt=h.stateNode.containerInfo,fn=!0;break e}h=h.return}if(bt===null)throw Error(ne(160));zg(l,d,o),bt=null,fn=!1;var m=o.alternate;m!==null&&(m.return=null),o.return=null}catch(p){et(o,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dg(t,e),t=t.sibling}function Dg(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hn(t,e),Cn(e),i&4){try{Li(3,e,e.return),rl(3,e)}catch(y){et(e,e.return,y)}try{Li(5,e,e.return)}catch(y){et(e,e.return,y)}}break;case 1:hn(t,e),Cn(e),i&512&&r!==null&&Sr(r,r.return);break;case 5:if(hn(t,e),Cn(e),i&512&&r!==null&&Sr(r,r.return),e.flags&32){var o=e.stateNode;try{Ii(o,"")}catch(y){et(e,e.return,y)}}if(i&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,d=r!==null?r.memoizedProps:l,h=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{h==="input"&&l.type==="radio"&&l.name!=null&&ap(o,l),Zc(h,d);var p=Zc(h,l);for(d=0;d<m.length;d+=2){var b=m[d],g=m[d+1];b==="style"?up(o,g):b==="dangerouslySetInnerHTML"?cp(o,g):b==="children"?Ii(o,g):$d(o,b,g,p)}switch(h){case"input":Dc(o,l);break;case"textarea":op(o,l);break;case"select":var S=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var w=l.value;w!=null?Cr(o,!!l.multiple,w,!1):S!==!!l.multiple&&(l.defaultValue!=null?Cr(o,!!l.multiple,l.defaultValue,!0):Cr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Wi]=l}catch(y){et(e,e.return,y)}}break;case 6:if(hn(t,e),Cn(e),i&4){if(e.stateNode===null)throw Error(ne(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(y){et(e,e.return,y)}}break;case 3:if(hn(t,e),Cn(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Bi(t.containerInfo)}catch(y){et(e,e.return,y)}break;case 4:hn(t,e),Cn(e);break;case 13:hn(t,e),Cn(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(wu=nt())),i&4&&Gm(e);break;case 22:if(b=r!==null&&r.memoizedState!==null,e.mode&1?(kt=(p=kt)||b,hn(t,e),kt=p):hn(t,e),Cn(e),i&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!b&&e.mode&1)for(me=e,b=e.child;b!==null;){for(g=me=b;me!==null;){switch(S=me,w=S.child,S.tag){case 0:case 11:case 14:case 15:Li(4,S,S.return);break;case 1:Sr(S,S.return);var N=S.stateNode;if(typeof N.componentWillUnmount=="function"){i=S,r=S.return;try{t=i,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(y){et(i,r,y)}}break;case 5:Sr(S,S.return);break;case 22:if(S.memoizedState!==null){Qm(g);continue}}w!==null?(w.return=S,me=w):Qm(g)}b=b.sibling}e:for(b=null,g=e;;){if(g.tag===5){if(b===null){b=g;try{o=g.stateNode,p?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(h=g.stateNode,m=g.memoizedProps.style,d=m!=null&&m.hasOwnProperty("display")?m.display:null,h.style.display=dp("display",d))}catch(y){et(e,e.return,y)}}}else if(g.tag===6){if(b===null)try{g.stateNode.nodeValue=p?"":g.memoizedProps}catch(y){et(e,e.return,y)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;b===g&&(b=null),g=g.return}b===g&&(b=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:hn(t,e),Cn(e),i&4&&Gm(e);break;case 21:break;default:hn(t,e),Cn(e)}}function Cn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ig(r)){var i=r;break e}r=r.return}throw Error(ne(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Ii(o,""),i.flags&=-33);var l=qm(e);vd(e,l,o);break;case 3:case 4:var d=i.stateNode.containerInfo,h=qm(e);yd(e,h,d);break;default:throw Error(ne(161))}}catch(m){et(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Eb(e,t,r){me=e,Fg(e)}function Fg(e,t,r){for(var i=(e.mode&1)!==0;me!==null;){var o=me,l=o.child;if(o.tag===22&&i){var d=o.memoizedState!==null||Ka;if(!d){var h=o.alternate,m=h!==null&&h.memoizedState!==null||kt;h=Ka;var p=kt;if(Ka=d,(kt=m)&&!p)for(me=o;me!==null;)d=me,m=d.child,d.tag===22&&d.memoizedState!==null?Ym(o):m!==null?(m.return=d,me=m):Ym(o);for(;l!==null;)me=l,Fg(l),l=l.sibling;me=o,Ka=h,kt=p}Km(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,me=l):Km(e)}}function Km(e){for(;me!==null;){var t=me;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:kt||rl(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!kt)if(r===null)i.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:mn(t.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Rm(t,l,i);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Rm(t,d,r)}break;case 5:var h=t.stateNode;if(r===null&&t.flags&4){r=h;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var b=p.memoizedState;if(b!==null){var g=b.dehydrated;g!==null&&Bi(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}kt||t.flags&512&&xd(t)}catch(S){et(t,t.return,S)}}if(t===e){me=null;break}if(r=t.sibling,r!==null){r.return=t.return,me=r;break}me=t.return}}function Qm(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var r=t.sibling;if(r!==null){r.return=t.return,me=r;break}me=t.return}}function Ym(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{rl(4,t)}catch(m){et(t,r,m)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(m){et(t,o,m)}}var l=t.return;try{xd(t)}catch(m){et(t,l,m)}break;case 5:var d=t.return;try{xd(t)}catch(m){et(t,d,m)}}}catch(m){et(t,t.return,m)}if(t===e){me=null;break}var h=t.sibling;if(h!==null){h.return=t.return,me=h;break}me=t.return}}var Lb=Math.ceil,Fo=Yn.ReactCurrentDispatcher,vu=Yn.ReactCurrentOwner,an=Yn.ReactCurrentBatchConfig,Oe=0,xt=null,ct=null,_t=0,Ht=0,kr=Cs(0),mt=0,Yi=null,Qs=0,il=0,bu=0,Ti=null,It=null,wu=0,Fr=1/0,zn=null,Bo=!1,bd=null,vs=null,Qa=!1,ds=null,Uo=0,Mi=0,wd=null,mo=-1,fo=0;function Mt(){return Oe&6?nt():mo!==-1?mo:mo=nt()}function bs(e){return e.mode&1?Oe&2&&_t!==0?_t&-_t:mb.transition!==null?(fo===0&&(fo=jp()),fo):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:Lp(e.type)),e):1}function xn(e,t,r,i){if(50<Mi)throw Mi=0,wd=null,Error(ne(185));ia(e,r,i),(!(Oe&2)||e!==xt)&&(e===xt&&(!(Oe&2)&&(il|=r),mt===4&&ls(e,_t)),Ut(e,i),r===1&&Oe===0&&!(t.mode&1)&&(Fr=nt()+500,tl&&Ps()))}function Ut(e,t){var r=e.callbackNode;mv(e,t);var i=No(e,e===xt?_t:0);if(i===0)r!==null&&am(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&am(r),t===1)e.tag===0?hb(Jm.bind(null,e)):Kp(Jm.bind(null,e)),lb(function(){!(Oe&6)&&Ps()}),r=null;else{switch(Np(i)){case 1:r=qd;break;case 4:r=wp;break;case 16:r=jo;break;case 536870912:r=_p;break;default:r=jo}r=qg(r,Bg.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Bg(e,t){if(mo=-1,fo=0,Oe&6)throw Error(ne(327));var r=e.callbackNode;if(Mr()&&e.callbackNode!==r)return null;var i=No(e,e===xt?_t:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=$o(e,i);else{t=i;var o=Oe;Oe|=2;var l=$g();(xt!==e||_t!==t)&&(zn=null,Fr=nt()+500,Hs(e,t));do try{Rb();break}catch(h){Ug(e,h)}while(!0);au(),Fo.current=l,Oe=o,ct!==null?t=0:(xt=null,_t=0,t=mt)}if(t!==0){if(t===2&&(o=Gc(e),o!==0&&(i=o,t=_d(e,o))),t===1)throw r=Yi,Hs(e,0),ls(e,i),Ut(e,nt()),r;if(t===6)ls(e,i);else{if(o=e.current.alternate,!(i&30)&&!Tb(o)&&(t=$o(e,i),t===2&&(l=Gc(e),l!==0&&(i=l,t=_d(e,l))),t===1))throw r=Yi,Hs(e,0),ls(e,i),Ut(e,nt()),r;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(ne(345));case 2:Ds(e,It,zn);break;case 3:if(ls(e,i),(i&130023424)===i&&(t=wu+500-nt(),10<t)){if(No(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){Mt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=nd(Ds.bind(null,e,It,zn),t);break}Ds(e,It,zn);break;case 4:if(ls(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var d=31-gn(i);l=1<<d,d=t[d],d>o&&(o=d),i&=~l}if(i=o,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Lb(i/1960))-i,10<i){e.timeoutHandle=nd(Ds.bind(null,e,It,zn),i);break}Ds(e,It,zn);break;case 5:Ds(e,It,zn);break;default:throw Error(ne(329))}}}return Ut(e,nt()),e.callbackNode===r?Bg.bind(null,e):null}function _d(e,t){var r=Ti;return e.current.memoizedState.isDehydrated&&(Hs(e,t).flags|=256),e=$o(e,t),e!==2&&(t=It,It=r,t!==null&&jd(t)),e}function jd(e){It===null?It=e:It.push.apply(It,e)}function Tb(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],l=o.getSnapshot;o=o.value;try{if(!yn(l(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ls(e,t){for(t&=~bu,t&=~il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-gn(t),i=1<<r;e[r]=-1,t&=~i}}function Jm(e){if(Oe&6)throw Error(ne(327));Mr();var t=No(e,0);if(!(t&1))return Ut(e,nt()),null;var r=$o(e,t);if(e.tag!==0&&r===2){var i=Gc(e);i!==0&&(t=i,r=_d(e,i))}if(r===1)throw r=Yi,Hs(e,0),ls(e,t),Ut(e,nt()),r;if(r===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ds(e,It,zn),Ut(e,nt()),null}function _u(e,t){var r=Oe;Oe|=1;try{return e(t)}finally{Oe=r,Oe===0&&(Fr=nt()+500,tl&&Ps())}}function Ys(e){ds!==null&&ds.tag===0&&!(Oe&6)&&Mr();var t=Oe;Oe|=1;var r=an.transition,i=Fe;try{if(an.transition=null,Fe=1,e)return e()}finally{Fe=i,an.transition=r,Oe=t,!(Oe&6)&&Ps()}}function ju(){Ht=kr.current,Ve(kr)}function Hs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ob(r)),ct!==null)for(r=ct.return;r!==null;){var i=r;switch(su(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Eo();break;case 3:zr(),Ve(Ft),Ve(Pt),hu();break;case 5:uu(i);break;case 4:zr();break;case 13:Ve(Ye);break;case 19:Ve(Ye);break;case 10:ou(i.type._context);break;case 22:case 23:ju()}r=r.return}if(xt=e,ct=e=ws(e.current,null),_t=Ht=t,mt=0,Yi=null,bu=il=Qs=0,It=Ti=null,Us!==null){for(t=0;t<Us.length;t++)if(r=Us[t],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,l=r.pending;if(l!==null){var d=l.next;l.next=o,i.next=d}r.pending=i}Us=null}return e}function Ug(e,t){do{var r=ct;try{if(au(),co.current=Do,zo){for(var i=Je.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}zo=!1}if(Ks=0,pt=ut=Je=null,Ei=!1,Gi=0,vu.current=null,r===null||r.return===null){mt=1,Yi=t,ct=null;break}e:{var l=e,d=r.return,h=r,m=t;if(t=_t,h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var p=m,b=h,g=b.tag;if(!(b.mode&1)&&(g===0||g===11||g===15)){var S=b.alternate;S?(b.updateQueue=S.updateQueue,b.memoizedState=S.memoizedState,b.lanes=S.lanes):(b.updateQueue=null,b.memoizedState=null)}var w=Fm(d);if(w!==null){w.flags&=-257,Bm(w,d,h,l,t),w.mode&1&&Dm(l,p,t),t=w,m=p;var N=t.updateQueue;if(N===null){var y=new Set;y.add(m),t.updateQueue=y}else N.add(m);break e}else{if(!(t&1)){Dm(l,p,t),Nu();break e}m=Error(ne(426))}}else if(qe&&h.mode&1){var C=Fm(d);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Bm(C,d,h,l,t),ru(Dr(m,h));break e}}l=m=Dr(m,h),mt!==4&&(mt=2),Ti===null?Ti=[l]:Ti.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var _=Ng(l,m,t);Mm(l,_);break e;case 1:h=m;var x=l.type,k=l.stateNode;if(!(l.flags&128)&&(typeof x.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(vs===null||!vs.has(k)))){l.flags|=65536,t&=-t,l.lanes|=t;var E=Sg(l,h,t);Mm(l,E);break e}}l=l.return}while(l!==null)}Hg(r)}catch(A){t=A,ct===r&&r!==null&&(ct=r=r.return);continue}break}while(!0)}function $g(){var e=Fo.current;return Fo.current=Do,e===null?Do:e}function Nu(){(mt===0||mt===3||mt===2)&&(mt=4),xt===null||!(Qs&268435455)&&!(il&268435455)||ls(xt,_t)}function $o(e,t){var r=Oe;Oe|=2;var i=$g();(xt!==e||_t!==t)&&(zn=null,Hs(e,t));do try{Mb();break}catch(o){Ug(e,o)}while(!0);if(au(),Oe=r,Fo.current=i,ct!==null)throw Error(ne(261));return xt=null,_t=0,mt}function Mb(){for(;ct!==null;)Zg(ct)}function Rb(){for(;ct!==null&&!rv();)Zg(ct)}function Zg(e){var t=Vg(e.alternate,e,Ht);e.memoizedProps=e.pendingProps,t===null?Hg(e):ct=t,vu.current=null}function Hg(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kb(r,t),r!==null){r.flags&=32767,ct=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mt=6,ct=null;return}}else if(r=Sb(r,t,Ht),r!==null){ct=r;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);mt===0&&(mt=5)}function Ds(e,t,r){var i=Fe,o=an.transition;try{an.transition=null,Fe=1,Ob(e,t,r,i)}finally{an.transition=o,Fe=i}return null}function Ob(e,t,r,i){do Mr();while(ds!==null);if(Oe&6)throw Error(ne(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(fv(e,l),e===xt&&(ct=xt=null,_t=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Qa||(Qa=!0,qg(jo,function(){return Mr(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=an.transition,an.transition=null;var d=Fe;Fe=1;var h=Oe;Oe|=4,vu.current=null,Pb(e,r),Dg(r,e),eb(ed),So=!!Xc,ed=Xc=null,e.current=r,Eb(r),iv(),Oe=h,Fe=d,an.transition=l}else e.current=r;if(Qa&&(Qa=!1,ds=e,Uo=o),l=e.pendingLanes,l===0&&(vs=null),lv(r.stateNode),Ut(e,nt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(Bo)throw Bo=!1,e=bd,bd=null,e;return Uo&1&&e.tag!==0&&Mr(),l=e.pendingLanes,l&1?e===wd?Mi++:(Mi=0,wd=e):Mi=0,Ps(),null}function Mr(){if(ds!==null){var e=Np(Uo),t=an.transition,r=Fe;try{if(an.transition=null,Fe=16>e?16:e,ds===null)var i=!1;else{if(e=ds,ds=null,Uo=0,Oe&6)throw Error(ne(331));var o=Oe;for(Oe|=4,me=e.current;me!==null;){var l=me,d=l.child;if(me.flags&16){var h=l.deletions;if(h!==null){for(var m=0;m<h.length;m++){var p=h[m];for(me=p;me!==null;){var b=me;switch(b.tag){case 0:case 11:case 15:Li(8,b,l)}var g=b.child;if(g!==null)g.return=b,me=g;else for(;me!==null;){b=me;var S=b.sibling,w=b.return;if(Ag(b),b===p){me=null;break}if(S!==null){S.return=w,me=S;break}me=w}}}var N=l.alternate;if(N!==null){var y=N.child;if(y!==null){N.child=null;do{var C=y.sibling;y.sibling=null,y=C}while(y!==null)}}me=l}}if(l.subtreeFlags&2064&&d!==null)d.return=l,me=d;else e:for(;me!==null;){if(l=me,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Li(9,l,l.return)}var _=l.sibling;if(_!==null){_.return=l.return,me=_;break e}me=l.return}}var x=e.current;for(me=x;me!==null;){d=me;var k=d.child;if(d.subtreeFlags&2064&&k!==null)k.return=d,me=k;else e:for(d=x;me!==null;){if(h=me,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:rl(9,h)}}catch(A){et(h,h.return,A)}if(h===d){me=null;break e}var E=h.sibling;if(E!==null){E.return=h.return,me=E;break e}me=h.return}}if(Oe=o,Ps(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Qo,e)}catch{}i=!0}return i}finally{Fe=r,an.transition=t}}return!1}function Xm(e,t,r){t=Dr(r,t),t=Ng(e,t,1),e=ys(e,t,1),t=Mt(),e!==null&&(ia(e,1,t),Ut(e,t))}function et(e,t,r){if(e.tag===3)Xm(e,e,r);else for(;t!==null;){if(t.tag===3){Xm(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vs===null||!vs.has(i))){e=Dr(r,e),e=Sg(t,e,1),t=ys(t,e,1),e=Mt(),t!==null&&(ia(t,1,e),Ut(t,e));break}}t=t.return}}function Ab(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Mt(),e.pingedLanes|=e.suspendedLanes&r,xt===e&&(_t&r)===r&&(mt===4||mt===3&&(_t&130023424)===_t&&500>nt()-wu?Hs(e,0):bu|=r),Ut(e,t)}function Wg(e,t){t===0&&(e.mode&1?(t=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):t=1);var r=Mt();e=Vn(e,t),e!==null&&(ia(e,t,r),Ut(e,r))}function Ib(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Wg(e,r)}function zb(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ne(314))}i!==null&&i.delete(t),Wg(e,r)}var Vg;Vg=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ft.current)zt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return zt=!1,Nb(e,t,r);zt=!!(e.flags&131072)}else zt=!1,qe&&t.flags&1048576&&Qp(t,Mo,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ho(e,t),e=t.pendingProps;var o=Or(t,Pt.current);Tr(t,r),o=fu(null,t,i,e,o,r);var l=pu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(i)?(l=!0,Lo(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,cu(t),o.updater=sl,t.stateNode=o,o._reactInternals=t,cd(t,i,e,r),t=hd(null,t,i,!0,l,r)):(t.tag=0,qe&&l&&nu(t),Tt(null,t,o,r),t=t.child),t;case 16:i=t.elementType;e:{switch(ho(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=Fb(i),e=mn(i,e),o){case 0:t=ud(null,t,i,e,r);break e;case 1:t=Zm(null,t,i,e,r);break e;case 11:t=Um(null,t,i,e,r);break e;case 14:t=$m(null,t,i,mn(i.type,e),r);break e}throw Error(ne(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:mn(i,o),ud(e,t,i,o,r);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:mn(i,o),Zm(e,t,i,o,r);case 3:e:{if(Eg(t),e===null)throw Error(ne(387));i=t.pendingProps,l=t.memoizedState,o=l.element,ng(e,t),Ao(t,i,null,r);var d=t.memoizedState;if(i=d.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Dr(Error(ne(423)),t),t=Hm(e,t,i,r,o);break e}else if(i!==o){o=Dr(Error(ne(424)),t),t=Hm(e,t,i,r,o);break e}else for(Wt=xs(t.stateNode.containerInfo.firstChild),Vt=t,qe=!0,pn=null,r=eg(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ar(),i===o){t=qn(e,t,r);break e}Tt(e,t,i,r)}t=t.child}return t;case 5:return sg(t),e===null&&ad(t),i=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,d=o.children,td(i,o)?d=null:l!==null&&td(i,l)&&(t.flags|=32),Pg(e,t),Tt(e,t,d,r),t.child;case 6:return e===null&&ad(t),null;case 13:return Lg(e,t,r);case 4:return du(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ir(t,null,i,r):Tt(e,t,i,r),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:mn(i,o),Um(e,t,i,o,r);case 7:return Tt(e,t,t.pendingProps,r),t.child;case 8:return Tt(e,t,t.pendingProps.children,r),t.child;case 12:return Tt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,l=t.memoizedProps,d=o.value,$e(Ro,i._currentValue),i._currentValue=d,l!==null)if(yn(l.value,d)){if(l.children===o.children&&!Ft.current){t=qn(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var h=l.dependencies;if(h!==null){d=l.child;for(var m=h.firstContext;m!==null;){if(m.context===i){if(l.tag===1){m=Un(-1,r&-r),m.tag=2;var p=l.updateQueue;if(p!==null){p=p.shared;var b=p.pending;b===null?m.next=m:(m.next=b.next,b.next=m),p.pending=m}}l.lanes|=r,m=l.alternate,m!==null&&(m.lanes|=r),od(l.return,r,t),h.lanes|=r;break}m=m.next}}else if(l.tag===10)d=l.type===t.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(ne(341));d.lanes|=r,h=d.alternate,h!==null&&(h.lanes|=r),od(d,r,t),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===t){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}Tt(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,Tr(t,r),o=ln(o),i=i(o),t.flags|=1,Tt(e,t,i,r),t.child;case 14:return i=t.type,o=mn(i,t.pendingProps),o=mn(i.type,o),$m(e,t,i,o,r);case 15:return kg(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:mn(i,o),ho(e,t),t.tag=1,Bt(i)?(e=!0,Lo(t)):e=!1,Tr(t,r),jg(t,i,o),cd(t,i,o,r),hd(null,t,i,!0,e,r);case 19:return Tg(e,t,r);case 22:return Cg(e,t,r)}throw Error(ne(156,t.tag))};function qg(e,t){return bp(e,t)}function Db(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(e,t,r,i){return new Db(e,t,r,i)}function Su(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fb(e){if(typeof e=="function")return Su(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hd)return 11;if(e===Wd)return 14}return 2}function ws(e,t){var r=e.alternate;return r===null?(r=rn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function po(e,t,r,i,o,l){var d=2;if(i=e,typeof e=="function")Su(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case gr:return Ws(r.children,o,l,t);case Zd:d=8,o|=8;break;case Rc:return e=rn(12,r,t,o|2),e.elementType=Rc,e.lanes=l,e;case Oc:return e=rn(13,r,t,o),e.elementType=Oc,e.lanes=l,e;case Ac:return e=rn(19,r,t,o),e.elementType=Ac,e.lanes=l,e;case sp:return al(r,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tp:d=10;break e;case np:d=9;break e;case Hd:d=11;break e;case Wd:d=14;break e;case is:d=16,i=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=rn(d,r,t,o),t.elementType=e,t.type=i,t.lanes=l,t}function Ws(e,t,r,i){return e=rn(7,e,i,t),e.lanes=r,e}function al(e,t,r,i){return e=rn(22,e,i,t),e.elementType=sp,e.lanes=r,e.stateNode={isHidden:!1},e}function wc(e,t,r){return e=rn(6,e,null,t),e.lanes=r,e}function _c(e,t,r){return t=rn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bb(e,t,r,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nc(0),this.expirationTimes=nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nc(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ku(e,t,r,i,o,l,d,h,m){return e=new Bb(e,t,r,h,m),t===1?(t=1,l===!0&&(t|=8)):t=0,l=rn(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cu(l),e}function Ub(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pr,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function Gg(e){if(!e)return Ns;e=e._reactInternals;e:{if(tr(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var r=e.type;if(Bt(r))return Gp(e,r,t)}return t}function Kg(e,t,r,i,o,l,d,h,m){return e=ku(r,i,!0,e,o,l,d,h,m),e.context=Gg(null),r=e.current,i=Mt(),o=bs(r),l=Un(i,o),l.callback=t??null,ys(r,l,o),e.current.lanes=o,ia(e,o,i),Ut(e,i),e}function ol(e,t,r,i){var o=t.current,l=Mt(),d=bs(o);return r=Gg(r),t.context===null?t.context=r:t.pendingContext=r,t=Un(l,d),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ys(o,t,d),e!==null&&(xn(e,o,d,l),lo(e,o,d)),d}function Zo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ef(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Cu(e,t){ef(e,t),(e=e.alternate)&&ef(e,t)}function $b(){return null}var Qg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Pu(e){this._internalRoot=e}ll.prototype.render=Pu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));ol(e,t,null,null)};ll.prototype.unmount=Pu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ys(function(){ol(null,e,null,null)}),t[Wn]=null}};function ll(e){this._internalRoot=e}ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<os.length&&t!==0&&t<os[r].priority;r++);os.splice(r,0,e),r===0&&Ep(e)}};function Eu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function tf(){}function Zb(e,t,r,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var p=Zo(d);l.call(p)}}var d=Kg(t,i,e,0,null,!1,!1,"",tf);return e._reactRootContainer=d,e[Wn]=d.current,Zi(e.nodeType===8?e.parentNode:e),Ys(),d}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var h=i;i=function(){var p=Zo(m);h.call(p)}}var m=ku(e,0,!1,null,null,!1,!1,"",tf);return e._reactRootContainer=m,e[Wn]=m.current,Zi(e.nodeType===8?e.parentNode:e),Ys(function(){ol(t,m,r,i)}),m}function dl(e,t,r,i,o){var l=r._reactRootContainer;if(l){var d=l;if(typeof o=="function"){var h=o;o=function(){var m=Zo(d);h.call(m)}}ol(t,d,e,o)}else d=Zb(r,t,e,o,i);return Zo(d)}Sp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=wi(t.pendingLanes);r!==0&&(Gd(t,r|1),Ut(t,nt()),!(Oe&6)&&(Fr=nt()+500,Ps()))}break;case 13:Ys(function(){var i=Vn(e,1);if(i!==null){var o=Mt();xn(i,e,1,o)}}),Cu(e,1)}};Kd=function(e){if(e.tag===13){var t=Vn(e,134217728);if(t!==null){var r=Mt();xn(t,e,134217728,r)}Cu(e,134217728)}};kp=function(e){if(e.tag===13){var t=bs(e),r=Vn(e,t);if(r!==null){var i=Mt();xn(r,e,t,i)}Cu(e,t)}};Cp=function(){return Fe};Pp=function(e,t){var r=Fe;try{return Fe=e,t()}finally{Fe=r}};Wc=function(e,t,r){switch(t){case"input":if(Dc(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var o=el(i);if(!o)throw Error(ne(90));ip(i),Dc(i,o)}}}break;case"textarea":op(e,r);break;case"select":t=r.value,t!=null&&Cr(e,!!r.multiple,t,!1)}};fp=_u;pp=Ys;var Hb={usingClientEntryPoint:!1,Events:[oa,br,el,hp,mp,_u]},xi={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wb={bundleType:xi.bundleType,version:xi.version,rendererPackageName:xi.rendererPackageName,rendererConfig:xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yp(e),e===null?null:e.stateNode},findFiberByHostInstance:xi.findFiberByHostInstance||$b,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{Qo=Ya.inject(Wb),Ln=Ya}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hb;Kt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eu(t))throw Error(ne(200));return Ub(e,t,null,r)};Kt.createRoot=function(e,t){if(!Eu(e))throw Error(ne(299));var r=!1,i="",o=Qg;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=ku(e,1,!1,null,null,r,!1,i,o),e[Wn]=t.current,Zi(e.nodeType===8?e.parentNode:e),new Pu(t)};Kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=yp(t),e=e===null?null:e.stateNode,e};Kt.flushSync=function(e){return Ys(e)};Kt.hydrate=function(e,t,r){if(!cl(t))throw Error(ne(200));return dl(null,e,t,!0,r)};Kt.hydrateRoot=function(e,t,r){if(!Eu(e))throw Error(ne(405));var i=r!=null&&r.hydratedSources||null,o=!1,l="",d=Qg;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=Kg(t,null,e,1,r??null,o,!1,l,d),e[Wn]=t.current,Zi(e),i)for(e=0;e<i.length;e++)r=i[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new ll(t)};Kt.render=function(e,t,r){if(!cl(t))throw Error(ne(200));return dl(null,e,t,!1,r)};Kt.unmountComponentAtNode=function(e){if(!cl(e))throw Error(ne(40));return e._reactRootContainer?(Ys(function(){dl(null,null,e,!1,function(){e._reactRootContainer=null,e[Wn]=null})}),!0):!1};Kt.unstable_batchedUpdates=_u;Kt.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!cl(r))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return dl(e,t,r,!1,i)};Kt.version="18.3.1-next-f1338f8080-20240426";function Yg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yg)}catch(e){console.error(e)}}Yg(),Yf.exports=Kt;var Jg=Yf.exports,nf=Jg;Tc.createRoot=nf.createRoot,Tc.hydrateRoot=nf.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ji(){return Ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ji.apply(this,arguments)}var us;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(us||(us={}));const sf="popstate";function Vb(e){e===void 0&&(e={});function t(i,o){let{pathname:l,search:d,hash:h}=i.location;return Nd("",{pathname:l,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:Ho(o)}return Gb(t,r,null,e)}function rt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Lu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qb(){return Math.random().toString(36).substr(2,8)}function rf(e,t){return{usr:e.state,key:e.key,idx:t}}function Nd(e,t,r,i){return r===void 0&&(r=null),Ji({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Vr(t):t,{state:r,key:t&&t.key||i||qb()})}function Ho(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Vr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Gb(e,t,r,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,h=us.Pop,m=null,p=b();p==null&&(p=0,d.replaceState(Ji({},d.state,{idx:p}),""));function b(){return(d.state||{idx:null}).idx}function g(){h=us.Pop;let C=b(),_=C==null?null:C-p;p=C,m&&m({action:h,location:y.location,delta:_})}function S(C,_){h=us.Push;let x=Nd(y.location,C,_);p=b()+1;let k=rf(x,p),E=y.createHref(x);try{d.pushState(k,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;o.location.assign(E)}l&&m&&m({action:h,location:y.location,delta:1})}function w(C,_){h=us.Replace;let x=Nd(y.location,C,_);p=b();let k=rf(x,p),E=y.createHref(x);d.replaceState(k,"",E),l&&m&&m({action:h,location:y.location,delta:0})}function N(C){let _=o.location.origin!=="null"?o.location.origin:o.location.href,x=typeof C=="string"?C:Ho(C);return x=x.replace(/ $/,"%20"),rt(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let y={get action(){return h},get location(){return e(o,d)},listen(C){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(sf,g),m=C,()=>{o.removeEventListener(sf,g),m=null}},createHref(C){return t(o,C)},createURL:N,encodeLocation(C){let _=N(C);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:S,replace:w,go(C){return d.go(C)}};return y}var af;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(af||(af={}));function Kb(e,t,r){return r===void 0&&(r="/"),Qb(e,t,r)}function Qb(e,t,r,i){let o=typeof t=="string"?Vr(t):t,l=Tu(o.pathname||"/",r);if(l==null)return null;let d=Xg(e);Yb(d);let h=null;for(let m=0;h==null&&m<d.length;++m){let p=cw(l);h=aw(d[m],p)}return h}function Xg(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let o=(l,d,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};m.relativePath.startsWith("/")&&(rt(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let p=_s([i,m.relativePath]),b=r.concat(m);l.children&&l.children.length>0&&(rt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Xg(l.children,t,b,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:rw(p,l.index),routesMeta:b})};return e.forEach((l,d)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,d);else for(let m of ex(l.path))o(l,d,m)}),t}function ex(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=ex(i.join("/")),h=[];return h.push(...d.map(m=>m===""?l:[l,m].join("/"))),o&&h.push(...d),h.map(m=>e.startsWith("/")&&m===""?"/":m)}function Yb(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:iw(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const Jb=/^:[\w-]+$/,Xb=3,ew=2,tw=1,nw=10,sw=-2,of=e=>e==="*";function rw(e,t){let r=e.split("/"),i=r.length;return r.some(of)&&(i+=sw),t&&(i+=ew),r.filter(o=>!of(o)).reduce((o,l)=>o+(Jb.test(l)?Xb:l===""?tw:nw),i)}function iw(e,t){return e.length===t.length&&e.slice(0,-1).every((i,o)=>i===t[o])?e[e.length-1]-t[t.length-1]:0}function aw(e,t,r){let{routesMeta:i}=e,o={},l="/",d=[];for(let h=0;h<i.length;++h){let m=i[h],p=h===i.length-1,b=l==="/"?t:t.slice(l.length)||"/",g=ow({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},b),S=m.route;if(!g)return null;Object.assign(o,g.params),d.push({params:o,pathname:_s([l,g.pathname]),pathnameBase:fw(_s([l,g.pathnameBase])),route:S}),g.pathnameBase!=="/"&&(l=_s([l,g.pathnameBase]))}return d}function ow(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=lw(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((p,b,g)=>{let{paramName:S,isOptional:w}=b;if(S==="*"){let y=h[g]||"";d=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const N=h[g];return w&&!N?p[S]=void 0:p[S]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:d,pattern:e}}function lw(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Lu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,m)=>(i.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function cw(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Tu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}const dw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uw=e=>dw.test(e);function hw(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:o=""}=typeof e=="string"?Vr(e):e,l;if(r)if(uw(r))l=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),Lu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+r))}r.startsWith("/")?l=lf(r.substring(1),"/"):l=lf(r,t)}else l=t;return{pathname:l,search:pw(i),hash:gw(o)}}function lf(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function jc(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mw(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Mu(e,t){let r=mw(e);return t?r.map((i,o)=>o===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function Ru(e,t,r,i){i===void 0&&(i=!1);let o;typeof e=="string"?o=Vr(e):(o=Ji({},e),rt(!o.pathname||!o.pathname.includes("?"),jc("?","pathname","search",o)),rt(!o.pathname||!o.pathname.includes("#"),jc("#","pathname","hash",o)),rt(!o.search||!o.search.includes("#"),jc("#","search","hash",o)));let l=e===""||o.pathname==="",d=l?"/":o.pathname,h;if(d==null)h=r;else{let g=t.length-1;if(!i&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),g-=1;o.pathname=S.join("/")}h=g>=0?t[g]:"/"}let m=hw(o,h),p=d&&d!=="/"&&d.endsWith("/"),b=(l||d===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(p||b)&&(m.pathname+="/"),m}const _s=e=>e.join("/").replace(/\/\/+/g,"/"),fw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function xw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const tx=["post","put","patch","delete"];new Set(tx);const yw=["get",...tx];new Set(yw);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Xi.apply(this,arguments)}const Ou=v.createContext(null),vw=v.createContext(null),Es=v.createContext(null),ul=v.createContext(null),Ls=v.createContext({outlet:null,matches:[],isDataRoute:!1}),nx=v.createContext(null);function bw(e,t){let{relative:r}=t===void 0?{}:t;qr()||rt(!1);let{basename:i,navigator:o}=v.useContext(Es),{hash:l,pathname:d,search:h}=rx(e,{relative:r}),m=d;return i!=="/"&&(m=d==="/"?i:_s([i,d])),o.createHref({pathname:m,search:h,hash:l})}function qr(){return v.useContext(ul)!=null}function nr(){return qr()||rt(!1),v.useContext(ul).location}function sx(e){v.useContext(Es).static||v.useLayoutEffect(e)}function sr(){let{isDataRoute:e}=v.useContext(Ls);return e?Rw():ww()}function ww(){qr()||rt(!1);let e=v.useContext(Ou),{basename:t,future:r,navigator:i}=v.useContext(Es),{matches:o}=v.useContext(Ls),{pathname:l}=nr(),d=JSON.stringify(Mu(o,r.v7_relativeSplatPath)),h=v.useRef(!1);return sx(()=>{h.current=!0}),v.useCallback(function(p,b){if(b===void 0&&(b={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let g=Ru(p,JSON.parse(d),l,b.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:_s([t,g.pathname])),(b.replace?i.replace:i.push)(g,b.state,b)},[t,i,d,l,e])}function rx(e,t){let{relative:r}=t===void 0?{}:t,{future:i}=v.useContext(Es),{matches:o}=v.useContext(Ls),{pathname:l}=nr(),d=JSON.stringify(Mu(o,i.v7_relativeSplatPath));return v.useMemo(()=>Ru(e,JSON.parse(d),l,r==="path"),[e,d,l,r])}function _w(e,t){return jw(e,t)}function jw(e,t,r,i){qr()||rt(!1);let{navigator:o}=v.useContext(Es),{matches:l}=v.useContext(Ls),d=l[l.length-1],h=d?d.params:{};d&&d.pathname;let m=d?d.pathnameBase:"/";d&&d.route;let p=nr(),b;if(t){var g;let C=typeof t=="string"?Vr(t):t;m==="/"||(g=C.pathname)!=null&&g.startsWith(m)||rt(!1),b=C}else b=p;let S=b.pathname||"/",w=S;if(m!=="/"){let C=m.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(C.length).join("/")}let N=Kb(e,{pathname:w}),y=Pw(N&&N.map(C=>Object.assign({},C,{params:Object.assign({},h,C.params),pathname:_s([m,o.encodeLocation?o.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:_s([m,o.encodeLocation?o.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,r,i);return t&&y?v.createElement(ul.Provider,{value:{location:Xi({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:us.Pop}},y):y}function Nw(){let e=Mw(),t=xw(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:o},r):null,null)}const Sw=v.createElement(Nw,null);class kw extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(Ls.Provider,{value:this.props.routeContext},v.createElement(nx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Cw(e){let{routeContext:t,match:r,children:i}=e,o=v.useContext(Ou);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(Ls.Provider,{value:t},i)}function Pw(e,t,r,i){var o;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=i)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let d=e,h=(o=r)==null?void 0:o.errors;if(h!=null){let b=d.findIndex(g=>g.route.id&&(h==null?void 0:h[g.route.id])!==void 0);b>=0||rt(!1),d=d.slice(0,Math.min(d.length,b+1))}let m=!1,p=-1;if(r&&i&&i.v7_partialHydration)for(let b=0;b<d.length;b++){let g=d[b];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=b),g.route.id){let{loaderData:S,errors:w}=r,N=g.route.loader&&S[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||N){m=!0,p>=0?d=d.slice(0,p+1):d=[d[0]];break}}}return d.reduceRight((b,g,S)=>{let w,N=!1,y=null,C=null;r&&(w=h&&g.route.id?h[g.route.id]:void 0,y=g.route.errorElement||Sw,m&&(p<0&&S===0?(Ow("route-fallback"),N=!0,C=null):p===S&&(N=!0,C=g.route.hydrateFallbackElement||null)));let _=t.concat(d.slice(0,S+1)),x=()=>{let k;return w?k=y:N?k=C:g.route.Component?k=v.createElement(g.route.Component,null):g.route.element?k=g.route.element:k=b,v.createElement(Cw,{match:g,routeContext:{outlet:b,matches:_,isDataRoute:r!=null},children:k})};return r&&(g.route.ErrorBoundary||g.route.errorElement||S===0)?v.createElement(kw,{location:r.location,revalidation:r.revalidation,component:y,error:w,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var ix=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ix||{}),ax=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ax||{});function Ew(e){let t=v.useContext(Ou);return t||rt(!1),t}function Lw(e){let t=v.useContext(vw);return t||rt(!1),t}function Tw(e){let t=v.useContext(Ls);return t||rt(!1),t}function ox(e){let t=Tw(),r=t.matches[t.matches.length-1];return r.route.id||rt(!1),r.route.id}function Mw(){var e;let t=v.useContext(nx),r=Lw(),i=ox();return t!==void 0?t:(e=r.errors)==null?void 0:e[i]}function Rw(){let{router:e}=Ew(ix.UseNavigateStable),t=ox(ax.UseNavigateStable),r=v.useRef(!1);return sx(()=>{r.current=!0}),v.useCallback(function(o,l){l===void 0&&(l={}),r.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Xi({fromRouteId:t},l)))},[e,t])}const cf={};function Ow(e,t,r){cf[e]||(cf[e]=!0)}function Aw(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function fr(e){let{to:t,replace:r,state:i,relative:o}=e;qr()||rt(!1);let{future:l,static:d}=v.useContext(Es),{matches:h}=v.useContext(Ls),{pathname:m}=nr(),p=sr(),b=Ru(t,Mu(h,l.v7_relativeSplatPath),m,o==="path"),g=JSON.stringify(b);return v.useEffect(()=>p(JSON.parse(g),{replace:r,state:i,relative:o}),[p,g,o,r,i]),null}function Qe(e){rt(!1)}function Iw(e){let{basename:t="/",children:r=null,location:i,navigationType:o=us.Pop,navigator:l,static:d=!1,future:h}=e;qr()&&rt(!1);let m=t.replace(/^\/*/,"/"),p=v.useMemo(()=>({basename:m,navigator:l,static:d,future:Xi({v7_relativeSplatPath:!1},h)}),[m,h,l,d]);typeof i=="string"&&(i=Vr(i));let{pathname:b="/",search:g="",hash:S="",state:w=null,key:N="default"}=i,y=v.useMemo(()=>{let C=Tu(b,m);return C==null?null:{location:{pathname:C,search:g,hash:S,state:w,key:N},navigationType:o}},[m,b,g,S,w,N,o]);return y==null?null:v.createElement(Es.Provider,{value:p},v.createElement(ul.Provider,{children:r,value:y}))}function zw(e){let{children:t,location:r}=e;return _w(Sd(t),r)}new Promise(()=>{});function Sd(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(i,o)=>{if(!v.isValidElement(i))return;let l=[...t,o];if(i.type===v.Fragment){r.push.apply(r,Sd(i.props.children,l));return}i.type!==Qe&&rt(!1),!i.props.index||!i.props.children||rt(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Sd(i.props.children,l)),r.push(d)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},kd.apply(this,arguments)}function Dw(e,t){if(e==null)return{};var r={},i=Object.keys(e),o,l;for(l=0;l<i.length;l++)o=i[l],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Fw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Bw(e,t){return e.button===0&&(!t||t==="_self")&&!Fw(e)}const Uw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$w="6";try{window.__reactRouterVersion=$w}catch{}const Zw="startTransition",df=Ay[Zw];function Hw(e){let{basename:t,children:r,future:i,window:o}=e,l=v.useRef();l.current==null&&(l.current=Vb({window:o,v5Compat:!0}));let d=l.current,[h,m]=v.useState({action:d.action,location:d.location}),{v7_startTransition:p}=i||{},b=v.useCallback(g=>{p&&df?df(()=>m(g)):m(g)},[m,p]);return v.useLayoutEffect(()=>d.listen(b),[d,b]),v.useEffect(()=>Aw(i),[i]),v.createElement(Iw,{basename:t,children:r,location:h.location,navigationType:h.action,navigator:d,future:i})}const Ww=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ht=v.forwardRef(function(t,r){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:h,target:m,to:p,preventScrollReset:b,viewTransition:g}=t,S=Dw(t,Uw),{basename:w}=v.useContext(Es),N,y=!1;if(typeof p=="string"&&Vw.test(p)&&(N=p,Ww))try{let k=new URL(window.location.href),E=p.startsWith("//")?new URL(k.protocol+p):new URL(p),A=Tu(E.pathname,w);E.origin===k.origin&&A!=null?p=A+E.search+E.hash:y=!0}catch{}let C=bw(p,{relative:o}),_=qw(p,{replace:d,state:h,target:m,preventScrollReset:b,relative:o,viewTransition:g});function x(k){i&&i(k),k.defaultPrevented||_(k)}return v.createElement("a",kd({},S,{href:N||C,onClick:y||l?i:x,ref:r,target:m}))});var uf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(uf||(uf={}));var hf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hf||(hf={}));function qw(e,t){let{target:r,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:h}=t===void 0?{}:t,m=sr(),p=nr(),b=rx(e,{relative:d});return v.useCallback(g=>{if(Bw(g,r)){g.preventDefault();let S=i!==void 0?i:Ho(p)===Ho(b);m(e,{replace:S,state:o,preventScrollReset:l,relative:d,viewTransition:h})}},[p,m,b,i,o,r,e,l,d,h])}function lx(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=lx(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function hs(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=lx(e))&&(i&&(i+=" "),i+=t);return i}const Ri=e=>typeof e=="number"&&!isNaN(e),Js=e=>typeof e=="string",Dt=e=>typeof e=="function",go=e=>Js(e)||Dt(e)?e:null,Nc=e=>v.isValidElement(e)||Js(e)||Dt(e)||Ri(e);function Gw(e,t,r){r===void 0&&(r=300);const{scrollHeight:i,style:o}=e;requestAnimationFrame(()=>{o.minHeight="initial",o.height=i+"px",o.transition=`all ${r}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(t,r)})})}function hl(e){let{enter:t,exit:r,appendPosition:i=!1,collapse:o=!0,collapseDuration:l=300}=e;return function(d){let{children:h,position:m,preventExitTransition:p,done:b,nodeRef:g,isIn:S}=d;const w=i?`${t}--${m}`:t,N=i?`${r}--${m}`:r,y=v.useRef(0);return v.useLayoutEffect(()=>{const C=g.current,_=w.split(" "),x=k=>{k.target===g.current&&(C.dispatchEvent(new Event("d")),C.removeEventListener("animationend",x),C.removeEventListener("animationcancel",x),y.current===0&&k.type!=="animationcancel"&&C.classList.remove(..._))};C.classList.add(..._),C.addEventListener("animationend",x),C.addEventListener("animationcancel",x)},[]),v.useEffect(()=>{const C=g.current,_=()=>{C.removeEventListener("animationend",_),o?Gw(C,b,l):b()};S||(p?_():(y.current=1,C.className+=` ${N}`,C.addEventListener("animationend",_)))},[S]),Ie.createElement(Ie.Fragment,null,h)}}function mf(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const tn={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const r=this.list.get(e).filter(i=>i!==t);return this.list.set(e,r),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const r=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(r)})}},Ja=e=>{let{theme:t,type:r,...i}=e;return Ie.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...i})},Sc={info:function(e){return Ie.createElement(Ja,{...e},Ie.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return Ie.createElement(Ja,{...e},Ie.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return Ie.createElement(Ja,{...e},Ie.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return Ie.createElement(Ja,{...e},Ie.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Ie.createElement("div",{className:"Toastify__spinner"})}};function Kw(e){const[,t]=v.useReducer(w=>w+1,0),[r,i]=v.useState([]),o=v.useRef(null),l=v.useRef(new Map).current,d=w=>r.indexOf(w)!==-1,h=v.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:d,getToast:w=>l.get(w)}).current;function m(w){let{containerId:N}=w;const{limit:y}=h.props;!y||N&&h.containerId!==N||(h.count-=h.queue.length,h.queue=[])}function p(w){i(N=>w==null?[]:N.filter(y=>y!==w))}function b(){const{toastContent:w,toastProps:N,staleId:y}=h.queue.shift();S(w,N,y)}function g(w,N){let{delay:y,staleId:C,..._}=N;if(!Nc(w)||function(J){return!o.current||h.props.enableMultiContainer&&J.containerId!==h.props.containerId||l.has(J.toastId)&&J.updateId==null}(_))return;const{toastId:x,updateId:k,data:E}=_,{props:A}=h,M=()=>p(x),P=k==null;P&&h.count++;const I={...A,style:A.toastStyle,key:h.toastKey++,...Object.fromEntries(Object.entries(_).filter(J=>{let[te,se]=J;return se!=null})),toastId:x,updateId:k,data:E,closeToast:M,isIn:!1,className:go(_.className||A.toastClassName),bodyClassName:go(_.bodyClassName||A.bodyClassName),progressClassName:go(_.progressClassName||A.progressClassName),autoClose:!_.isLoading&&(z=_.autoClose,V=A.autoClose,z===!1||Ri(z)&&z>0?z:V),deleteToast(){const J=mf(l.get(x),"removed");l.delete(x),tn.emit(4,J);const te=h.queue.length;if(h.count=x==null?h.count-h.displayedToast:h.count-1,h.count<0&&(h.count=0),te>0){const se=x==null?h.props.limit:1;if(te===1||se===1)h.displayedToast++,b();else{const ge=se>te?te:se;h.displayedToast=ge;for(let ae=0;ae<ge;ae++)b()}}else t()}};var z,V;I.iconOut=function(J){let{theme:te,type:se,isLoading:ge,icon:ae}=J,_e=null;const U={theme:te,type:se};return ae===!1||(Dt(ae)?_e=ae(U):v.isValidElement(ae)?_e=v.cloneElement(ae,U):Js(ae)||Ri(ae)?_e=ae:ge?_e=Sc.spinner():(T=>T in Sc)(se)&&(_e=Sc[se](U))),_e}(I),Dt(_.onOpen)&&(I.onOpen=_.onOpen),Dt(_.onClose)&&(I.onClose=_.onClose),I.closeButton=A.closeButton,_.closeButton===!1||Nc(_.closeButton)?I.closeButton=_.closeButton:_.closeButton===!0&&(I.closeButton=!Nc(A.closeButton)||A.closeButton);let D=w;v.isValidElement(w)&&!Js(w.type)?D=v.cloneElement(w,{closeToast:M,toastProps:I,data:E}):Dt(w)&&(D=w({closeToast:M,toastProps:I,data:E})),A.limit&&A.limit>0&&h.count>A.limit&&P?h.queue.push({toastContent:D,toastProps:I,staleId:C}):Ri(y)?setTimeout(()=>{S(D,I,C)},y):S(D,I,C)}function S(w,N,y){const{toastId:C}=N;y&&l.delete(y);const _={content:w,props:N};l.set(C,_),i(x=>[...x,C].filter(k=>k!==y)),tn.emit(4,mf(_,_.props.updateId==null?"added":"updated"))}return v.useEffect(()=>(h.containerId=e.containerId,tn.cancelEmit(3).on(0,g).on(1,w=>o.current&&p(w)).on(5,m).emit(2,h),()=>{l.clear(),tn.emit(3,h)}),[]),v.useEffect(()=>{h.props=e,h.isToastActive=d,h.displayedToast=r.length}),{getToastToRender:function(w){const N=new Map,y=Array.from(l.values());return e.newestOnTop&&y.reverse(),y.forEach(C=>{const{position:_}=C.props;N.has(_)||N.set(_,[]),N.get(_).push(C)}),Array.from(N,C=>w(C[0],C[1]))},containerRef:o,isToastActive:d}}function ff(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function pf(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Qw(e){const[t,r]=v.useState(!1),[i,o]=v.useState(!1),l=v.useRef(null),d=v.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,h=v.useRef(e),{autoClose:m,pauseOnHover:p,closeToast:b,onClick:g,closeOnClick:S}=e;function w(E){if(e.draggable){E.nativeEvent.type==="touchstart"&&E.nativeEvent.preventDefault(),d.didMove=!1,document.addEventListener("mousemove",_),document.addEventListener("mouseup",x),document.addEventListener("touchmove",_),document.addEventListener("touchend",x);const A=l.current;d.canCloseOnClick=!0,d.canDrag=!0,d.boundingRect=A.getBoundingClientRect(),A.style.transition="",d.x=ff(E.nativeEvent),d.y=pf(E.nativeEvent),e.draggableDirection==="x"?(d.start=d.x,d.removalDistance=A.offsetWidth*(e.draggablePercent/100)):(d.start=d.y,d.removalDistance=A.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function N(E){if(d.boundingRect){const{top:A,bottom:M,left:P,right:I}=d.boundingRect;E.nativeEvent.type!=="touchend"&&e.pauseOnHover&&d.x>=P&&d.x<=I&&d.y>=A&&d.y<=M?C():y()}}function y(){r(!0)}function C(){r(!1)}function _(E){const A=l.current;d.canDrag&&A&&(d.didMove=!0,t&&C(),d.x=ff(E),d.y=pf(E),d.delta=e.draggableDirection==="x"?d.x-d.start:d.y-d.start,d.start!==d.x&&(d.canCloseOnClick=!1),A.style.transform=`translate${e.draggableDirection}(${d.delta}px)`,A.style.opacity=""+(1-Math.abs(d.delta/d.removalDistance)))}function x(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",x);const E=l.current;if(d.canDrag&&d.didMove&&E){if(d.canDrag=!1,Math.abs(d.delta)>d.removalDistance)return o(!0),void e.closeToast();E.style.transition="transform 0.2s, opacity 0.2s",E.style.transform=`translate${e.draggableDirection}(0)`,E.style.opacity="1"}}v.useEffect(()=>{h.current=e}),v.useEffect(()=>(l.current&&l.current.addEventListener("d",y,{once:!0}),Dt(e.onOpen)&&e.onOpen(v.isValidElement(e.children)&&e.children.props),()=>{const E=h.current;Dt(E.onClose)&&E.onClose(v.isValidElement(E.children)&&E.children.props)}),[]),v.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||C(),window.addEventListener("focus",y),window.addEventListener("blur",C)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",y),window.removeEventListener("blur",C))}),[e.pauseOnFocusLoss]);const k={onMouseDown:w,onTouchStart:w,onMouseUp:N,onTouchEnd:N};return m&&p&&(k.onMouseEnter=C,k.onMouseLeave=y),S&&(k.onClick=E=>{g&&g(E),d.canCloseOnClick&&b()}),{playToast:y,pauseToast:C,isRunning:t,preventExitTransition:i,toastRef:l,eventHandlers:k}}function cx(e){let{closeToast:t,theme:r,ariaLabel:i="close"}=e;return Ie.createElement("button",{className:`Toastify__close-button Toastify__close-button--${r}`,type:"button",onClick:o=>{o.stopPropagation(),t(o)},"aria-label":i},Ie.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ie.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Yw(e){let{delay:t,isRunning:r,closeToast:i,type:o="default",hide:l,className:d,style:h,controlledProgress:m,progress:p,rtl:b,isIn:g,theme:S}=e;const w=l||m&&p===0,N={...h,animationDuration:`${t}ms`,animationPlayState:r?"running":"paused",opacity:w?0:1};m&&(N.transform=`scaleX(${p})`);const y=hs("Toastify__progress-bar",m?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${S}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":b}),C=Dt(d)?d({rtl:b,type:o,defaultClassName:y}):hs(y,d);return Ie.createElement("div",{role:"progressbar","aria-hidden":w?"true":"false","aria-label":"notification timer",className:C,style:N,[m&&p>=1?"onTransitionEnd":"onAnimationEnd"]:m&&p<1?null:()=>{g&&i()}})}const Jw=e=>{const{isRunning:t,preventExitTransition:r,toastRef:i,eventHandlers:o}=Qw(e),{closeButton:l,children:d,autoClose:h,onClick:m,type:p,hideProgressBar:b,closeToast:g,transition:S,position:w,className:N,style:y,bodyClassName:C,bodyStyle:_,progressClassName:x,progressStyle:k,updateId:E,role:A,progress:M,rtl:P,toastId:I,deleteToast:z,isIn:V,isLoading:D,iconOut:J,closeOnClick:te,theme:se}=e,ge=hs("Toastify__toast",`Toastify__toast-theme--${se}`,`Toastify__toast--${p}`,{"Toastify__toast--rtl":P},{"Toastify__toast--close-on-click":te}),ae=Dt(N)?N({rtl:P,position:w,type:p,defaultClassName:ge}):hs(ge,N),_e=!!M||!h,U={closeToast:g,type:p,theme:se};let T=null;return l===!1||(T=Dt(l)?l(U):v.isValidElement(l)?v.cloneElement(l,U):cx(U)),Ie.createElement(S,{isIn:V,done:z,position:w,preventExitTransition:r,nodeRef:i},Ie.createElement("div",{id:I,onClick:m,className:ae,...o,style:y,ref:i},Ie.createElement("div",{...V&&{role:A},className:Dt(C)?C({type:p}):hs("Toastify__toast-body",C),style:_},J!=null&&Ie.createElement("div",{className:hs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!D})},J),Ie.createElement("div",null,d)),T,Ie.createElement(Yw,{...E&&!_e?{key:`pb-${E}`}:{},rtl:P,theme:se,delay:h,isRunning:t,isIn:V,closeToast:g,hide:b,type:p,style:k,className:x,controlledProgress:_e,progress:M||0})))},ml=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},Xw=hl(ml("bounce",!0));hl(ml("slide",!0));hl(ml("zoom"));hl(ml("flip"));const Cd=v.forwardRef((e,t)=>{const{getToastToRender:r,containerRef:i,isToastActive:o}=Kw(e),{className:l,style:d,rtl:h,containerId:m}=e;function p(b){const g=hs("Toastify__toast-container",`Toastify__toast-container--${b}`,{"Toastify__toast-container--rtl":h});return Dt(l)?l({position:b,rtl:h,defaultClassName:g}):hs(g,go(l))}return v.useEffect(()=>{t&&(t.current=i.current)},[]),Ie.createElement("div",{ref:i,className:"Toastify",id:m},r((b,g)=>{const S=g.length?{...d}:{...d,pointerEvents:"none"};return Ie.createElement("div",{className:p(b),style:S,key:`container-${b}`},g.map((w,N)=>{let{content:y,props:C}=w;return Ie.createElement(Jw,{...C,isIn:o(C.toastId),style:{...C.style,"--nth":N+1,"--len":g.length},key:`toast-${C.key}`},y)}))}))});Cd.displayName="ToastContainer",Cd.defaultProps={position:"top-right",transition:Xw,autoClose:5e3,closeButton:cx,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let kc,Fs=new Map,ji=[],e_=1;function dx(){return""+e_++}function t_(e){return e&&(Js(e.toastId)||Ri(e.toastId))?e.toastId:dx()}function Oi(e,t){return Fs.size>0?tn.emit(0,e,t):ji.push({content:e,options:t}),t.toastId}function Wo(e,t){return{...t,type:t&&t.type||e,toastId:t_(t)}}function Xa(e){return(t,r)=>Oi(t,Wo(e,r))}function ee(e,t){return Oi(e,Wo("default",t))}ee.loading=(e,t)=>Oi(e,Wo("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),ee.promise=function(e,t,r){let i,{pending:o,error:l,success:d}=t;o&&(i=Js(o)?ee.loading(o,r):ee.loading(o.render,{...r,...o}));const h={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},m=(b,g,S)=>{if(g==null)return void ee.dismiss(i);const w={type:b,...h,...r,data:S},N=Js(g)?{render:g}:g;return i?ee.update(i,{...w,...N}):ee(N.render,{...w,...N}),S},p=Dt(e)?e():e;return p.then(b=>m("success",d,b)).catch(b=>m("error",l,b)),p},ee.success=Xa("success"),ee.info=Xa("info"),ee.error=Xa("error"),ee.warning=Xa("warning"),ee.warn=ee.warning,ee.dark=(e,t)=>Oi(e,Wo("default",{theme:"dark",...t})),ee.dismiss=e=>{Fs.size>0?tn.emit(1,e):ji=ji.filter(t=>e!=null&&t.options.toastId!==e)},ee.clearWaitingQueue=function(e){return e===void 0&&(e={}),tn.emit(5,e)},ee.isActive=e=>{let t=!1;return Fs.forEach(r=>{r.isToastActive&&r.isToastActive(e)&&(t=!0)}),t},ee.update=function(e,t){t===void 0&&(t={}),setTimeout(()=>{const r=function(i,o){let{containerId:l}=o;const d=Fs.get(l||kc);return d&&d.getToast(i)}(e,t);if(r){const{props:i,content:o}=r,l={delay:100,...i,...t,toastId:t.toastId||e,updateId:dx()};l.toastId!==e&&(l.staleId=e);const d=l.render||o;delete l.render,Oi(d,l)}},0)},ee.done=e=>{ee.update(e,{progress:1})},ee.onChange=e=>(tn.on(4,e),()=>{tn.off(4,e)}),ee.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},ee.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},tn.on(2,e=>{kc=e.containerId||e,Fs.set(kc,e),ji.forEach(t=>{tn.emit(0,t.content,t.options)}),ji=[]}).on(3,e=>{Fs.delete(e.containerId||e),Fs.size===0&&tn.off(0).off(1).off(5)});const ux=v.createContext(null),Mn=()=>{const e=v.useContext(ux);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},n_=({children:e})=>{const[t,r]=v.useState(null),[i,o]=v.useState(null),[l,d]=v.useState(null),[h,m]=v.useState(!0),p=sr();v.useEffect(()=>{const y=localStorage.getItem("token"),C=localStorage.getItem("user"),_=localStorage.getItem("role");y&&C&&_&&(o(y),r(JSON.parse(C)),d(_)),m(!1)},[]);const b=(y,C,_)=>{r(y),o(C),d(_),localStorage.setItem("token",C),localStorage.setItem("user",JSON.stringify(y)),localStorage.setItem("role",_),S(_)},g=()=>{r(null),o(null),d(null),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("role"),p("/login")},S=y=>{switch(y){case"user":p("/user/dashboard");break;case"police":p("/police/dashboard");break;case"admin":p("/admin/dashboard");break;default:p("/login")}},N={user:t,token:i,role:l,loading:h,login:b,logout:g,updateUser:y=>{r(y),localStorage.setItem("user",JSON.stringify(y))},isAuthenticated:!!i};return s.jsx(ux.Provider,{value:N,children:e})},vt=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,role:i,loading:o}=Mn();if(o)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})});if(!r)return s.jsx(fr,{to:"/login",replace:!0});if(t&&!t.includes(i))switch(i){case"user":return s.jsx(fr,{to:"/user/dashboard",replace:!0});case"police":return s.jsx(fr,{to:"/police/dashboard",replace:!0});case"admin":return s.jsx(fr,{to:"/admin/dashboard",replace:!0});default:return s.jsx(fr,{to:"/login",replace:!0})}return e};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(e,t)=>{const r=v.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:h="",children:m,...p},b)=>v.createElement("svg",{ref:b,...s_,width:o,height:o,stroke:i,strokeWidth:d?Number(l)*24/Number(o):l,className:["lucide",`lucide-${r_(e)}`,h].join(" "),...p},[...t.map(([g,S])=>v.createElement(g,S)),...Array.isArray(m)?m:[m]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=we("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=we("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=we("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=we("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=we("Badge",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=we("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=we("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=we("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=we("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=we("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=we("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=we("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=we("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=we("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=we("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=we("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=we("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=we("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=we("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=we("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=we("MapPinned",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=we("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=we("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=we("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=we("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=we("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=we("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=we("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=we("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=we("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=we("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=we("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=we("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=we("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=we("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=we("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=we("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function bx(e,t){return function(){return e.apply(t,arguments)}}const{toString:p_}=Object.prototype,{getPrototypeOf:Iu}=Object,{iterator:pl,toStringTag:wx}=Symbol,gl=(e=>t=>{const r=p_.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),wn=e=>(e=e.toLowerCase(),t=>gl(t)===e),xl=e=>t=>typeof t===e,{isArray:Kr}=Array,$r=xl("undefined");function da(e){return e!==null&&!$r(e)&&e.constructor!==null&&!$r(e.constructor)&&$t(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const _x=wn("ArrayBuffer");function g_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&_x(e.buffer),t}const x_=xl("string"),$t=xl("function"),jx=xl("number"),ua=e=>e!==null&&typeof e=="object",y_=e=>e===!0||e===!1,xo=e=>{if(gl(e)!=="object")return!1;const t=Iu(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(wx in e)&&!(pl in e)},v_=e=>{if(!ua(e)||da(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},b_=wn("Date"),w_=wn("File"),__=wn("Blob"),j_=wn("FileList"),N_=e=>ua(e)&&$t(e.pipe),S_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||$t(e.append)&&((t=gl(e))==="formdata"||t==="object"&&$t(e.toString)&&e.toString()==="[object FormData]"))},k_=wn("URLSearchParams"),[C_,P_,E_,L_]=["ReadableStream","Request","Response","Headers"].map(wn),T_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ha(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),Kr(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{if(da(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),d=l.length;let h;for(i=0;i<d;i++)h=l[i],t.call(null,e[h],h,e)}}function Nx(e,t){if(da(e))return null;t=t.toLowerCase();const r=Object.keys(e);let i=r.length,o;for(;i-- >0;)if(o=r[i],t===o.toLowerCase())return o;return null}const Zs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Sx=e=>!$r(e)&&e!==Zs;function Ld(){const{caseless:e,skipUndefined:t}=Sx(this)&&this||{},r={},i=(o,l)=>{if(l==="__proto__"||l==="constructor"||l==="prototype")return;const d=e&&Nx(r,l)||l;xo(r[d])&&xo(o)?r[d]=Ld(r[d],o):xo(o)?r[d]=Ld({},o):Kr(o)?r[d]=o.slice():(!t||!$r(o))&&(r[d]=o)};for(let o=0,l=arguments.length;o<l;o++)arguments[o]&&ha(arguments[o],i);return r}const M_=(e,t,r,{allOwnKeys:i}={})=>(ha(t,(o,l)=>{r&&$t(o)?Object.defineProperty(e,l,{value:bx(o,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,l,{value:o,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),e),R_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),O_=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},A_=(e,t,r,i)=>{let o,l,d;const h={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),l=o.length;l-- >0;)d=o[l],(!i||i(d,e,t))&&!h[d]&&(t[d]=e[d],h[d]=!0);e=r!==!1&&Iu(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},I_=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},z_=e=>{if(!e)return null;if(Kr(e))return e;let t=e.length;if(!jx(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},D_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Iu(Uint8Array)),F_=(e,t)=>{const i=(e&&e[pl]).call(e);let o;for(;(o=i.next())&&!o.done;){const l=o.value;t.call(e,l[0],l[1])}},B_=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},U_=wn("HTMLFormElement"),$_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,o){return i.toUpperCase()+o}),bf=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Z_=wn("RegExp"),kx=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};ha(r,(o,l)=>{let d;(d=t(o,l,e))!==!1&&(i[l]=d||o)}),Object.defineProperties(e,i)},H_=e=>{kx(e,(t,r)=>{if($t(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if($t(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},W_=(e,t)=>{const r={},i=o=>{o.forEach(l=>{r[l]=!0})};return Kr(e)?i(e):i(String(e).split(t)),r},V_=()=>{},q_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function G_(e){return!!(e&&$t(e.append)&&e[wx]==="FormData"&&e[pl])}const K_=e=>{const t=new Array(10),r=(i,o)=>{if(ua(i)){if(t.indexOf(i)>=0)return;if(da(i))return i;if(!("toJSON"in i)){t[o]=i;const l=Kr(i)?[]:{};return ha(i,(d,h)=>{const m=r(d,o+1);!$r(m)&&(l[h]=m)}),t[o]=void 0,l}}return i};return r(e,0)},Q_=wn("AsyncFunction"),Y_=e=>e&&(ua(e)||$t(e))&&$t(e.then)&&$t(e.catch),Cx=((e,t)=>e?setImmediate:t?((r,i)=>(Zs.addEventListener("message",({source:o,data:l})=>{o===Zs&&l===r&&i.length&&i.shift()()},!1),o=>{i.push(o),Zs.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",$t(Zs.postMessage)),J_=typeof queueMicrotask<"u"?queueMicrotask.bind(Zs):typeof process<"u"&&process.nextTick||Cx,X_=e=>e!=null&&$t(e[pl]),W={isArray:Kr,isArrayBuffer:_x,isBuffer:da,isFormData:S_,isArrayBufferView:g_,isString:x_,isNumber:jx,isBoolean:y_,isObject:ua,isPlainObject:xo,isEmptyObject:v_,isReadableStream:C_,isRequest:P_,isResponse:E_,isHeaders:L_,isUndefined:$r,isDate:b_,isFile:w_,isBlob:__,isRegExp:Z_,isFunction:$t,isStream:N_,isURLSearchParams:k_,isTypedArray:D_,isFileList:j_,forEach:ha,merge:Ld,extend:M_,trim:T_,stripBOM:R_,inherits:O_,toFlatObject:A_,kindOf:gl,kindOfTest:wn,endsWith:I_,toArray:z_,forEachEntry:F_,matchAll:B_,isHTMLForm:U_,hasOwnProperty:bf,hasOwnProp:bf,reduceDescriptors:kx,freezeMethods:H_,toObjectSet:W_,toCamelCase:$_,noop:V_,toFiniteNumber:q_,findKey:Nx,global:Zs,isContextDefined:Sx,isSpecCompliantForm:G_,toJSONObject:K_,isAsyncFn:Q_,isThenable:Y_,setImmediate:Cx,asap:J_,isIterable:X_};let ke=class Px extends Error{static from(t,r,i,o,l,d){const h=new Px(t.message,r||t.code,i,o,l);return h.cause=t,h.name=t.name,d&&Object.assign(h,d),h}constructor(t,r,i,o,l){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),i&&(this.config=i),o&&(this.request=o),l&&(this.response=l,this.status=l.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}};ke.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ke.ERR_BAD_OPTION="ERR_BAD_OPTION";ke.ECONNABORTED="ECONNABORTED";ke.ETIMEDOUT="ETIMEDOUT";ke.ERR_NETWORK="ERR_NETWORK";ke.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ke.ERR_DEPRECATED="ERR_DEPRECATED";ke.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ke.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ke.ERR_CANCELED="ERR_CANCELED";ke.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ke.ERR_INVALID_URL="ERR_INVALID_URL";const e1=null;function Td(e){return W.isPlainObject(e)||W.isArray(e)}function Ex(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function wf(e,t,r){return e?e.concat(t).map(function(o,l){return o=Ex(o),!r&&l?"["+o+"]":o}).join(r?".":""):t}function t1(e){return W.isArray(e)&&!e.some(Td)}const n1=W.toFlatObject(W,{},null,function(t){return/^is[A-Z]/.test(t)});function yl(e,t,r){if(!W.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=W.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,C){return!W.isUndefined(C[y])});const i=r.metaTokens,o=r.visitor||b,l=r.dots,d=r.indexes,m=(r.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(o))throw new TypeError("visitor must be a function");function p(N){if(N===null)return"";if(W.isDate(N))return N.toISOString();if(W.isBoolean(N))return N.toString();if(!m&&W.isBlob(N))throw new ke("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(N)||W.isTypedArray(N)?m&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function b(N,y,C){let _=N;if(N&&!C&&typeof N=="object"){if(W.endsWith(y,"{}"))y=i?y:y.slice(0,-2),N=JSON.stringify(N);else if(W.isArray(N)&&t1(N)||(W.isFileList(N)||W.endsWith(y,"[]"))&&(_=W.toArray(N)))return y=Ex(y),_.forEach(function(k,E){!(W.isUndefined(k)||k===null)&&t.append(d===!0?wf([y],E,l):d===null?y:y+"[]",p(k))}),!1}return Td(N)?!0:(t.append(wf(C,y,l),p(N)),!1)}const g=[],S=Object.assign(n1,{defaultVisitor:b,convertValue:p,isVisitable:Td});function w(N,y){if(!W.isUndefined(N)){if(g.indexOf(N)!==-1)throw Error("Circular reference detected in "+y.join("."));g.push(N),W.forEach(N,function(_,x){(!(W.isUndefined(_)||_===null)&&o.call(t,_,W.isString(x)?x.trim():x,y,S))===!0&&w(_,y?y.concat(x):[x])}),g.pop()}}if(!W.isObject(e))throw new TypeError("data must be an object");return w(e),t}function _f(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function zu(e,t){this._pairs=[],e&&yl(e,this,t)}const Lx=zu.prototype;Lx.append=function(t,r){this._pairs.push([t,r])};Lx.toString=function(t){const r=t?function(i){return t.call(this,i,_f)}:_f;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function s1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Tx(e,t,r){if(!t)return e;const i=r&&r.encode||s1,o=W.isFunction(r)?{serialize:r}:r,l=o&&o.serialize;let d;if(l?d=l(t,o):d=W.isURLSearchParams(t)?t.toString():new zu(t,o).toString(i),d){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class jf{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){W.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Du={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},r1=typeof URLSearchParams<"u"?URLSearchParams:zu,i1=typeof FormData<"u"?FormData:null,a1=typeof Blob<"u"?Blob:null,o1={isBrowser:!0,classes:{URLSearchParams:r1,FormData:i1,Blob:a1},protocols:["http","https","file","blob","url","data"]},Fu=typeof window<"u"&&typeof document<"u",Md=typeof navigator=="object"&&navigator||void 0,l1=Fu&&(!Md||["ReactNative","NativeScript","NS"].indexOf(Md.product)<0),c1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",d1=Fu&&window.location.href||"http://localhost",u1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fu,hasStandardBrowserEnv:l1,hasStandardBrowserWebWorkerEnv:c1,navigator:Md,origin:d1},Symbol.toStringTag,{value:"Module"})),Ct={...u1,...o1};function h1(e,t){return yl(e,new Ct.classes.URLSearchParams,{visitor:function(r,i,o,l){return Ct.isNode&&W.isBuffer(r)?(this.append(i,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function m1(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function f1(e){const t={},r=Object.keys(e);let i;const o=r.length;let l;for(i=0;i<o;i++)l=r[i],t[l]=e[l];return t}function Mx(e){function t(r,i,o,l){let d=r[l++];if(d==="__proto__")return!0;const h=Number.isFinite(+d),m=l>=r.length;return d=!d&&W.isArray(o)?o.length:d,m?(W.hasOwnProp(o,d)?o[d]=[o[d],i]:o[d]=i,!h):((!o[d]||!W.isObject(o[d]))&&(o[d]=[]),t(r,i,o[d],l)&&W.isArray(o[d])&&(o[d]=f1(o[d])),!h)}if(W.isFormData(e)&&W.isFunction(e.entries)){const r={};return W.forEachEntry(e,(i,o)=>{t(m1(i),o,r,0)}),r}return null}function p1(e,t,r){if(W.isString(e))try{return(t||JSON.parse)(e),W.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const ma={transitional:Du,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const i=r.getContentType()||"",o=i.indexOf("application/json")>-1,l=W.isObject(t);if(l&&W.isHTMLForm(t)&&(t=new FormData(t)),W.isFormData(t))return o?JSON.stringify(Mx(t)):t;if(W.isArrayBuffer(t)||W.isBuffer(t)||W.isStream(t)||W.isFile(t)||W.isBlob(t)||W.isReadableStream(t))return t;if(W.isArrayBufferView(t))return t.buffer;if(W.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return h1(t,this.formSerializer).toString();if((h=W.isFileList(t))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return yl(h?{"files[]":t}:t,m&&new m,this.formSerializer)}}return l||o?(r.setContentType("application/json",!1),p1(t)):t}],transformResponse:[function(t){const r=this.transitional||ma.transitional,i=r&&r.forcedJSONParsing,o=this.responseType==="json";if(W.isResponse(t)||W.isReadableStream(t))return t;if(t&&W.isString(t)&&(i&&!this.responseType||o)){const d=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(h){if(d)throw h.name==="SyntaxError"?ke.from(h,ke.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ct.classes.FormData,Blob:Ct.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],e=>{ma.headers[e]={}});const g1=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),x1=e=>{const t={};let r,i,o;return e&&e.split(`
`).forEach(function(d){o=d.indexOf(":"),r=d.substring(0,o).trim().toLowerCase(),i=d.substring(o+1).trim(),!(!r||t[r]&&g1[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},Nf=Symbol("internals");function yi(e){return e&&String(e).trim().toLowerCase()}function yo(e){return e===!1||e==null?e:W.isArray(e)?e.map(yo):String(e)}function y1(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const v1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Pc(e,t,r,i,o){if(W.isFunction(i))return i.call(this,t,r);if(o&&(t=r),!!W.isString(t)){if(W.isString(i))return t.indexOf(i)!==-1;if(W.isRegExp(i))return i.test(t)}}function b1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function w1(e,t){const r=W.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(o,l,d){return this[i].call(this,t,o,l,d)},configurable:!0})})}let Zt=class{constructor(t){t&&this.set(t)}set(t,r,i){const o=this;function l(h,m,p){const b=yi(m);if(!b)throw new Error("header name must be a non-empty string");const g=W.findKey(o,b);(!g||o[g]===void 0||p===!0||p===void 0&&o[g]!==!1)&&(o[g||m]=yo(h))}const d=(h,m)=>W.forEach(h,(p,b)=>l(p,b,m));if(W.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(W.isString(t)&&(t=t.trim())&&!v1(t))d(x1(t),r);else if(W.isObject(t)&&W.isIterable(t)){let h={},m,p;for(const b of t){if(!W.isArray(b))throw TypeError("Object iterator must return a key-value pair");h[p=b[0]]=(m=h[p])?W.isArray(m)?[...m,b[1]]:[m,b[1]]:b[1]}d(h,r)}else t!=null&&l(r,t,i);return this}get(t,r){if(t=yi(t),t){const i=W.findKey(this,t);if(i){const o=this[i];if(!r)return o;if(r===!0)return y1(o);if(W.isFunction(r))return r.call(this,o,i);if(W.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=yi(t),t){const i=W.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||Pc(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let o=!1;function l(d){if(d=yi(d),d){const h=W.findKey(i,d);h&&(!r||Pc(i,i[h],h,r))&&(delete i[h],o=!0)}}return W.isArray(t)?t.forEach(l):l(t),o}clear(t){const r=Object.keys(this);let i=r.length,o=!1;for(;i--;){const l=r[i];(!t||Pc(this,this[l],l,t,!0))&&(delete this[l],o=!0)}return o}normalize(t){const r=this,i={};return W.forEach(this,(o,l)=>{const d=W.findKey(i,l);if(d){r[d]=yo(o),delete r[l];return}const h=t?b1(l):String(l).trim();h!==l&&delete r[l],r[h]=yo(o),i[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return W.forEach(this,(i,o)=>{i!=null&&i!==!1&&(r[o]=t&&W.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[Nf]=this[Nf]={accessors:{}}).accessors,o=this.prototype;function l(d){const h=yi(d);i[h]||(w1(o,d),i[h]=!0)}return W.isArray(t)?t.forEach(l):l(t),this}};Zt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(Zt.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[r]=i}}});W.freezeMethods(Zt);function Ec(e,t){const r=this||ma,i=t||r,o=Zt.from(i.headers);let l=i.data;return W.forEach(e,function(h){l=h.call(r,l,o.normalize(),t?t.status:void 0)}),o.normalize(),l}function Rx(e){return!!(e&&e.__CANCEL__)}let fa=class extends ke{constructor(t,r,i){super(t??"canceled",ke.ERR_CANCELED,r,i),this.name="CanceledError",this.__CANCEL__=!0}};function Ox(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new ke("Request failed with status code "+r.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function _1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function j1(e,t){e=e||10;const r=new Array(e),i=new Array(e);let o=0,l=0,d;return t=t!==void 0?t:1e3,function(m){const p=Date.now(),b=i[l];d||(d=p),r[o]=m,i[o]=p;let g=l,S=0;for(;g!==o;)S+=r[g++],g=g%e;if(o=(o+1)%e,o===l&&(l=(l+1)%e),p-d<t)return;const w=b&&p-b;return w?Math.round(S*1e3/w):void 0}}function N1(e,t){let r=0,i=1e3/t,o,l;const d=(p,b=Date.now())=>{r=b,o=null,l&&(clearTimeout(l),l=null),e(...p)};return[(...p)=>{const b=Date.now(),g=b-r;g>=i?d(p,b):(o=p,l||(l=setTimeout(()=>{l=null,d(o)},i-g)))},()=>o&&d(o)]}const Go=(e,t,r=3)=>{let i=0;const o=j1(50,250);return N1(l=>{const d=l.loaded,h=l.lengthComputable?l.total:void 0,m=d-i,p=o(m),b=d<=h;i=d;const g={loaded:d,total:h,progress:h?d/h:void 0,bytes:m,rate:p||void 0,estimated:p&&h&&b?(h-d)/p:void 0,event:l,lengthComputable:h!=null,[t?"download":"upload"]:!0};e(g)},r)},Sf=(e,t)=>{const r=e!=null;return[i=>t[0]({lengthComputable:r,total:e,loaded:i}),t[1]]},kf=e=>(...t)=>W.asap(()=>e(...t)),S1=Ct.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Ct.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Ct.origin),Ct.navigator&&/(msie|trident)/i.test(Ct.navigator.userAgent)):()=>!0,k1=Ct.hasStandardBrowserEnv?{write(e,t,r,i,o,l,d){if(typeof document>"u")return;const h=[`${e}=${encodeURIComponent(t)}`];W.isNumber(r)&&h.push(`expires=${new Date(r).toUTCString()}`),W.isString(i)&&h.push(`path=${i}`),W.isString(o)&&h.push(`domain=${o}`),l===!0&&h.push("secure"),W.isString(d)&&h.push(`SameSite=${d}`),document.cookie=h.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function C1(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function P1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ax(e,t,r){let i=!C1(t);return e&&(i||r==!1)?P1(e,t):t}const Cf=e=>e instanceof Zt?{...e}:e;function Xs(e,t){t=t||{};const r={};function i(p,b,g,S){return W.isPlainObject(p)&&W.isPlainObject(b)?W.merge.call({caseless:S},p,b):W.isPlainObject(b)?W.merge({},b):W.isArray(b)?b.slice():b}function o(p,b,g,S){if(W.isUndefined(b)){if(!W.isUndefined(p))return i(void 0,p,g,S)}else return i(p,b,g,S)}function l(p,b){if(!W.isUndefined(b))return i(void 0,b)}function d(p,b){if(W.isUndefined(b)){if(!W.isUndefined(p))return i(void 0,p)}else return i(void 0,b)}function h(p,b,g){if(g in t)return i(p,b);if(g in e)return i(void 0,p)}const m={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:h,headers:(p,b,g)=>o(Cf(p),Cf(b),g,!0)};return W.forEach(Object.keys({...e,...t}),function(b){if(b==="__proto__"||b==="constructor"||b==="prototype")return;const g=W.hasOwnProp(m,b)?m[b]:o,S=g(e[b],t[b],b);W.isUndefined(S)&&g!==h||(r[b]=S)}),r}const Ix=e=>{const t=Xs({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:d,auth:h}=t;if(t.headers=d=Zt.from(d),t.url=Tx(Ax(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&d.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),W.isFormData(r)){if(Ct.hasStandardBrowserEnv||Ct.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(W.isFunction(r.getHeaders)){const m=r.getHeaders(),p=["content-type","content-length"];Object.entries(m).forEach(([b,g])=>{p.includes(b.toLowerCase())&&d.set(b,g)})}}if(Ct.hasStandardBrowserEnv&&(i&&W.isFunction(i)&&(i=i(t)),i||i!==!1&&S1(t.url))){const m=o&&l&&k1.read(l);m&&d.set(o,m)}return t},E1=typeof XMLHttpRequest<"u",L1=E1&&function(e){return new Promise(function(r,i){const o=Ix(e);let l=o.data;const d=Zt.from(o.headers).normalize();let{responseType:h,onUploadProgress:m,onDownloadProgress:p}=o,b,g,S,w,N;function y(){w&&w(),N&&N(),o.cancelToken&&o.cancelToken.unsubscribe(b),o.signal&&o.signal.removeEventListener("abort",b)}let C=new XMLHttpRequest;C.open(o.method.toUpperCase(),o.url,!0),C.timeout=o.timeout;function _(){if(!C)return;const k=Zt.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),A={data:!h||h==="text"||h==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:k,config:e,request:C};Ox(function(P){r(P),y()},function(P){i(P),y()},A),C=null}"onloadend"in C?C.onloadend=_:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(_)},C.onabort=function(){C&&(i(new ke("Request aborted",ke.ECONNABORTED,e,C)),C=null)},C.onerror=function(E){const A=E&&E.message?E.message:"Network Error",M=new ke(A,ke.ERR_NETWORK,e,C);M.event=E||null,i(M),C=null},C.ontimeout=function(){let E=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const A=o.transitional||Du;o.timeoutErrorMessage&&(E=o.timeoutErrorMessage),i(new ke(E,A.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,e,C)),C=null},l===void 0&&d.setContentType(null),"setRequestHeader"in C&&W.forEach(d.toJSON(),function(E,A){C.setRequestHeader(A,E)}),W.isUndefined(o.withCredentials)||(C.withCredentials=!!o.withCredentials),h&&h!=="json"&&(C.responseType=o.responseType),p&&([S,N]=Go(p,!0),C.addEventListener("progress",S)),m&&C.upload&&([g,w]=Go(m),C.upload.addEventListener("progress",g),C.upload.addEventListener("loadend",w)),(o.cancelToken||o.signal)&&(b=k=>{C&&(i(!k||k.type?new fa(null,e,C):k),C.abort(),C=null)},o.cancelToken&&o.cancelToken.subscribe(b),o.signal&&(o.signal.aborted?b():o.signal.addEventListener("abort",b)));const x=_1(o.url);if(x&&Ct.protocols.indexOf(x)===-1){i(new ke("Unsupported protocol "+x+":",ke.ERR_BAD_REQUEST,e));return}C.send(l||null)})},T1=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let i=new AbortController,o;const l=function(p){if(!o){o=!0,h();const b=p instanceof Error?p:this.reason;i.abort(b instanceof ke?b:new fa(b instanceof Error?b.message:b))}};let d=t&&setTimeout(()=>{d=null,l(new ke(`timeout of ${t}ms exceeded`,ke.ETIMEDOUT))},t);const h=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(l):p.removeEventListener("abort",l)}),e=null)};e.forEach(p=>p.addEventListener("abort",l));const{signal:m}=i;return m.unsubscribe=()=>W.asap(h),m}},M1=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let i=0,o;for(;i<r;)o=i+t,yield e.slice(i,o),i=o},R1=async function*(e,t){for await(const r of O1(e))yield*M1(r,t)},O1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:i}=await t.read();if(r)break;yield i}}finally{await t.cancel()}},Pf=(e,t,r,i)=>{const o=R1(e,t);let l=0,d,h=m=>{d||(d=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:p,value:b}=await o.next();if(p){h(),m.close();return}let g=b.byteLength;if(r){let S=l+=g;r(S)}m.enqueue(new Uint8Array(b))}catch(p){throw h(p),p}},cancel(m){return h(m),o.return()}},{highWaterMark:2})},Ef=64*1024,{isFunction:eo}=W,A1=(({Request:e,Response:t})=>({Request:e,Response:t}))(W.global),{ReadableStream:Lf,TextEncoder:Tf}=W.global,Mf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},I1=e=>{e=W.merge.call({skipUndefined:!0},A1,e);const{fetch:t,Request:r,Response:i}=e,o=t?eo(t):typeof fetch=="function",l=eo(r),d=eo(i);if(!o)return!1;const h=o&&eo(Lf),m=o&&(typeof Tf=="function"?(N=>y=>N.encode(y))(new Tf):async N=>new Uint8Array(await new r(N).arrayBuffer())),p=l&&h&&Mf(()=>{let N=!1;const y=new r(Ct.origin,{body:new Lf,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!y}),b=d&&h&&Mf(()=>W.isReadableStream(new i("").body)),g={stream:b&&(N=>N.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!g[N]&&(g[N]=(y,C)=>{let _=y&&y[N];if(_)return _.call(y);throw new ke(`Response type '${N}' is not supported`,ke.ERR_NOT_SUPPORT,C)})});const S=async N=>{if(N==null)return 0;if(W.isBlob(N))return N.size;if(W.isSpecCompliantForm(N))return(await new r(Ct.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(W.isArrayBufferView(N)||W.isArrayBuffer(N))return N.byteLength;if(W.isURLSearchParams(N)&&(N=N+""),W.isString(N))return(await m(N)).byteLength},w=async(N,y)=>{const C=W.toFiniteNumber(N.getContentLength());return C??S(y)};return async N=>{let{url:y,method:C,data:_,signal:x,cancelToken:k,timeout:E,onDownloadProgress:A,onUploadProgress:M,responseType:P,headers:I,withCredentials:z="same-origin",fetchOptions:V}=Ix(N),D=t||fetch;P=P?(P+"").toLowerCase():"text";let J=T1([x,k&&k.toAbortSignal()],E),te=null;const se=J&&J.unsubscribe&&(()=>{J.unsubscribe()});let ge;try{if(M&&p&&C!=="get"&&C!=="head"&&(ge=await w(I,_))!==0){let $=new r(y,{method:"POST",body:_,duplex:"half"}),G;if(W.isFormData(_)&&(G=$.headers.get("content-type"))&&I.setContentType(G),$.body){const[ce,ue]=Sf(ge,Go(kf(M)));_=Pf($.body,Ef,ce,ue)}}W.isString(z)||(z=z?"include":"omit");const ae=l&&"credentials"in r.prototype,_e={...V,signal:J,method:C.toUpperCase(),headers:I.normalize().toJSON(),body:_,duplex:"half",credentials:ae?z:void 0};te=l&&new r(y,_e);let U=await(l?D(te,V):D(y,_e));const T=b&&(P==="stream"||P==="response");if(b&&(A||T&&se)){const $={};["status","statusText","headers"].forEach(xe=>{$[xe]=U[xe]});const G=W.toFiniteNumber(U.headers.get("content-length")),[ce,ue]=A&&Sf(G,Go(kf(A),!0))||[];U=new i(Pf(U.body,Ef,ce,()=>{ue&&ue(),se&&se()}),$)}P=P||"text";let F=await g[W.findKey(g,P)||"text"](U,N);return!T&&se&&se(),await new Promise(($,G)=>{Ox($,G,{data:F,headers:Zt.from(U.headers),status:U.status,statusText:U.statusText,config:N,request:te})})}catch(ae){throw se&&se(),ae&&ae.name==="TypeError"&&/Load failed|fetch/i.test(ae.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,N,te,ae&&ae.response),{cause:ae.cause||ae}):ke.from(ae,ae&&ae.code,N,te,ae&&ae.response)}}},z1=new Map,zx=e=>{let t=e&&e.env||{};const{fetch:r,Request:i,Response:o}=t,l=[i,o,r];let d=l.length,h=d,m,p,b=z1;for(;h--;)m=l[h],p=b.get(m),p===void 0&&b.set(m,p=h?new Map:I1(t)),b=p;return p};zx();const Bu={http:e1,xhr:L1,fetch:{get:zx}};W.forEach(Bu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Rf=e=>`- ${e}`,D1=e=>W.isFunction(e)||e===null||e===!1;function F1(e,t){e=W.isArray(e)?e:[e];const{length:r}=e;let i,o;const l={};for(let d=0;d<r;d++){i=e[d];let h;if(o=i,!D1(i)&&(o=Bu[(h=String(i)).toLowerCase()],o===void 0))throw new ke(`Unknown adapter '${h}'`);if(o&&(W.isFunction(o)||(o=o.get(t))))break;l[h||"#"+d]=o}if(!o){const d=Object.entries(l).map(([m,p])=>`adapter ${m} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=r?d.length>1?`since :
`+d.map(Rf).join(`
`):" "+Rf(d[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return o}const Dx={getAdapter:F1,adapters:Bu};function Lc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fa(null,e)}function Of(e){return Lc(e),e.headers=Zt.from(e.headers),e.data=Ec.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Dx.getAdapter(e.adapter||ma.adapter,e)(e).then(function(i){return Lc(e),i.data=Ec.call(e,e.transformResponse,i),i.headers=Zt.from(i.headers),i},function(i){return Rx(i)||(Lc(e),i&&i.response&&(i.response.data=Ec.call(e,e.transformResponse,i.response),i.response.headers=Zt.from(i.response.headers))),Promise.reject(i)})}const Fx="1.13.5",vl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{vl[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Af={};vl.transitional=function(t,r,i){function o(l,d){return"[Axios v"+Fx+"] Transitional option '"+l+"'"+d+(i?". "+i:"")}return(l,d,h)=>{if(t===!1)throw new ke(o(d," has been removed"+(r?" in "+r:"")),ke.ERR_DEPRECATED);return r&&!Af[d]&&(Af[d]=!0,console.warn(o(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(l,d,h):!0}};vl.spelling=function(t){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function B1(e,t,r){if(typeof e!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const l=i[o],d=t[l];if(d){const h=e[l],m=h===void 0||d(h,l,e);if(m!==!0)throw new ke("option "+l+" must be "+m,ke.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ke("Unknown option "+l,ke.ERR_BAD_OPTION)}}const vo={assertOptions:B1,validators:vl},en=vo.validators;let Vs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new jf,response:new jf}}async request(t,r){try{return await this._request(t,r)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Xs(this.defaults,r);const{transitional:i,paramsSerializer:o,headers:l}=r;i!==void 0&&vo.assertOptions(i,{silentJSONParsing:en.transitional(en.boolean),forcedJSONParsing:en.transitional(en.boolean),clarifyTimeoutError:en.transitional(en.boolean),legacyInterceptorReqResOrdering:en.transitional(en.boolean)},!1),o!=null&&(W.isFunction(o)?r.paramsSerializer={serialize:o}:vo.assertOptions(o,{encode:en.function,serialize:en.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),vo.assertOptions(r,{baseUrl:en.spelling("baseURL"),withXsrfToken:en.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=l&&W.merge(l.common,l[r.method]);l&&W.forEach(["delete","get","head","post","put","patch","common"],N=>{delete l[N]}),r.headers=Zt.concat(d,l);const h=[];let m=!0;this.interceptors.request.forEach(function(y){if(typeof y.runWhen=="function"&&y.runWhen(r)===!1)return;m=m&&y.synchronous;const C=r.transitional||Du;C&&C.legacyInterceptorReqResOrdering?h.unshift(y.fulfilled,y.rejected):h.push(y.fulfilled,y.rejected)});const p=[];this.interceptors.response.forEach(function(y){p.push(y.fulfilled,y.rejected)});let b,g=0,S;if(!m){const N=[Of.bind(this),void 0];for(N.unshift(...h),N.push(...p),S=N.length,b=Promise.resolve(r);g<S;)b=b.then(N[g++],N[g++]);return b}S=h.length;let w=r;for(;g<S;){const N=h[g++],y=h[g++];try{w=N(w)}catch(C){y.call(this,C);break}}try{b=Of.call(this,w)}catch(N){return Promise.reject(N)}for(g=0,S=p.length;g<S;)b=b.then(p[g++],p[g++]);return b}getUri(t){t=Xs(this.defaults,t);const r=Ax(t.baseURL,t.url,t.allowAbsoluteUrls);return Tx(r,t.params,t.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(t){Vs.prototype[t]=function(r,i){return this.request(Xs(i||{},{method:t,url:r,data:(i||{}).data}))}});W.forEach(["post","put","patch"],function(t){function r(i){return function(l,d,h){return this.request(Xs(h||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}Vs.prototype[t]=r(),Vs.prototype[t+"Form"]=r(!0)});let U1=class Bx{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const d=new Promise(h=>{i.subscribe(h),l=h}).then(o);return d.cancel=function(){i.unsubscribe(l)},d},t(function(l,d,h){i.reason||(i.reason=new fa(l,d,h),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=i=>{t.abort(i)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Bx(function(o){t=o}),cancel:t}}};function $1(e){return function(r){return e.apply(null,r)}}function Z1(e){return W.isObject(e)&&e.isAxiosError===!0}const Rd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Rd).forEach(([e,t])=>{Rd[t]=e});function Ux(e){const t=new Vs(e),r=bx(Vs.prototype.request,t);return W.extend(r,Vs.prototype,t,{allOwnKeys:!0}),W.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return Ux(Xs(e,o))},r}const it=Ux(ma);it.Axios=Vs;it.CanceledError=fa;it.CancelToken=U1;it.isCancel=Rx;it.VERSION=Fx;it.toFormData=yl;it.AxiosError=ke;it.Cancel=it.CanceledError;it.all=function(t){return Promise.all(t)};it.spread=$1;it.isAxiosError=Z1;it.mergeConfig=Xs;it.AxiosHeaders=Zt;it.formToJSON=e=>Mx(W.isHTMLForm(e)?new FormData(e):e);it.getAdapter=Dx.getAdapter;it.HttpStatusCode=Rd;it.default=it;const{Axios:Vj,AxiosError:qj,CanceledError:Gj,isCancel:Kj,CancelToken:Qj,VERSION:Yj,all:Jj,Cancel:Xj,isAxiosError:eN,spread:tN,toFormData:nN,AxiosHeaders:sN,HttpStatusCode:rN,formToJSON:iN,getAdapter:aN,mergeConfig:oN}=it,H1="https://woman-safety-app-euae.onrender.com/api",re=it.create({baseURL:H1,headers:{"Content-Type":"application/json"}});re.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));re.interceptors.response.use(e=>e,e=>{var t,r;return((t=e.response)==null?void 0:t.status)===401&&((((r=e.config)==null?void 0:r.url)||"").includes("/login")||(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("role"),window.location.href="/login")),Promise.reject(e)});const Zn={registerUser:e=>re.post("/auth/user/register",e),loginUser:e=>re.post("/auth/user/login",e),verifyEmail:e=>re.post("/auth/user/verify-email",e),resendOTP:e=>re.post("/auth/user/resend-otp",e),getUserProfile:()=>re.get("/auth/user/profile"),updateUserProfile:e=>re.put("/auth/user/profile",e),updateProfilePhoto:e=>re.put("/auth/user/profile/photo",{profilePhoto:e}),loginPolice:e=>re.post("/auth/police/login",e),getPoliceProfile:()=>re.get("/auth/police/profile"),loginAdmin:e=>re.post("/auth/admin/login",e),getAdminProfile:()=>re.get("/auth/admin/profile")},ms={getGuardians:()=>re.get("/guardians"),addGuardian:e=>re.post("/guardians",e),updateGuardian:(e,t)=>re.put(`/guardians/${e}`,t),deleteGuardian:e=>re.delete(`/guardians/${e}`)},to={updateLocation:e=>re.put("/sos/location",e),getLocation:()=>re.get("/sos/location"),triggerSOS:e=>re.post("/sos/alert",e),getUserActiveAlert:()=>re.get("/sos/alert/active"),getActiveAlerts:()=>re.get("/sos/alerts"),assignOfficers:(e,t)=>re.put(`/sos/alerts/${e}/assign-officers`,{stationId:t}),resolveAlert:e=>re.put(`/sos/alerts/${e}/resolve`),cancelAlert:e=>re.put(`/sos/alerts/${e}/cancel`)},If={createComplaint:e=>re.post("/complaints",e),getUserComplaints:()=>re.get("/complaints/my-complaints"),getStationComplaints:()=>re.get("/complaints/station"),updateComplaintStatus:(e,t)=>re.put(`/complaints/${e}/status`,{status:t}),getAllComplaints:()=>re.get("/complaints/all"),getEmergencyLocations:()=>re.get("/complaints/emergency-locations")},ns={createTrip:e=>re.post("/travel-buddy",e),findTrips:e=>re.get("/travel-buddy/find",{params:e}),getMyTrips:()=>re.get("/travel-buddy/my-trips"),sendRequest:(e,t)=>re.post(`/travel-buddy/${e}/request`,t),acceptRequest:(e,t)=>re.put(`/travel-buddy/${e}/request/${t}/accept`),rejectRequest:(e,t)=>re.put(`/travel-buddy/${e}/request/${t}/reject`),cancelTrip:e=>re.put(`/travel-buddy/${e}/cancel`),completeTrip:e=>re.put(`/travel-buddy/${e}/complete`)},ss={getMessages:(e,t)=>{const r=t?`?since=${t}`:"";return re.get(`/travel-buddy-chat/${e}/messages${r}`)},sendMessage:(e,t)=>re.post(`/travel-buddy-chat/${e}/messages`,{message:t,messageType:"text"}),sendAudioMessage:(e,t,r)=>re.post(`/travel-buddy-chat/${e}/messages`,{messageType:"audio",audioData:t,audioDuration:r}),sendLocationMessage:(e,t)=>re.post(`/travel-buddy-chat/${e}/messages`,{messageType:"location",location:t}),getChatInfo:e=>re.get(`/travel-buddy-chat/${e}/info`)},rs={getMessages:(e,t)=>{const r=t?`?since=${t}`:"";return re.get(`/chat/${e}/messages${r}`)},sendMessage:(e,t)=>re.post(`/chat/${e}/messages`,{message:t,messageType:"text"}),sendAudioMessage:(e,t,r)=>re.post(`/chat/${e}/messages`,{messageType:"audio",audioData:t,audioDuration:r}),sendLocationMessage:(e,t)=>re.post(`/chat/${e}/messages`,{messageType:"location",location:t}),getChatInfo:e=>re.get(`/chat/${e}/info`)},W1=()=>{const{isAuthenticated:e,user:t,role:r,logout:i,updateUser:o}=Mn(),[l,d]=v.useState(!1);v.useEffect(()=>{(async()=>{var S;if(e&&r==="police")try{const w=await Zn.getPoliceProfile(),N=(S=w==null?void 0:w.data)==null?void 0:S.data;N&&N.profilePhoto!==(t==null?void 0:t.profilePhoto)&&o({...t,profilePhoto:N.profilePhoto})}catch(w){console.error("Failed to refresh police profile:",w)}})()},[e,r]);const h=()=>{i(),d(!1)},m=()=>{switch(r){case"user":return"/user/dashboard";case"police":return"/police/dashboard";case"admin":return"/admin/dashboard";default:return"/"}},p=g=>{if(!g||typeof g!="string")return"?";const S=g.trim().split(/\s+/);return S.length>=2?(S[0][0]+S[S.length-1][0]).toUpperCase():g.slice(0,2).toUpperCase()},b={user:"bg-emerald-100 text-emerald-700",police:"bg-blue-100 text-blue-700",admin:"bg-amber-100 text-amber-700"}[r]||"bg-gray-100 text-gray-700";return s.jsxs("nav",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100 shadow-sm sticky top-0 z-50",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16 gap-4",children:[s.jsx("div",{className:"flex items-center flex-shrink-0",children:s.jsxs(ht,{to:e?m():"/",className:"flex items-center gap-3 group",children:[s.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-lg bg-red-500 text-white shadow-md shadow-red-500/25 group-hover:shadow-red-500/40 transition-shadow",children:s.jsx(qt,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-xl font-bold text-gray-900 tracking-tight",children:"Women Safety"})]})}),s.jsx("div",{className:"hidden md:flex items-center flex-shrink-0 gap-5",children:e?s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsxs(ht,{to:m(),className:"flex items-center gap-2 text-gray-600 hover:text-red-600 px-3 py-2.5 rounded-lg text-sm font-medium hover:bg-red-50/80 transition-colors",children:[s.jsx(xf,{className:"h-4 w-4 flex-shrink-0"}),"Dashboard"]}),s.jsx("div",{className:"h-7 w-px bg-gray-200 flex-shrink-0","aria-hidden":!0}),s.jsxs("div",{className:"flex items-center gap-4 pl-0.5",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[t!=null&&t.profilePhoto?s.jsx("img",{src:t.profilePhoto,alt:t==null?void 0:t.name,className:"flex-shrink-0 w-9 h-9 rounded-full object-cover shadow-inner"}):s.jsx("div",{className:"flex-shrink-0 w-9 h-9 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center text-white text-sm font-semibold shadow-inner",children:p(t==null?void 0:t.name)}),s.jsxs("div",{className:"min-w-0 hidden sm:block",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate leading-tight",children:t==null?void 0:t.name}),s.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-md text-xs font-medium capitalize ${b}`,children:r})]})]}),s.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:text-red-600 hover:bg-red-50/80 border border-transparent hover:border-red-100 transition-all flex-shrink-0",title:"Log out",children:[s.jsx(yf,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"hidden lg:inline",children:"Logout"})]})]})]}):s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(ht,{to:"/login",className:"text-gray-600 hover:text-red-600 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors",children:"Login"}),s.jsx(ht,{to:"/register",className:"bg-red-500 text-white hover:bg-red-600 px-5 py-2.5 rounded-lg text-sm font-semibold shadow-md shadow-red-500/25 hover:shadow-red-500/40 transition-all",children:"Register"})]})}),s.jsx("div",{className:"md:hidden flex items-center",children:s.jsx("button",{onClick:()=>d(!l),className:"p-2 rounded-lg text-gray-600 hover:text-red-600 hover:bg-gray-100 transition-colors","aria-label":l?"Close menu":"Open menu",children:l?s.jsx(Jn,{className:"h-6 w-6"}):s.jsx(gx,{className:"h-6 w-6"})})})]})}),l&&s.jsx("div",{className:"md:hidden border-t border-gray-100 bg-gray-50/50",children:s.jsx("div",{className:"px-4 py-4 space-y-2",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-white border border-gray-100 shadow-sm mb-3",children:[t!=null&&t.profilePhoto?s.jsx("img",{src:t.profilePhoto,alt:t==null?void 0:t.name,className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center text-white font-semibold",children:p(t==null?void 0:t.name)}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"font-semibold text-gray-900 truncate",children:t==null?void 0:t.name}),s.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-md text-xs font-medium capitalize ${b}`,children:r})]})]}),s.jsxs(ht,{to:m(),onClick:()=>d(!1),className:"flex items-center gap-2 text-gray-700 hover:bg-red-50 hover:text-red-600 px-4 py-3 rounded-lg text-base font-medium transition-colors",children:[s.jsx(xf,{className:"h-4 w-4"}),"Dashboard"]}),s.jsxs("button",{onClick:h,className:"w-full flex items-center gap-2 text-red-600 hover:bg-red-50 px-4 py-3 rounded-lg text-base font-medium transition-colors",children:[s.jsx(yf,{className:"h-4 w-4"}),"Logout"]})]}):s.jsxs(s.Fragment,{children:[s.jsx(ht,{to:"/login",onClick:()=>d(!1),className:"flex items-center gap-2 text-gray-700 hover:bg-red-50 hover:text-red-600 px-4 py-3 rounded-lg text-base font-medium transition-colors",children:"Login"}),s.jsx(ht,{to:"/register",onClick:()=>d(!1),className:"flex items-center gap-2 bg-red-500 text-white hover:bg-red-600 px-4 py-3 rounded-lg text-base font-medium transition-colors",children:"Register"})]})})})]})},V1=()=>{const e=[{icon:vn,title:"Emergency SOS",description:"One-tap emergency alert to notify your guardians with your exact location"},{icon:Te,title:"Nearby Police Stations",description:"Find police stations within 5km radius with directions"},{icon:He,title:"Complaint Management",description:"File and track complaints with real-time status updates"},{icon:We,title:"Guardian Network",description:"Add trusted contacts who will receive emergency alerts"}];return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-16 lg:py-20",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx(qt,{className:"h-20 w-20 text-red-600"})}),s.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-6",children:"Women Safety & Security System"}),s.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Your safety companion. Instant emergency alerts, nearby police stations, and complaint tracking - all in one place."}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[s.jsx(ht,{to:"/register",className:"bg-red-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors text-lg",children:"Get Started"}),s.jsx(ht,{to:"/login",className:"bg-white text-red-600 px-8 py-3 rounded-lg font-semibold border-2 border-red-600 hover:bg-red-50 transition-colors text-lg",children:"Login"})]})]}),s.jsx("div",{className:"mt-12 sm:mt-20 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:e.map((t,r)=>{const i=t.icon;return s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(i,{className:"h-12 w-12 text-red-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 text-center",children:t.title}),s.jsx("p",{className:"text-gray-600 text-center",children:t.description})]},r)})}),s.jsx("div",{className:"mt-12 sm:mt-20 bg-white rounded-2xl shadow-xl p-6 sm:p-8 lg:p-12",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-4xl font-bold text-red-600",children:"24/7"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Emergency Support"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-4xl font-bold text-red-600",children:"Instant"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Alert Notifications"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-4xl font-bold text-red-600",children:"Secure"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Data Protection"})]})]})}),s.jsxs("div",{className:"mt-12 sm:mt-20 text-center bg-red-600 rounded-2xl p-6 sm:p-8 lg:p-12 text-white",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Stay Safe, Stay Connected"}),s.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Join thousands of women who trust our platform for their safety"}),s.jsx(ht,{to:"/register",className:"inline-block bg-white text-red-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors text-lg",children:"Create Free Account"})]})]})})},q1=()=>{const e=sr(),{login:t}=Mn(),[r,i]=v.useState("user"),[o,l]=v.useState({email:"",password:""}),[d,h]=v.useState(!1),[m,p]=v.useState({}),[b,g]=v.useState(""),S=C=>/^\S+@\S+\.\S+$/.test(C),w=C=>{const{name:_,value:x}=C.target;l({...o,[_]:x}),m[_]&&p(k=>({...k,[_]:""})),b&&g("")},N=C=>{const{name:_,value:x}=C.target;_==="email"&&x&&!S(x)&&p(k=>({...k,email:"Please enter a valid email address"})),_==="password"&&x&&x.length<6&&p(k=>({...k,password:"Password must be at least 6 characters"}))},y=async C=>{var x,k,E,A,M;C.preventDefault();const _={};if(o.email.trim()?S(o.email)||(_.email="Please enter a valid email address"):_.email="Email is required",o.password?o.password.length<6&&(_.password="Password must be at least 6 characters"):_.password="Password is required",Object.keys(_).length>0){p(_);return}h(!0),g("");try{let P;switch(r){case"user":P=await Zn.loginUser(o);break;case"police":P=await Zn.loginPolice(o);break;case"admin":P=await Zn.loginAdmin(o);break;default:throw new Error("Invalid user type")}const{data:I}=P.data;t(I,I.token,I.role),ee.success("Login successful!")}catch(P){if(console.error("Login error:",P),((x=P.response)==null?void 0:x.status)===403&&((E=(k=P.response)==null?void 0:k.data)!=null&&E.requiresVerification)){ee.info(P.response.data.message),e("/verify-email",{state:{email:o.email}});return}const I=((M=(A=P.response)==null?void 0:A.data)==null?void 0:M.message)||"Login failed. Please try again.";g(I),ee.error(I)}finally{h(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(qt,{className:"h-16 w-16 text-red-600"})}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),s.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Or"," ",s.jsx(ht,{to:"/register",className:"font-medium text-red-600 hover:text-red-500",children:"create a new account"})]})]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{type:"button",onClick:()=>i("user"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="user"?"bg-red-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"User"}),s.jsx("button",{type:"button",onClick:()=>i("police"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="police"?"bg-red-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Police"}),s.jsx("button",{type:"button",onClick:()=>i("admin"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="admin"?"bg-red-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Admin"})]}),s.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-xl shadow-lg",onSubmit:y,children:[b&&s.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-lg p-3 flex items-start gap-2",children:[s.jsx(vn,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-700",children:b})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Gn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:o.email,onChange:w,onBlur:N,className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-red-500 focus:border-red-500 ${m.email?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:"you@example.com"})]}),m.email&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:m.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Vo,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:o.password,onChange:w,onBlur:N,className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-red-500 focus:border-red-500 ${m.password?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:""})]}),m.password&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:m.password})]})]}),s.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Sign in"})]})]})})},G1=()=>{const e=sr(),[t,r]=v.useState({name:"",email:"",password:"",confirmPassword:"",phone:""}),[i,o]=v.useState(!1),[l,d]=v.useState({}),h=S=>/^\S+@\S+\.\S+$/.test(S),m=S=>/^\d{10}$/.test(S),p=S=>{const{name:w,value:N}=S.target;r({...t,[w]:N}),l[w]&&d(y=>({...y,[w]:""}))},b=S=>{const{name:w,value:N}=S.target;w==="email"&&N&&!h(N)&&d(y=>({...y,email:"Please enter a valid email address"})),w==="phone"&&N&&!m(N)&&d(y=>({...y,phone:"Phone number must be exactly 10 digits"})),w==="password"&&N&&N.length<6&&d(y=>({...y,password:"Password must be at least 6 characters"})),w==="confirmPassword"&&N&&t.password&&N!==t.password&&d(y=>({...y,confirmPassword:"Passwords do not match"}))},g=async S=>{var N,y;S.preventDefault();const w={};if(t.name.trim()||(w.name="Name is required"),t.email.trim()?h(t.email)||(w.email="Please enter a valid email address"):w.email="Email is required",t.phone.trim()?m(t.phone)||(w.phone="Phone number must be exactly 10 digits"):w.phone="Phone number is required",t.password?t.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",Object.keys(w).length>0){d(w);return}o(!0);try{const{confirmPassword:C,..._}=t;await Zn.registerUser(_),ee.success("Registration successful! Please verify your email."),e("/verify-email",{state:{email:t.email}})}catch(C){console.error("Registration error:",C),ee.error(((y=(N=C.response)==null?void 0:N.data)==null?void 0:y.message)||"Registration failed. Please try again.")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(qt,{className:"h-16 w-16 text-red-600"})}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Create your account"}),s.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Already have an account?"," ",s.jsx(ht,{to:"/login",className:"font-medium text-red-600 hover:text-red-500",children:"Sign in"})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex gap-3",children:[s.jsx(vn,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Police Accounts"}),s.jsx("p",{children:"Police officer accounts can only be created by administrators through the admin panel. If you are a police officer, please contact your administrator."})]})]}),s.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-xl shadow-lg",onSubmit:g,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(wt,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:t.name,onChange:p,className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-red-500 focus:border-red-500 ${l.name?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:"Jane Doe"})]}),l.name&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.name})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Gn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:p,onBlur:b,className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-red-500 focus:border-red-500 ${l.email?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:"you@example.com"})]}),l.email&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Et,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:t.phone,onChange:p,onBlur:b,className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-red-500 focus:border-red-500 ${l.phone?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:"1234567890"})]}),l.phone&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.phone})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Vo,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:t.password,onChange:p,onBlur:b,className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-red-500 focus:border-red-500 ${l.password?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:""})]}),l.password?s.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.password}):s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum 6 characters"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Vo,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:t.confirmPassword,onChange:p,onBlur:b,className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-red-500 focus:border-red-500 ${l.confirmPassword?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:""})]}),l.confirmPassword&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.confirmPassword})]})]}),s.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Create Account"})]}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Note:"})," This registration is for general users only. Police officer and admin accounts are created through secure administrative processes."]})})]})})},K1=()=>{var A;const e=nr(),t=sr(),r=((A=e.state)==null?void 0:A.email)||"",[i,o]=v.useState(["","","","","",""]),[l,d]=v.useState(!1),[h,m]=v.useState(!1),[p,b]=v.useState(!1),[g,S]=v.useState(""),[w,N]=v.useState(0),y=v.useRef([]);v.useEffect(()=>{r||t("/register")},[r,t]),v.useEffect(()=>{if(w>0){const M=setTimeout(()=>N(w-1),1e3);return()=>clearTimeout(M)}},[w]),v.useEffect(()=>{y.current[0]&&y.current[0].focus()},[]);const C=(M,P)=>{var z;if(P&&!/^\d$/.test(P))return;const I=[...i];I[M]=P,o(I),S(""),P&&M<5&&((z=y.current[M+1])==null||z.focus())},_=(M,P)=>{var I;P.key==="Backspace"&&!i[M]&&M>0&&((I=y.current[M-1])==null||I.focus())},x=M=>{var I;M.preventDefault();const P=M.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);P.length===6&&(o(P.split("")),(I=y.current[5])==null||I.focus())},k=async M=>{var I,z;M.preventDefault();const P=i.join("");if(P.length!==6){S("Please enter the complete 6-digit OTP");return}d(!0),S("");try{const V=await Zn.verifyEmail({email:r,otp:P});b(!0),ee.success(V.data.message||"Email verified successfully!"),setTimeout(()=>t("/login"),2e3)}catch(V){const D=((z=(I=V.response)==null?void 0:I.data)==null?void 0:z.message)||"Verification failed. Please try again.";S(D),ee.error(D)}finally{d(!1)}},E=async()=>{var M,P,I;if(!(w>0)){m(!0),S("");try{const z=await Zn.resendOTP({email:r});ee.success(z.data.message||"New OTP sent!"),o(["","","","","",""]),N(60),(M=y.current[0])==null||M.focus()}catch(z){const V=((I=(P=z.response)==null?void 0:P.data)==null?void 0:I.message)||"Failed to resend OTP.";S(V),ee.error(V)}finally{m(!1)}}};return r?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(qt,{className:"h-16 w-16 text-red-600"})}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Verify Your Email"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"We've sent a 6-digit OTP to"}),s.jsx("p",{className:"text-sm font-semibold text-red-600",children:r})]}),p?s.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center space-y-4",children:[s.jsx(dt,{className:"h-16 w-16 text-green-500 mx-auto"}),s.jsx("h3",{className:"text-xl font-bold text-green-700",children:"Email Verified!"}),s.jsx("p",{className:"text-gray-600",children:"Redirecting to login page..."})]}):s.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-xl shadow-lg",onSubmit:k,children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"bg-red-100 p-4 rounded-full",children:s.jsx(Gn,{className:"h-8 w-8 text-red-600"})})}),s.jsx("p",{className:"text-center text-sm text-gray-600",children:"Enter the 6-digit verification code"}),s.jsx("div",{className:"flex justify-center gap-2",onPaste:x,children:i.map((M,P)=>s.jsx("input",{ref:I=>y.current[P]=I,type:"text",inputMode:"numeric",maxLength:1,value:M,onChange:I=>C(P,I.target.value),onKeyDown:I=>_(P,I),className:`w-10 h-12 sm:w-12 sm:h-14 text-center text-xl sm:text-2xl font-bold border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${g?"border-red-400 bg-red-50":M?"border-red-500 bg-red-50":"border-gray-300"}`},P))}),g&&s.jsx("p",{className:"text-center text-sm text-red-600 font-medium",children:g}),s.jsx("button",{type:"submit",disabled:l||i.join("").length!==6,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Verify Email"}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Didn't receive the code?"," ",s.jsxs("button",{type:"button",onClick:E,disabled:h||w>0,className:"font-medium text-red-600 hover:text-red-500 disabled:text-gray-400 disabled:cursor-not-allowed inline-flex items-center gap-1",children:[h?s.jsx(on,{className:"h-3 w-3 animate-spin"}):null,w>0?`Resend in ${w}s`:"Resend OTP"]})]})})]})]})}):null},Ge=({role:e})=>{const t=nr(),[r,i]=v.useState(!1);v.useEffect(()=>{i(!1)},[t.pathname]),v.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]);const o=[{name:"Dashboard",path:"/user/dashboard",icon:Cc},{name:"SOS Alert",path:"/user/sos",icon:vn},{name:"Guardians",path:"/user/guardians",icon:We},{name:"Nearby Police",path:"/user/nearby-police",icon:Te},{name:"File Complaint",path:"/user/create-complaint",icon:He},{name:"My Complaints",path:"/user/complaints",icon:He},{name:"Travel Buddy",path:"/user/travel-buddy",icon:We},{name:"Profile",path:"/user/profile",icon:wt}],l=[{name:"Dashboard",path:"/police/dashboard",icon:Cc},{name:"Complaints",path:"/police/complaints",icon:He},{name:"SOS Alerts",path:"/police/sos-alerts",icon:Be}],d=[{name:"Dashboard",path:"/admin/dashboard",icon:Cc},{name:"Manage Users",path:"/admin/users",icon:We},{name:"Police Stations",path:"/admin/stations",icon:o_},{name:"Police Accounts",path:"/admin/police-accounts",icon:f_},{name:"All Complaints",path:"/admin/complaints",icon:He},{name:"Emergency Locations",path:"/admin/emergency-locations",icon:Ed}],m=(()=>{switch(e){case"user":return o;case"police":return l;case"admin":return d;default:return[]}})(),p=s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(qt,{className:"h-5 w-5 text-red-600"}),s.jsxs("span",{className:"text-sm font-semibold text-gray-700 uppercase",children:[e," Panel"]})]}),s.jsx("button",{onClick:()=>i(!1),className:"md:hidden p-1 rounded-lg text-gray-500 hover:text-red-600 hover:bg-gray-100","aria-label":"Close sidebar",children:s.jsx(Jn,{className:"h-5 w-5"})})]})}),s.jsx("nav",{className:"space-y-1",children:m.map(b=>{const g=b.icon,S=t.pathname===b.path;return s.jsxs(ht,{to:b.path,className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${S?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50 hover:text-red-600"}`,children:[s.jsx(g,{className:"h-5 w-5"}),s.jsx("span",{children:b.name})]},b.path)})})]});return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>i(!0),className:"md:hidden fixed bottom-4 left-4 z-50 bg-red-600 text-white p-3 rounded-full shadow-lg hover:bg-red-700 transition-colors","aria-label":"Open sidebar",children:s.jsx(gx,{className:"h-6 w-6"})}),r&&s.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>i(!1)}),s.jsx("div",{className:`md:hidden fixed left-0 top-0 h-full w-64 bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-in-out overflow-y-auto ${r?"translate-x-0":"-translate-x-full"}`,children:s.jsx("div",{className:"pt-16",children:p})}),s.jsx("div",{className:"hidden md:block w-64 bg-white shadow-lg min-h-[calc(100vh-4rem)] fixed left-0 top-16 overflow-y-auto",children:p})]})},Q1=({icon:e,title:t,value:r,color:i,iconBg:o,link:l})=>s.jsx(ht,{to:l,className:"block",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 hover:border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(e,{className:`w-5 h-5 ${i} mr-2`}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t})]}),s.jsx("div",{className:"flex items-baseline",children:s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r})})]}),s.jsx("div",{className:`p-3 rounded-xl ${o} shadow-inner`,children:s.jsx(e,{className:"w-7 h-7 text-white"})})]})})}),Y1=()=>{var _;const{user:e}=Mn(),[t,r]=v.useState({guardians:0,complaints:0,nearbyStations:0}),[i,o]=v.useState(!0),[l,d]=v.useState([]),[h,m]=v.useState(!0);v.useEffect(()=>{N()},[]),v.useEffect(()=>{p()},[]),v.useEffect(()=>{const x=()=>{document.visibilityState==="visible"&&p()};return document.addEventListener("visibilitychange",x),()=>document.removeEventListener("visibilitychange",x)},[]);const p=async()=>{var x,k;m(!0);try{const E=await If.getUserComplaints(),A=((x=E==null?void 0:E.data)==null?void 0:x.data)??(E==null?void 0:E.data)??[],P=(Array.isArray(A)?A:[]).slice(0,8).map(te=>{const se=te.description||"",ge=se.length>50?se.substring(0,50)+"...":se,ae=(te.status||"Pending").toString().toLowerCase(),U={pending:"Pending","in progress":"In Progress",resolved:"Resolved"}[ae]||"Pending",T=te.createdAt,F=T!=null?typeof T=="string"||typeof T=="number"?new Date(T):T:null;return{id:te._id,type:"complaint",title:"Complaint filed",description:ge||"No description",status:U,timestamp:F&&!isNaN(F.getTime())?F.toISOString():null,icon:He,color:"purple",link:"/user/complaints"}});let I=0;try{const te=await ms.getGuardians(),se=((k=te==null?void 0:te.data)==null?void 0:k.data)??(te==null?void 0:te.data)??[];I=Array.isArray(se)?se.length:0}catch{}const z=[...P];I>0&&z.push({id:"guardians-summary",type:"guardians",title:"Emergency guardians",description:`${I} guardian${I!==1?"s":""} set up`,timestamp:null,icon:We,color:"green",link:"/user/guardians"});const V=z.filter(te=>te.timestamp!=null).sort((te,se)=>new Date(se.timestamp).getTime()-new Date(te.timestamp).getTime()),D=z.find(te=>te.id==="guardians-summary"),J=D?[...V.slice(0,4),D]:V.slice(0,5);d(J)}catch(E){console.error("Error fetching recent activity:",E),d([])}finally{m(!1)}},b=x=>{if(x==null||x==="")return"";const k=new Date,E=new Date(x);if(isNaN(E.getTime()))return"";const A=Math.floor((k-E)/1e3);if(A<0||A<60)return"Just now";if(A<3600)return`${Math.floor(A/60)} min ago`;if(A<86400)return`${Math.floor(A/3600)} hr ago`;if(A<604800){const M=Math.floor(A/86400);return`${M} day${M!==1?"s":""} ago`}return E.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},g=x=>{if(x==null||x==="")return null;const k=new Date(x);return isNaN(k.getTime())?null:k.toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})},S=x=>x==="green"?"bg-green-100":"bg-purple-100",w=x=>x==="green"?"text-green-600":"text-purple-600",N=async()=>{var x,k;try{let E=0;try{const z=await ms.getGuardians(),V=((x=z==null?void 0:z.data)==null?void 0:x.data)??(z==null?void 0:z.data)??[];E=Array.isArray(V)?V.length:0}catch{}const A=await If.getUserComplaints(),M=((k=A==null?void 0:A.data)==null?void 0:k.data)??(A==null?void 0:A.data)??[],P=Array.isArray(M)?M.length:0;let I=0;navigator.geolocation?navigator.geolocation.getCurrentPosition(async z=>{var V;try{I=((V=(await re.get("/stations/nearby",{params:{lat:z.coords.latitude,lng:z.coords.longitude}})).data.data)==null?void 0:V.length)||0,r({guardians:E,complaints:P,nearbyStations:I})}catch(D){console.error("Error fetching nearby stations:",D),r({guardians:E,complaints:P,nearbyStations:0})}},()=>{r({guardians:E,complaints:P,nearbyStations:0})}):r({guardians:E,complaints:P,nearbyStations:0}),o(!1)}catch(E){console.error("Error fetching dashboard stats:",E),o(!1)}},y=[{title:"File Complaint",description:"Report an incident",icon:He,link:"/user/create-complaint",color:"bg-purple-600",hoverColor:"hover:bg-purple-700"},{title:"View Guardians",description:"Manage emergency contacts",icon:We,link:"/user/guardians",color:"bg-blue-600",hoverColor:"hover:bg-blue-700"},{title:"SOS Alert",description:"Send emergency signal",icon:vn,link:"/user/sos",color:"bg-red-600",hoverColor:"hover:bg-red-700"},{title:"Find Stations",description:"Locate nearby police",icon:Te,link:"/user/nearby-police",color:"bg-green-600",hoverColor:"hover:bg-green-700"}],C=[{name:"My Guardians",value:t.guardians,icon:We,color:"text-blue-500",iconBg:"bg-gradient-to-br from-blue-400 to-blue-600",link:"/user/guardians"},{name:"My Complaints",value:t.complaints,icon:He,color:"text-orange-500",iconBg:"bg-gradient-to-br from-orange-400 to-orange-600",link:"/user/complaints"},{name:"Nearby Stations",value:t.nearbyStations,icon:Te,color:"text-green-500",iconBg:"bg-gradient-to-br from-green-400 to-green-600",link:"/user/nearby-police"}];return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:"user"}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",((_=e==null?void 0:e.name)==null?void 0:_.split(" ")[0])||"User","!"]}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Your safety is our priority. Here's your safety overview and quick access to emergency features."})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:i?[1,2,3].map(x=>s.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 animate-pulse",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2 w-16"}),s.jsx("div",{className:"h-8 bg-gray-300 rounded w-12"})]}),s.jsx("div",{className:"p-3 bg-gray-300 rounded-lg"})]})},x)):C.map((x,k)=>s.jsx(Q1,{icon:x.icon,title:x.name,value:x.value,color:x.color,iconBg:x.iconBg,link:x.link},k))}),s.jsxs("div",{className:"mb-8 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-100",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Pd,{className:"w-6 h-6 text-purple-600 mr-3"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quick Actions"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map((x,k)=>{const E=x.icon;return s.jsx(ht,{to:x.link,className:"block group",children:s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 group-hover:border-purple-200 group-hover:shadow-purple-100",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:`w-12 h-12 ${x.color} rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300`,children:s.jsx(E,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:x.title}),s.jsx("p",{className:"text-sm text-gray-600",children:x.description}),s.jsx("div",{className:"mt-3",children:s.jsxs("span",{className:"inline-flex items-center text-xs text-purple-600 font-medium",children:["Get Started",s.jsx(Gr,{className:"w-3 h-3 ml-1"})]})})]})})},k)})})]}),s.jsxs("div",{className:"mt-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activity"}),s.jsxs("button",{type:"button",onClick:()=>p(),disabled:h,className:"text-sm font-medium text-purple-600 hover:text-purple-700 disabled:opacity-50 flex items-center gap-1",children:[s.jsx(on,{className:`w-4 h-4 ${h?"animate-spin":""}`}),"Refresh"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:h?s.jsx("div",{className:"flex items-center justify-center py-10",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-purple-500 border-t-transparent"})}):l.length>0?s.jsx("div",{className:"space-y-0",children:l.map((x,k)=>{const E=x.icon,A=g(x.timestamp);return s.jsxs(ht,{to:x.link,className:`flex items-center gap-3 py-3 px-2 -mx-2 rounded-lg hover:bg-gray-50 transition-colors ${k<l.length-1?"border-b border-gray-100":""}`,children:[s.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${S(x.color)}`,children:s.jsx(E,{className:`h-5 w-5 ${w(x.color)}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.title}),s.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-0.5 mt-0.5",children:[s.jsx("span",{className:"text-xs text-gray-500",children:b(x.timestamp)}),A&&s.jsxs("span",{className:"text-xs text-gray-400",children:[" ",A]})]}),x.description&&s.jsx("p",{className:"text-xs text-gray-600 mt-0.5 truncate",children:x.description}),x.status&&s.jsx("span",{className:`inline-block px-2 py-0.5 text-xs rounded-full mt-1 ${x.status==="Pending"?"bg-yellow-100 text-yellow-800":x.status==="In Progress"?"bg-blue-100 text-blue-800":x.status==="Resolved"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:x.status})]})]},x.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Pd,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No recent activity"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Your complaints and updates will appear here"})]})})]})]})]})};function $x(e,t){const r=v.useRef(t);v.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}function J1(e,t,r){t.center!==r.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==r.radius&&e.setRadius(t.radius)}const X1=1;function ej(e){return Object.freeze({__version:X1,map:e})}function Zx(e,t){return Object.freeze({...e,...t})}const Hx=v.createContext(null),Wx=Hx.Provider;function Uu(){const e=v.useContext(Hx);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Vx(e){function t(r,i){const{instance:o,context:l}=e(r).current;return v.useImperativeHandle(i,()=>o),r.children==null?null:Ie.createElement(Wx,{value:l},r.children)}return v.forwardRef(t)}function tj(e){function t(r,i){const[o,l]=v.useState(!1),{instance:d}=e(r,l).current;v.useImperativeHandle(i,()=>d),v.useEffect(function(){o&&d.update()},[d,o,r.children]);const h=d._contentNode;return h?Jg.createPortal(r.children,h):null}return v.forwardRef(t)}function nj(e){function t(r,i){const{instance:o}=e(r).current;return v.useImperativeHandle(i,()=>o),null}return v.forwardRef(t)}function $u(e,t){const r=v.useRef();v.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function bl(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}function sj(e,t){return function(i,o){const l=Uu(),d=e(bl(i,l),l);return $x(l.map,i.attribution),$u(d.current,i.eventHandlers),t(d.current,l,i,o),d}}var Od={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,i){i(t)})(vy,function(r){var i="1.9.4";function o(n){var a,c,u,f;for(c=1,u=arguments.length;c<u;c++){f=arguments[c];for(a in f)n[a]=f[a]}return n}var l=Object.create||function(){function n(){}return function(a){return n.prototype=a,new n}}();function d(n,a){var c=Array.prototype.slice;if(n.bind)return n.bind.apply(n,c.call(arguments,1));var u=c.call(arguments,2);return function(){return n.apply(a,u.length?u.concat(c.call(arguments)):arguments)}}var h=0;function m(n){return"_leaflet_id"in n||(n._leaflet_id=++h),n._leaflet_id}function p(n,a,c){var u,f,j,R;return R=function(){u=!1,f&&(j.apply(c,f),f=!1)},j=function(){u?f=arguments:(n.apply(c,arguments),setTimeout(R,a),u=!0)},j}function b(n,a,c){var u=a[1],f=a[0],j=u-f;return n===u&&c?n:((n-f)%j+j)%j+f}function g(){return!1}function S(n,a){if(a===!1)return n;var c=Math.pow(10,a===void 0?6:a);return Math.round(n*c)/c}function w(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function N(n){return w(n).split(/\s+/)}function y(n,a){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?l(n.options):{});for(var c in a)n.options[c]=a[c];return n.options}function C(n,a,c){var u=[];for(var f in n)u.push(encodeURIComponent(c?f.toUpperCase():f)+"="+encodeURIComponent(n[f]));return(!a||a.indexOf("?")===-1?"?":"&")+u.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function x(n,a){return n.replace(_,function(c,u){var f=a[u];if(f===void 0)throw new Error("No value provided for variable "+c);return typeof f=="function"&&(f=f(a)),f})}var k=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function E(n,a){for(var c=0;c<n.length;c++)if(n[c]===a)return c;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var P=0;function I(n){var a=+new Date,c=Math.max(0,16-(a-P));return P=a+c,window.setTimeout(n,c)}var z=window.requestAnimationFrame||M("RequestAnimationFrame")||I,V=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function D(n,a,c){if(c&&z===I)n.call(a);else return z.call(window,d(n,a))}function J(n){n&&V.call(window,n)}var te={__proto__:null,extend:o,create:l,bind:d,get lastId(){return h},stamp:m,throttle:p,wrapNum:b,falseFn:g,formatNum:S,trim:w,splitWords:N,setOptions:y,getParamString:C,template:x,isArray:k,indexOf:E,emptyImageUrl:A,requestFn:z,cancelFn:V,requestAnimFrame:D,cancelAnimFrame:J};function se(){}se.extend=function(n){var a=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,u=l(c);u.constructor=a,a.prototype=u;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(a[f]=this[f]);return n.statics&&o(a,n.statics),n.includes&&(ge(n.includes),o.apply(null,[u].concat(n.includes))),o(u,n),delete u.statics,delete u.includes,u.options&&(u.options=c.options?l(c.options):{},o(u.options,n.options)),u._initHooks=[],u.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,R=u._initHooks.length;j<R;j++)u._initHooks[j].call(this)}},a},se.include=function(n){var a=this.prototype.options;return o(this.prototype,n),n.options&&(this.prototype.options=a,this.mergeOptions(n.options)),this},se.mergeOptions=function(n){return o(this.prototype.options,n),this},se.addInitHook=function(n){var a=Array.prototype.slice.call(arguments,1),c=typeof n=="function"?n:function(){this[n].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ge(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=k(n)?n:[n];for(var a=0;a<n.length;a++)n[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ae={on:function(n,a,c){if(typeof n=="object")for(var u in n)this._on(u,n[u],a);else{n=N(n);for(var f=0,j=n.length;f<j;f++)this._on(n[f],a,c)}return this},off:function(n,a,c){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var u in n)this._off(u,n[u],a);else{n=N(n);for(var f=arguments.length===1,j=0,R=n.length;j<R;j++)f?this._off(n[j]):this._off(n[j],a,c)}return this},_on:function(n,a,c,u){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(n,a,c)===!1){c===this&&(c=void 0);var f={fn:a,ctx:c};u&&(f.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(f)}},_off:function(n,a,c){var u,f,j;if(this._events&&(u=this._events[n],!!u)){if(arguments.length===1){if(this._firingCount)for(f=0,j=u.length;f<j;f++)u[f].fn=g;delete this._events[n];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var R=this._listens(n,a,c);if(R!==!1){var B=u[R];this._firingCount&&(B.fn=g,this._events[n]=u=u.slice()),u.splice(R,1)}}},fire:function(n,a,c){if(!this.listens(n,c))return this;var u=o({},a,{type:n,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var f=this._events[n];if(f){this._firingCount=this._firingCount+1||1;for(var j=0,R=f.length;j<R;j++){var B=f[j],H=B.fn;B.once&&this.off(n,H,B.ctx),H.call(B.ctx||this,u)}this._firingCount--}}return c&&this._propagateEvent(u),this},listens:function(n,a,c,u){typeof n!="string"&&console.warn('"string" type argument expected');var f=a;typeof a!="function"&&(u=!!a,f=void 0,c=void 0);var j=this._events&&this._events[n];if(j&&j.length&&this._listens(n,f,c)!==!1)return!0;if(u){for(var R in this._eventParents)if(this._eventParents[R].listens(n,a,c,u))return!0}return!1},_listens:function(n,a,c){if(!this._events)return!1;var u=this._events[n]||[];if(!a)return!!u.length;c===this&&(c=void 0);for(var f=0,j=u.length;f<j;f++)if(u[f].fn===a&&u[f].ctx===c)return f;return!1},once:function(n,a,c){if(typeof n=="object")for(var u in n)this._on(u,n[u],a,!0);else{n=N(n);for(var f=0,j=n.length;f<j;f++)this._on(n[f],a,c,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[m(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[m(n)],this},_propagateEvent:function(n){for(var a in this._eventParents)this._eventParents[a].fire(n.type,o({layer:n.target,propagatedFrom:n.target},n),!0)}};ae.addEventListener=ae.on,ae.removeEventListener=ae.clearAllEventListeners=ae.off,ae.addOneTimeEventListener=ae.once,ae.fireEvent=ae.fire,ae.hasEventListeners=ae.listens;var _e=se.extend(ae);function U(n,a,c){this.x=c?Math.round(n):n,this.y=c?Math.round(a):a}var T=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(n){return this.clone()._add(F(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(F(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new U(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new U(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=T(this.x),this.y=T(this.y),this},distanceTo:function(n){n=F(n);var a=n.x-this.x,c=n.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(n){return n=F(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=F(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function F(n,a,c){return n instanceof U?n:k(n)?new U(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new U(n.x,n.y):new U(n,a,c)}function $(n,a){if(n)for(var c=a?[n,a]:n,u=0,f=c.length;u<f;u++)this.extend(c[u])}$.prototype={extend:function(n){var a,c;if(!n)return this;if(n instanceof U||typeof n[0]=="number"||"x"in n)a=c=F(n);else if(n=G(n),a=n.min,c=n.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(n){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var a,c;return typeof n[0]=="number"||n instanceof U?n=F(n):n=G(n),n instanceof $?(a=n.min,c=n.max):a=c=n,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(n){n=G(n);var a=this.min,c=this.max,u=n.min,f=n.max,j=f.x>=a.x&&u.x<=c.x,R=f.y>=a.y&&u.y<=c.y;return j&&R},overlaps:function(n){n=G(n);var a=this.min,c=this.max,u=n.min,f=n.max,j=f.x>a.x&&u.x<c.x,R=f.y>a.y&&u.y<c.y;return j&&R},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var a=this.min,c=this.max,u=Math.abs(a.x-c.x)*n,f=Math.abs(a.y-c.y)*n;return G(F(a.x-u,a.y-f),F(c.x+u,c.y+f))},equals:function(n){return n?(n=G(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function G(n,a){return!n||n instanceof $?n:new $(n,a)}function ce(n,a){if(n)for(var c=a?[n,a]:n,u=0,f=c.length;u<f;u++)this.extend(c[u])}ce.prototype={extend:function(n){var a=this._southWest,c=this._northEast,u,f;if(n instanceof xe)u=n,f=n;else if(n instanceof ce){if(u=n._southWest,f=n._northEast,!u||!f)return this}else return n?this.extend(ie(n)||ue(n)):this;return!a&&!c?(this._southWest=new xe(u.lat,u.lng),this._northEast=new xe(f.lat,f.lng)):(a.lat=Math.min(u.lat,a.lat),a.lng=Math.min(u.lng,a.lng),c.lat=Math.max(f.lat,c.lat),c.lng=Math.max(f.lng,c.lng)),this},pad:function(n){var a=this._southWest,c=this._northEast,u=Math.abs(a.lat-c.lat)*n,f=Math.abs(a.lng-c.lng)*n;return new ce(new xe(a.lat-u,a.lng-f),new xe(c.lat+u,c.lng+f))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof xe||"lat"in n?n=ie(n):n=ue(n);var a=this._southWest,c=this._northEast,u,f;return n instanceof ce?(u=n.getSouthWest(),f=n.getNorthEast()):u=f=n,u.lat>=a.lat&&f.lat<=c.lat&&u.lng>=a.lng&&f.lng<=c.lng},intersects:function(n){n=ue(n);var a=this._southWest,c=this._northEast,u=n.getSouthWest(),f=n.getNorthEast(),j=f.lat>=a.lat&&u.lat<=c.lat,R=f.lng>=a.lng&&u.lng<=c.lng;return j&&R},overlaps:function(n){n=ue(n);var a=this._southWest,c=this._northEast,u=n.getSouthWest(),f=n.getNorthEast(),j=f.lat>a.lat&&u.lat<c.lat,R=f.lng>a.lng&&u.lng<c.lng;return j&&R},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,a){return n?(n=ue(n),this._southWest.equals(n.getSouthWest(),a)&&this._northEast.equals(n.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ue(n,a){return n instanceof ce?n:new ce(n,a)}function xe(n,a,c){if(isNaN(n)||isNaN(a))throw new Error("Invalid LatLng object: ("+n+", "+a+")");this.lat=+n,this.lng=+a,c!==void 0&&(this.alt=+c)}xe.prototype={equals:function(n,a){if(!n)return!1;n=ie(n);var c=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return c<=(a===void 0?1e-9:a)},toString:function(n){return"LatLng("+S(this.lat,n)+", "+S(this.lng,n)+")"},distanceTo:function(n){return Ne.distance(this,ie(n))},wrap:function(){return Ne.wrapLatLng(this)},toBounds:function(n){var a=180*n/40075017,c=a/Math.cos(Math.PI/180*this.lat);return ue([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function ie(n,a,c){return n instanceof xe?n:k(n)&&typeof n[0]!="object"?n.length===3?new xe(n[0],n[1],n[2]):n.length===2?new xe(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new xe(n.lat,"lng"in n?n.lng:n.lon,n.alt):a===void 0?null:new xe(n,a,c)}var q={latLngToPoint:function(n,a){var c=this.projection.project(n),u=this.scale(a);return this.transformation._transform(c,u)},pointToLatLng:function(n,a){var c=this.scale(a),u=this.transformation.untransform(n,c);return this.projection.unproject(u)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(n),u=this.transformation.transform(a.min,c),f=this.transformation.transform(a.max,c);return new $(u,f)},infinite:!1,wrapLatLng:function(n){var a=this.wrapLng?b(n.lng,this.wrapLng,!0):n.lng,c=this.wrapLat?b(n.lat,this.wrapLat,!0):n.lat,u=n.alt;return new xe(c,a,u)},wrapLatLngBounds:function(n){var a=n.getCenter(),c=this.wrapLatLng(a),u=a.lat-c.lat,f=a.lng-c.lng;if(u===0&&f===0)return n;var j=n.getSouthWest(),R=n.getNorthEast(),B=new xe(j.lat-u,j.lng-f),H=new xe(R.lat-u,R.lng-f);return new ce(B,H)}},Ne=o({},q,{wrapLng:[-180,180],R:6371e3,distance:function(n,a){var c=Math.PI/180,u=n.lat*c,f=a.lat*c,j=Math.sin((a.lat-n.lat)*c/2),R=Math.sin((a.lng-n.lng)*c/2),B=j*j+Math.cos(u)*Math.cos(f)*R*R,H=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*H}}),ze=6378137,Y={R:ze,MAX_LATITUDE:85.0511287798,project:function(n){var a=Math.PI/180,c=this.MAX_LATITUDE,u=Math.max(Math.min(c,n.lat),-c),f=Math.sin(u*a);return new U(this.R*n.lng*a,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(n){var a=180/Math.PI;return new xe((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*a,n.x*a/this.R)},bounds:function(){var n=ze*Math.PI;return new $([-n,-n],[n,n])}()};function fe(n,a,c,u){if(k(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=a,this._c=c,this._d=u}fe.prototype={transform:function(n,a){return this._transform(n.clone(),a)},_transform:function(n,a){return a=a||1,n.x=a*(this._a*n.x+this._b),n.y=a*(this._c*n.y+this._d),n},untransform:function(n,a){return a=a||1,new U((n.x/a-this._b)/this._a,(n.y/a-this._d)/this._c)}};function ve(n,a,c,u){return new fe(n,a,c,u)}var Ce=o({},Ne,{code:"EPSG:3857",projection:Y,transformation:function(){var n=.5/(Math.PI*Y.R);return ve(n,.5,-n,.5)}()}),Q=o({},Ce,{code:"EPSG:900913"});function he(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ye(n,a){var c="",u,f,j,R,B,H;for(u=0,j=n.length;u<j;u++){for(B=n[u],f=0,R=B.length;f<R;f++)H=B[f],c+=(f?"L":"M")+H.x+" "+H.y;c+=a?be.svg?"z":"x":""}return c||"M0 0"}var O=document.documentElement.style,K="ActiveXObject"in window,oe=K&&!document.addEventListener,de="msLaunchUri"in navigator&&!("documentMode"in document),Z=jn("webkit"),pe=jn("android"),je=jn("android 2")||jn("android 3"),De=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=pe&&jn("Google")&&De<537&&!("AudioNode"in window),_n=!!window.opera,Hu=!de&&jn("chrome"),Wu=jn("gecko")&&!Z&&!_n&&!K,Jx=!Hu&&jn("safari"),Vu=jn("phantom"),qu="OTransition"in O,Xx=navigator.platform.indexOf("Win")===0,Gu=K&&"transition"in O,jl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!je,Ku="MozPerspective"in O,e0=!window.L_DISABLE_3D&&(Gu||jl||Ku)&&!qu&&!Vu,Yr=typeof orientation<"u"||jn("mobile"),t0=Yr&&Z,n0=Yr&&jl,Qu=!window.PointerEvent&&window.MSPointerEvent,Yu=!!(window.PointerEvent||Qu),Ju="ontouchstart"in window||!!window.TouchEvent,s0=!window.L_NO_TOUCH&&(Ju||Yu),r0=Yr&&_n,i0=Yr&&Wu,a0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,o0=function(){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",g,a),window.removeEventListener("testPassiveEventSupport",g,a)}catch{}return n}(),l0=function(){return!!document.createElement("canvas").getContext}(),Nl=!!(document.createElementNS&&he("svg").createSVGRect),c0=!!Nl&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),d0=!Nl&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var a=n.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),u0=navigator.platform.indexOf("Mac")===0,h0=navigator.platform.indexOf("Linux")===0;function jn(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var be={ie:K,ielt9:oe,edge:de,webkit:Z,android:pe,android23:je,androidStock:at,opera:_n,chrome:Hu,gecko:Wu,safari:Jx,phantom:Vu,opera12:qu,win:Xx,ie3d:Gu,webkit3d:jl,gecko3d:Ku,any3d:e0,mobile:Yr,mobileWebkit:t0,mobileWebkit3d:n0,msPointer:Qu,pointer:Yu,touch:s0,touchNative:Ju,mobileOpera:r0,mobileGecko:i0,retina:a0,passiveEvents:o0,canvas:l0,svg:Nl,vml:d0,inlineSvg:c0,mac:u0,linux:h0},Xu=be.msPointer?"MSPointerDown":"pointerdown",eh=be.msPointer?"MSPointerMove":"pointermove",th=be.msPointer?"MSPointerUp":"pointerup",nh=be.msPointer?"MSPointerCancel":"pointercancel",Sl={touchstart:Xu,touchmove:eh,touchend:th,touchcancel:nh},sh={touchstart:y0,touchmove:xa,touchend:xa,touchcancel:xa},rr={},rh=!1;function m0(n,a,c){return a==="touchstart"&&x0(),sh[a]?(c=sh[a].bind(this,c),n.addEventListener(Sl[a],c,!1),c):(console.warn("wrong event specified:",a),g)}function f0(n,a,c){if(!Sl[a]){console.warn("wrong event specified:",a);return}n.removeEventListener(Sl[a],c,!1)}function p0(n){rr[n.pointerId]=n}function g0(n){rr[n.pointerId]&&(rr[n.pointerId]=n)}function ih(n){delete rr[n.pointerId]}function x0(){rh||(document.addEventListener(Xu,p0,!0),document.addEventListener(eh,g0,!0),document.addEventListener(th,ih,!0),document.addEventListener(nh,ih,!0),rh=!0)}function xa(n,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in rr)a.touches.push(rr[c]);a.changedTouches=[a],n(a)}}function y0(n,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&yt(a),xa(n,a)}function v0(n){var a={},c,u;for(u in n)c=n[u],a[u]=c&&c.bind?c.bind(n):c;return n=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var b0=200;function w0(n,a){n.addEventListener("dblclick",a);var c=0,u;function f(j){if(j.detail!==1){u=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var R=dh(j);if(!(R.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!R.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var B=Date.now();B-c<=b0?(u++,u===2&&a(v0(j))):u=1,c=B}}}return n.addEventListener("click",f),{dblclick:a,simDblclick:f}}function _0(n,a){n.removeEventListener("dblclick",a.dblclick),n.removeEventListener("click",a.simDblclick)}var kl=ba(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Jr=ba(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ah=Jr==="webkitTransition"||Jr==="OTransition"?Jr+"End":"transitionend";function oh(n){return typeof n=="string"?document.getElementById(n):n}function Xr(n,a){var c=n.style[a]||n.currentStyle&&n.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var u=document.defaultView.getComputedStyle(n,null);c=u?u[a]:null}return c==="auto"?null:c}function Ae(n,a,c){var u=document.createElement(n);return u.className=a||"",c&&c.appendChild(u),u}function Ke(n){var a=n.parentNode;a&&a.removeChild(n)}function ya(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function ir(n){var a=n.parentNode;a&&a.lastChild!==n&&a.appendChild(n)}function ar(n){var a=n.parentNode;a&&a.firstChild!==n&&a.insertBefore(n,a.firstChild)}function Cl(n,a){if(n.classList!==void 0)return n.classList.contains(a);var c=va(n);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function Ee(n,a){if(n.classList!==void 0)for(var c=N(a),u=0,f=c.length;u<f;u++)n.classList.add(c[u]);else if(!Cl(n,a)){var j=va(n);Pl(n,(j?j+" ":"")+a)}}function tt(n,a){n.classList!==void 0?n.classList.remove(a):Pl(n,w((" "+va(n)+" ").replace(" "+a+" "," ")))}function Pl(n,a){n.className.baseVal===void 0?n.className=a:n.className.baseVal=a}function va(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function Yt(n,a){"opacity"in n.style?n.style.opacity=a:"filter"in n.style&&j0(n,a)}function j0(n,a){var c=!1,u="DXImageTransform.Microsoft.Alpha";try{c=n.filters.item(u)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):n.style.filter+=" progid:"+u+"(opacity="+a+")"}function ba(n){for(var a=document.documentElement.style,c=0;c<n.length;c++)if(n[c]in a)return n[c];return!1}function Ms(n,a,c){var u=a||new U(0,0);n.style[kl]=(be.ie3d?"translate("+u.x+"px,"+u.y+"px)":"translate3d("+u.x+"px,"+u.y+"px,0)")+(c?" scale("+c+")":"")}function ot(n,a){n._leaflet_pos=a,be.any3d?Ms(n,a):(n.style.left=a.x+"px",n.style.top=a.y+"px")}function Rs(n){return n._leaflet_pos||new U(0,0)}var ei,ti,El;if("onselectstart"in document)ei=function(){Pe(window,"selectstart",yt)},ti=function(){Ue(window,"selectstart",yt)};else{var ni=ba(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ei=function(){if(ni){var n=document.documentElement.style;El=n[ni],n[ni]="none"}},ti=function(){ni&&(document.documentElement.style[ni]=El,El=void 0)}}function Ll(){Pe(window,"dragstart",yt)}function Tl(){Ue(window,"dragstart",yt)}var wa,Ml;function Rl(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(_a(),wa=n,Ml=n.style.outlineStyle,n.style.outlineStyle="none",Pe(window,"keydown",_a))}function _a(){wa&&(wa.style.outlineStyle=Ml,wa=void 0,Ml=void 0,Ue(window,"keydown",_a))}function lh(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function Ol(n){var a=n.getBoundingClientRect();return{x:a.width/n.offsetWidth||1,y:a.height/n.offsetHeight||1,boundingClientRect:a}}var N0={__proto__:null,TRANSFORM:kl,TRANSITION:Jr,TRANSITION_END:ah,get:oh,getStyle:Xr,create:Ae,remove:Ke,empty:ya,toFront:ir,toBack:ar,hasClass:Cl,addClass:Ee,removeClass:tt,setClass:Pl,getClass:va,setOpacity:Yt,testProp:ba,setTransform:Ms,setPosition:ot,getPosition:Rs,get disableTextSelection(){return ei},get enableTextSelection(){return ti},disableImageDrag:Ll,enableImageDrag:Tl,preventOutline:Rl,restoreOutline:_a,getSizedParentNode:lh,getScale:Ol};function Pe(n,a,c,u){if(a&&typeof a=="object")for(var f in a)Il(n,f,a[f],c);else{a=N(a);for(var j=0,R=a.length;j<R;j++)Il(n,a[j],c,u)}return this}var Nn="_leaflet_events";function Ue(n,a,c,u){if(arguments.length===1)ch(n),delete n[Nn];else if(a&&typeof a=="object")for(var f in a)zl(n,f,a[f],c);else if(a=N(a),arguments.length===2)ch(n,function(B){return E(a,B)!==-1});else for(var j=0,R=a.length;j<R;j++)zl(n,a[j],c,u);return this}function ch(n,a){for(var c in n[Nn]){var u=c.split(/\d/)[0];(!a||a(u))&&zl(n,u,null,null,c)}}var Al={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Il(n,a,c,u){var f=a+m(c)+(u?"_"+m(u):"");if(n[Nn]&&n[Nn][f])return this;var j=function(B){return c.call(u||n,B||window.event)},R=j;!be.touchNative&&be.pointer&&a.indexOf("touch")===0?j=m0(n,a,j):be.touch&&a==="dblclick"?j=w0(n,j):"addEventListener"in n?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?n.addEventListener(Al[a]||a,j,be.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(j=function(B){B=B||window.event,Fl(n,B)&&R(B)},n.addEventListener(Al[a],j,!1)):n.addEventListener(a,R,!1):n.attachEvent("on"+a,j),n[Nn]=n[Nn]||{},n[Nn][f]=j}function zl(n,a,c,u,f){f=f||a+m(c)+(u?"_"+m(u):"");var j=n[Nn]&&n[Nn][f];if(!j)return this;!be.touchNative&&be.pointer&&a.indexOf("touch")===0?f0(n,a,j):be.touch&&a==="dblclick"?_0(n,j):"removeEventListener"in n?n.removeEventListener(Al[a]||a,j,!1):n.detachEvent("on"+a,j),n[Nn][f]=null}function Os(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Dl(n){return Il(n,"wheel",Os),this}function si(n){return Pe(n,"mousedown touchstart dblclick contextmenu",Os),n._leaflet_disable_click=!0,this}function yt(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function As(n){return yt(n),Os(n),this}function dh(n){if(n.composedPath)return n.composedPath();for(var a=[],c=n.target;c;)a.push(c),c=c.parentNode;return a}function uh(n,a){if(!a)return new U(n.clientX,n.clientY);var c=Ol(a),u=c.boundingClientRect;return new U((n.clientX-u.left)/c.x-a.clientLeft,(n.clientY-u.top)/c.y-a.clientTop)}var S0=be.linux&&be.chrome?window.devicePixelRatio:be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function hh(n){return be.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/S0:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function Fl(n,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==n;)c=c.parentNode}catch{return!1}return c!==n}var k0={__proto__:null,on:Pe,off:Ue,stopPropagation:Os,disableScrollPropagation:Dl,disableClickPropagation:si,preventDefault:yt,stop:As,getPropagationPath:dh,getMousePosition:uh,getWheelDelta:hh,isExternalTarget:Fl,addListener:Pe,removeListener:Ue},mh=_e.extend({run:function(n,a,c,u){this.stop(),this._el=n,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(u||.5,.2),this._startPos=Rs(n),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(n){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),n):(this._runFrame(1),this._complete())},_runFrame:function(n,a){var c=this._startPos.add(this._offset.multiplyBy(n));a&&c._round(),ot(this._el,c),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Re=_e.extend({options:{crs:Ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,a){a=y(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ie(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Jr&&be.any3d&&!be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,ah,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),n=this._limitCenter(ie(n),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=o({animate:c.animate},c.zoom),c.pan=o({animate:c.animate,duration:c.duration},c.pan));var u=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,a,c.zoom):this._tryAnimatedPan(n,c.pan);if(u)return clearTimeout(this._sizeTimer),this}return this._resetView(n,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(n,a){return this._loaded?this.setView(this.getCenter(),n,{zoom:a}):(this._zoom=n,this)},zoomIn:function(n,a){return n=n||(be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,a)},zoomOut:function(n,a){return n=n||(be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,a)},setZoomAround:function(n,a,c){var u=this.getZoomScale(a),f=this.getSize().divideBy(2),j=n instanceof U?n:this.latLngToContainerPoint(n),R=j.subtract(f).multiplyBy(1-1/u),B=this.containerPointToLatLng(f.add(R));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(n,a){a=a||{},n=n.getBounds?n.getBounds():ue(n);var c=F(a.paddingTopLeft||a.padding||[0,0]),u=F(a.paddingBottomRight||a.padding||[0,0]),f=this.getBoundsZoom(n,!1,c.add(u));if(f=typeof a.maxZoom=="number"?Math.min(a.maxZoom,f):f,f===1/0)return{center:n.getCenter(),zoom:f};var j=u.subtract(c).divideBy(2),R=this.project(n.getSouthWest(),f),B=this.project(n.getNorthEast(),f),H=this.unproject(R.add(B).divideBy(2).add(j),f);return{center:H,zoom:f}},fitBounds:function(n,a){if(n=ue(n),!n.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(n,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,a){return this.setView(n,this._zoom,{pan:a})},panBy:function(n,a){if(n=F(n).round(),a=a||{},!n.x&&!n.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new mh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){Ee(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,a,c){if(c=c||{},c.animate===!1||!be.any3d)return this.setView(n,a,c);this._stop();var u=this.project(this.getCenter()),f=this.project(n),j=this.getSize(),R=this._zoom;n=ie(n),a=a===void 0?R:a;var B=Math.max(j.x,j.y),H=B*this.getZoomScale(R,a),X=f.distanceTo(u)||1,le=1.42,Se=le*le;function Le(lt){var Oa=lt?-1:1,fy=lt?H:B,py=H*H-B*B+Oa*Se*Se*X*X,gy=2*fy*Se*X,Ql=py/gy,qh=Math.sqrt(Ql*Ql+1)-Ql,xy=qh<1e-9?-18:Math.log(qh);return xy}function Lt(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function ft(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function Xt(lt){return Lt(lt)/ft(lt)}var At=Le(0);function hr(lt){return B*(ft(At)/ft(At+le*lt))}function dy(lt){return B*(ft(At)*Xt(At+le*lt)-Lt(At))/Se}function uy(lt){return 1-Math.pow(1-lt,1.5)}var hy=Date.now(),Wh=(Le(1)-At)/le,my=c.duration?1e3*c.duration:1e3*Wh*.8;function Vh(){var lt=(Date.now()-hy)/my,Oa=uy(lt)*Wh;lt<=1?(this._flyToFrame=D(Vh,this),this._move(this.unproject(u.add(f.subtract(u).multiplyBy(dy(Oa)/X)),R),this.getScaleZoom(B/hr(Oa),R),{flyTo:!0})):this._move(n,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Vh.call(this),this},flyToBounds:function(n,a){var c=this._getBoundsCenterZoom(n,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(n){return n=ue(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var a=this.options.minZoom;return this.options.minZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var a=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,a){this._enforcingBounds=!0;var c=this.getCenter(),u=this._limitCenter(c,this._zoom,ue(n));return c.equals(u)||this.panTo(u,a),this._enforcingBounds=!1,this},panInside:function(n,a){a=a||{};var c=F(a.paddingTopLeft||a.padding||[0,0]),u=F(a.paddingBottomRight||a.padding||[0,0]),f=this.project(this.getCenter()),j=this.project(n),R=this.getPixelBounds(),B=G([R.min.add(c),R.max.subtract(u)]),H=B.getSize();if(!B.contains(j)){this._enforcingBounds=!0;var X=j.subtract(B.getCenter()),le=B.extend(j).getSize().subtract(H);f.x+=X.x<0?-le.x:le.x,f.y+=X.y<0?-le.y:le.y,this.panTo(this.unproject(f),a),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=o({animate:!1,pan:!0},n===!0?{animate:!0}:n);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),u=a.divideBy(2).round(),f=c.divideBy(2).round(),j=u.subtract(f);return!j.x&&!j.y?this:(n.animate&&n.pan?this.panBy(j):(n.pan&&this._rawPanBy(j),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=o({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=d(this._handleGeolocationResponse,this),c=d(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,n):navigator.geolocation.getCurrentPosition(a,c,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var a=n.code,c=n.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var a=n.coords.latitude,c=n.coords.longitude,u=new xe(a,c),f=u.toBounds(n.coords.accuracy*2),j=this._locateOptions;if(j.setView){var R=this.getBoundsZoom(f);this.setView(u,j.maxZoom?Math.min(R,j.maxZoom):R)}var B={latlng:u,bounds:f,timestamp:n.timestamp};for(var H in n.coords)typeof n.coords[H]=="number"&&(B[H]=n.coords[H]);this.fire("locationfound",B)}},addHandler:function(n,a){if(!a)return this;var c=this[n]=new a(this);return this._handlers.push(c),this.options[n]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Ke(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,a){var c="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),u=Ae("div",c,a||this._mapPane);return n&&(this._panes[n]=u),u},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),a=this.unproject(n.getBottomLeft()),c=this.unproject(n.getTopRight());return new ce(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,a,c){n=ue(n),c=F(c||[0,0]);var u=this.getZoom()||0,f=this.getMinZoom(),j=this.getMaxZoom(),R=n.getNorthWest(),B=n.getSouthEast(),H=this.getSize().subtract(c),X=G(this.project(B,u),this.project(R,u)).getSize(),le=be.any3d?this.options.zoomSnap:1,Se=H.x/X.x,Le=H.y/X.y,Lt=a?Math.max(Se,Le):Math.min(Se,Le);return u=this.getScaleZoom(Lt,u),le&&(u=Math.round(u/(le/100))*(le/100),u=a?Math.ceil(u/le)*le:Math.floor(u/le)*le),Math.max(f,Math.min(j,u))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,a){var c=this._getTopLeftPoint(n,a);return new $(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(n)/c.scale(a)},getScaleZoom:function(n,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var u=c.zoom(n*c.scale(a));return isNaN(u)?1/0:u},project:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ie(n),a)},unproject:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(F(n),a)},layerPointToLatLng:function(n){var a=F(n).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(n){var a=this.project(ie(n))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(ie(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(ue(n))},distance:function(n,a){return this.options.crs.distance(ie(n),ie(a))},containerPointToLayerPoint:function(n){return F(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return F(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var a=this.containerPointToLayerPoint(F(n));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(n)))},mouseEventToContainerPoint:function(n){return uh(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var a=this._container=oh(n);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Pe(a,"scroll",this._onScroll,this),this._containerId=m(a)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&be.any3d,Ee(n,"leaflet-container"+(be.touch?" leaflet-touch":"")+(be.retina?" leaflet-retina":"")+(be.ielt9?" leaflet-oldie":"")+(be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Xr(n,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ot(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ee(n.markerPane,"leaflet-zoom-hide"),Ee(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,a,c){ot(this._mapPane,new U(0,0));var u=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var f=this._zoom!==a;this._moveStart(f,c)._move(n,a)._moveEnd(f),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(n,a){return n&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(n,a,c,u){a===void 0&&(a=this._zoom);var f=this._zoom!==a;return this._zoom=a,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),u?c&&c.pinch&&this.fire("zoom",c):((f||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){ot(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[m(this._container)]=this;var a=n?Ue:Pe;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),be.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,a){for(var c=[],u,f=a==="mouseout"||a==="mouseover",j=n.target||n.srcElement,R=!1;j;){if(u=this._targets[m(j)],u&&(a==="click"||a==="preclick")&&this._draggableMoved(u)){R=!0;break}if(u&&u.listens(a,!0)&&(f&&!Fl(j,n)||(c.push(u),f))||j===this._container)break;j=j.parentNode}return!c.length&&!R&&!f&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var a=n.target||n.srcElement;if(!(!this._loaded||a._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(a))){var c=n.type;c==="mousedown"&&Rl(a),this._fireDOMEvent(n,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,a,c){if(n.type==="click"){var u=o({},n);u.type="preclick",this._fireDOMEvent(u,u.type,c)}var f=this._findEventTargets(n,a);if(c){for(var j=[],R=0;R<c.length;R++)c[R].listens(a,!0)&&j.push(c[R]);f=j.concat(f)}if(f.length){a==="contextmenu"&&yt(n);var B=f[0],H={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var X=B.getLatLng&&(!B._radius||B._radius<=10);H.containerPoint=X?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(n),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=X?B.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(R=0;R<f.length;R++)if(f[R].fire(a,H,!0),H.originalEvent._stopped||f[R].options.bubblingMouseEvents===!1&&E(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,a=this._handlers.length;n<a;n++)this._handlers[n].disable()},whenReady:function(n,a){return this._loaded?n.call(a||this,{target:this}):this.on("load",n,a),this},_getMapPanePos:function(){return Rs(this._mapPane)||new U(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,a){var c=n&&a!==void 0?this._getNewPixelOrigin(n,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,a){var c=this.getSize()._divideBy(2);return this.project(n,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,a,c){var u=this._getNewPixelOrigin(c,a);return this.project(n,a)._subtract(u)},_latLngBoundsToNewLayerBounds:function(n,a,c){var u=this._getNewPixelOrigin(c,a);return G([this.project(n.getSouthWest(),a)._subtract(u),this.project(n.getNorthWest(),a)._subtract(u),this.project(n.getSouthEast(),a)._subtract(u),this.project(n.getNorthEast(),a)._subtract(u)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,a,c){if(!c)return n;var u=this.project(n,a),f=this.getSize().divideBy(2),j=new $(u.subtract(f),u.add(f)),R=this._getBoundsOffset(j,c,a);return Math.abs(R.x)<=1&&Math.abs(R.y)<=1?n:this.unproject(u.add(R),a)},_limitOffset:function(n,a){if(!a)return n;var c=this.getPixelBounds(),u=new $(c.min.add(n),c.max.add(n));return n.add(this._getBoundsOffset(u,a))},_getBoundsOffset:function(n,a,c){var u=G(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),f=u.min.subtract(n.min),j=u.max.subtract(n.max),R=this._rebound(f.x,-j.x),B=this._rebound(f.y,-j.y);return new U(R,B)},_rebound:function(n,a){return n+a>0?Math.round(n-a)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(a))},_limitZoom:function(n){var a=this.getMinZoom(),c=this.getMaxZoom(),u=be.any3d?this.options.zoomSnap:1;return u&&(n=Math.round(n/u)*u),Math.max(a,Math.min(c,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,a){var c=this._getCenterOffset(n)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var n=this._proxy=Ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(a){var c=kl,u=this._proxy.style[c];Ms(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),u===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),a=this.getZoom();Ms(this._proxy,this.project(n,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var u=this.getZoomScale(a),f=this._getCenterOffset(n)._divideBy(1-1/u);return c.animate!==!0&&!this.getSize().contains(f)?!1:(D(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(n,a,!0)},this),!0)},_animateZoom:function(n,a,c,u){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=a,Ee(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:a,noUpdate:u}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function C0(n,a){return new Re(n,a)}var dn=se.extend({options:{position:"topright"},initialize:function(n){y(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var a=this._map;return a&&a.removeControl(this),this.options.position=n,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var a=this._container=this.onAdd(n),c=this.getPosition(),u=n._controlCorners[c];return Ee(a,"leaflet-control"),c.indexOf("bottom")!==-1?u.insertBefore(a,u.firstChild):u.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),ri=function(n){return new dn(n)};Re.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ae("div",a+"control-container",this._container);function u(f,j){var R=a+f+" "+a+j;n[f+j]=Ae("div",R,c)}u("top","left"),u("top","right"),u("bottom","left"),u("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Ke(this._controlCorners[n]);Ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fh=dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,a,c,u){return c<u?-1:u<c?1:0}},initialize:function(n,a,c){y(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var u in n)this._addLayer(n[u],u);for(u in a)this._addLayer(a[u],u,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return dn.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,a){return this._addLayer(n,a),this._map?this._update():this},addOverlay:function(n,a){return this._addLayer(n,a,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var a=this._getLayer(m(n));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){Ee(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(Ee(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",a=this._container=Ae("div",n),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),si(a),Dl(a);var u=this._section=Ae("section",n+"-list");c&&(this._map.on("click",this.collapse,this),Pe(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=Ae("a",n+"-toggle",a);f.href="#",f.title="Layers",f.setAttribute("role","button"),Pe(f,{keydown:function(j){j.keyCode===13&&this._expandSafely()},click:function(j){yt(j),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ae("div",n+"-base",u),this._separator=Ae("div",n+"-separator",u),this._overlaysList=Ae("div",n+"-overlays",u),a.appendChild(u)},_getLayer:function(n){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&m(this._layers[a].layer)===n)return this._layers[a]},_addLayer:function(n,a,c){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(d(function(u,f){return this.options.sortFunction(u.layer,f.layer,u.name,f.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ya(this._baseLayersList),ya(this._overlaysList),this._layerControlInputs=[];var n,a,c,u,f=0;for(c=0;c<this._layers.length;c++)u=this._layers[c],this._addItem(u),a=a||u.overlay,n=n||!u.overlay,f+=u.overlay?0:1;return this.options.hideSingleBase&&(n=n&&f>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=a&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var a=this._getLayer(m(n.target)),c=a.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(n,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(a?' checked="checked"':"")+"/>",u=document.createElement("div");return u.innerHTML=c,u.firstChild},_addItem:function(n){var a=document.createElement("label"),c=this._map.hasLayer(n.layer),u;n.overlay?(u=document.createElement("input"),u.type="checkbox",u.className="leaflet-control-layers-selector",u.defaultChecked=c):u=this._createRadioElement("leaflet-base-layers_"+m(this),c),this._layerControlInputs.push(u),u.layerId=m(n.layer),Pe(u,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+n.name;var j=document.createElement("span");a.appendChild(j),j.appendChild(u),j.appendChild(f);var R=n.overlay?this._overlaysList:this._baseLayersList;return R.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,a,c,u=[],f=[];this._handlingClick=!0;for(var j=n.length-1;j>=0;j--)a=n[j],c=this._getLayer(a.layerId).layer,a.checked?u.push(c):a.checked||f.push(c);for(j=0;j<f.length;j++)this._map.hasLayer(f[j])&&this._map.removeLayer(f[j]);for(j=0;j<u.length;j++)this._map.hasLayer(u[j])||this._map.addLayer(u[j]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,a,c,u=this._map.getZoom(),f=n.length-1;f>=0;f--)a=n[f],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&u<c.options.minZoom||c.options.maxZoom!==void 0&&u>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,Pe(n,"click",yt),this.expand();var a=this;setTimeout(function(){Ue(n,"click",yt),a._preventClick=!1})}}),P0=function(n,a,c){return new fh(n,a,c)},Bl=dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var a="leaflet-control-zoom",c=Ae("div",a+" leaflet-bar"),u=this.options;return this._zoomInButton=this._createButton(u.zoomInText,u.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(u.zoomOutText,u.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,a,c,u,f){var j=Ae("a",c,u);return j.innerHTML=n,j.href="#",j.title=a,j.setAttribute("role","button"),j.setAttribute("aria-label",a),si(j),Pe(j,"click",As),Pe(j,"click",f,this),Pe(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var n=this._map,a="leaflet-disabled";tt(this._zoomInButton,a),tt(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(Ee(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(Ee(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Re.mergeOptions({zoomControl:!0}),Re.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bl,this.addControl(this.zoomControl))});var E0=function(n){return new Bl(n)},ph=dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var a="leaflet-control-scale",c=Ae("div",a),u=this.options;return this._addScales(u,a+"-line",c),n.on(u.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),c},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,a,c){n.metric&&(this._mScale=Ae("div",a,c)),n.imperial&&(this._iScale=Ae("div",a,c))},_update:function(){var n=this._map,a=n.getSize().y/2,c=n.distance(n.containerPointToLatLng([0,a]),n.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var a=this._getRoundNum(n),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/n)},_updateImperial:function(n){var a=n*3.2808399,c,u,f;a>5280?(c=a/5280,u=this._getRoundNum(c),this._updateScale(this._iScale,u+" mi",u/c)):(f=this._getRoundNum(a),this._updateScale(this._iScale,f+" ft",f/a))},_updateScale:function(n,a,c){n.style.width=Math.round(this.options.maxWidth*c)+"px",n.innerHTML=a},_getRoundNum:function(n){var a=Math.pow(10,(Math.floor(n)+"").length-1),c=n/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),L0=function(n){return new ph(n)},T0='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ul=dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(be.inlineSvg?T0+" ":"")+"Leaflet</a>"},initialize:function(n){y(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Ae("div","leaflet-control-attribution"),si(this._container);for(var a in n._layers)n._layers[a].getAttribution&&this.addAttribution(n._layers[a].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var a in this._attributions)this._attributions[a]&&n.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),n.length&&c.push(n.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Re.mergeOptions({attributionControl:!0}),Re.addInitHook(function(){this.options.attributionControl&&new Ul().addTo(this)});var M0=function(n){return new Ul(n)};dn.Layers=fh,dn.Zoom=Bl,dn.Scale=ph,dn.Attribution=Ul,ri.layers=P0,ri.zoom=E0,ri.scale=L0,ri.attribution=M0;var Sn=se.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Sn.addTo=function(n,a){return n.addHandler(a,this),this};var R0={Events:ae},gh=be.touch?"touchstart mousedown":"mousedown",Xn=_e.extend({options:{clickTolerance:3},initialize:function(n,a,c,u){y(this,u),this._element=n,this._dragStartTarget=a||n,this._preventOutline=c},enable:function(){this._enabled||(Pe(this._dragStartTarget,gh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xn._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,gh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!Cl(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){Xn._dragging===this&&this.finishDrag();return}if(!(Xn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Xn._dragging=this,this._preventOutline&&Rl(this._element),Ll(),ei(),!this._moving)){this.fire("down");var a=n.touches?n.touches[0]:n,c=lh(this._element);this._startPoint=new U(a.clientX,a.clientY),this._startPos=Rs(this._element),this._parentScale=Ol(c);var u=n.type==="mousedown";Pe(document,u?"mousemove":"touchmove",this._onMove,this),Pe(document,u?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var a=n.touches&&n.touches.length===1?n.touches[0]:n,c=new U(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,yt(n),this._moved||(this.fire("dragstart"),this._moved=!0,Ee(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ee(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),ot(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),Tl(),ti();var a=this._moved&&this._moving;this._moving=!1,Xn._dragging=!1,a&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function xh(n,a,c){var u,f=[1,4,2,8],j,R,B,H,X,le,Se,Le;for(j=0,le=n.length;j<le;j++)n[j]._code=Is(n[j],a);for(B=0;B<4;B++){for(Se=f[B],u=[],j=0,le=n.length,R=le-1;j<le;R=j++)H=n[j],X=n[R],H._code&Se?X._code&Se||(Le=ja(X,H,Se,a,c),Le._code=Is(Le,a),u.push(Le)):(X._code&Se&&(Le=ja(X,H,Se,a,c),Le._code=Is(Le,a),u.push(Le)),u.push(H));n=u}return n}function yh(n,a){var c,u,f,j,R,B,H,X,le;if(!n||n.length===0)throw new Error("latlngs not passed");Jt(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Se=ie([0,0]),Le=ue(n),Lt=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());Lt<1700&&(Se=$l(n));var ft=n.length,Xt=[];for(c=0;c<ft;c++){var At=ie(n[c]);Xt.push(a.project(ie([At.lat-Se.lat,At.lng-Se.lng])))}for(B=H=X=0,c=0,u=ft-1;c<ft;u=c++)f=Xt[c],j=Xt[u],R=f.y*j.x-j.y*f.x,H+=(f.x+j.x)*R,X+=(f.y+j.y)*R,B+=R*3;B===0?le=Xt[0]:le=[H/B,X/B];var hr=a.unproject(F(le));return ie([hr.lat+Se.lat,hr.lng+Se.lng])}function $l(n){for(var a=0,c=0,u=0,f=0;f<n.length;f++){var j=ie(n[f]);a+=j.lat,c+=j.lng,u++}return ie([a/u,c/u])}var O0={__proto__:null,clipPolygon:xh,polygonCenter:yh,centroid:$l};function vh(n,a){if(!a||!n.length)return n.slice();var c=a*a;return n=z0(n,c),n=I0(n,c),n}function bh(n,a,c){return Math.sqrt(ii(n,a,c,!0))}function A0(n,a,c){return ii(n,a,c)}function I0(n,a){var c=n.length,u=typeof Uint8Array<"u"?Uint8Array:Array,f=new u(c);f[0]=f[c-1]=1,Zl(n,f,a,0,c-1);var j,R=[];for(j=0;j<c;j++)f[j]&&R.push(n[j]);return R}function Zl(n,a,c,u,f){var j=0,R,B,H;for(B=u+1;B<=f-1;B++)H=ii(n[B],n[u],n[f],!0),H>j&&(R=B,j=H);j>c&&(a[R]=1,Zl(n,a,c,u,R),Zl(n,a,c,R,f))}function z0(n,a){for(var c=[n[0]],u=1,f=0,j=n.length;u<j;u++)D0(n[u],n[f])>a&&(c.push(n[u]),f=u);return f<j-1&&c.push(n[j-1]),c}var wh;function _h(n,a,c,u,f){var j=u?wh:Is(n,c),R=Is(a,c),B,H,X;for(wh=R;;){if(!(j|R))return[n,a];if(j&R)return!1;B=j||R,H=ja(n,a,B,c,f),X=Is(H,c),B===j?(n=H,j=X):(a=H,R=X)}}function ja(n,a,c,u,f){var j=a.x-n.x,R=a.y-n.y,B=u.min,H=u.max,X,le;return c&8?(X=n.x+j*(H.y-n.y)/R,le=H.y):c&4?(X=n.x+j*(B.y-n.y)/R,le=B.y):c&2?(X=H.x,le=n.y+R*(H.x-n.x)/j):c&1&&(X=B.x,le=n.y+R*(B.x-n.x)/j),new U(X,le,f)}function Is(n,a){var c=0;return n.x<a.min.x?c|=1:n.x>a.max.x&&(c|=2),n.y<a.min.y?c|=4:n.y>a.max.y&&(c|=8),c}function D0(n,a){var c=a.x-n.x,u=a.y-n.y;return c*c+u*u}function ii(n,a,c,u){var f=a.x,j=a.y,R=c.x-f,B=c.y-j,H=R*R+B*B,X;return H>0&&(X=((n.x-f)*R+(n.y-j)*B)/H,X>1?(f=c.x,j=c.y):X>0&&(f+=R*X,j+=B*X)),R=n.x-f,B=n.y-j,u?R*R+B*B:new U(f,j)}function Jt(n){return!k(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function jh(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Jt(n)}function Nh(n,a){var c,u,f,j,R,B,H,X;if(!n||n.length===0)throw new Error("latlngs not passed");Jt(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var le=ie([0,0]),Se=ue(n),Le=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());Le<1700&&(le=$l(n));var Lt=n.length,ft=[];for(c=0;c<Lt;c++){var Xt=ie(n[c]);ft.push(a.project(ie([Xt.lat-le.lat,Xt.lng-le.lng])))}for(c=0,u=0;c<Lt-1;c++)u+=ft[c].distanceTo(ft[c+1])/2;if(u===0)X=ft[0];else for(c=0,j=0;c<Lt-1;c++)if(R=ft[c],B=ft[c+1],f=R.distanceTo(B),j+=f,j>u){H=(j-u)/f,X=[B.x-H*(B.x-R.x),B.y-H*(B.y-R.y)];break}var At=a.unproject(F(X));return ie([At.lat+le.lat,At.lng+le.lng])}var F0={__proto__:null,simplify:vh,pointToSegmentDistance:bh,closestPointOnSegment:A0,clipSegment:_h,_getEdgeIntersection:ja,_getBitCode:Is,_sqClosestPointOnSegment:ii,isFlat:Jt,_flat:jh,polylineCenter:Nh},Hl={project:function(n){return new U(n.lng,n.lat)},unproject:function(n){return new xe(n.y,n.x)},bounds:new $([-180,-90],[180,90])},Wl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var a=Math.PI/180,c=this.R,u=n.lat*a,f=this.R_MINOR/c,j=Math.sqrt(1-f*f),R=j*Math.sin(u),B=Math.tan(Math.PI/4-u/2)/Math.pow((1-R)/(1+R),j/2);return u=-c*Math.log(Math.max(B,1e-10)),new U(n.lng*a*c,u)},unproject:function(n){for(var a=180/Math.PI,c=this.R,u=this.R_MINOR/c,f=Math.sqrt(1-u*u),j=Math.exp(-n.y/c),R=Math.PI/2-2*Math.atan(j),B=0,H=.1,X;B<15&&Math.abs(H)>1e-7;B++)X=f*Math.sin(R),X=Math.pow((1-X)/(1+X),f/2),H=Math.PI/2-2*Math.atan(j*X)-R,R+=H;return new xe(R*a,n.x*a/c)}},B0={__proto__:null,LonLat:Hl,Mercator:Wl,SphericalMercator:Y},U0=o({},Ne,{code:"EPSG:3395",projection:Wl,transformation:function(){var n=.5/(Math.PI*Wl.R);return ve(n,.5,-n,.5)}()}),Sh=o({},Ne,{code:"EPSG:4326",projection:Hl,transformation:ve(1/180,1,-1/180,.5)}),$0=o({},q,{projection:Hl,transformation:ve(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,a){var c=a.lng-n.lng,u=a.lat-n.lat;return Math.sqrt(c*c+u*u)},infinite:!0});q.Earth=Ne,q.EPSG3395=U0,q.EPSG3857=Ce,q.EPSG900913=Q,q.EPSG4326=Sh,q.Simple=$0;var un=_e.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[m(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[m(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var a=n.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Re.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var a=m(n);return this._layers[a]?this:(this._layers[a]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var a=m(n);return this._layers[a]?(this._loaded&&n.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return m(n)in this._layers},eachLayer:function(n,a){for(var c in this._layers)n.call(a,this._layers[c]);return this},_addLayers:function(n){n=n?k(n)?n:[n]:[];for(var a=0,c=n.length;a<c;a++)this.addLayer(n[a])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[m(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var a=m(n);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,a=-1/0,c=this._getZoomSpan();for(var u in this._zoomBoundLayers){var f=this._zoomBoundLayers[u].options;n=f.minZoom===void 0?n:Math.min(n,f.minZoom),a=f.maxZoom===void 0?a:Math.max(a,f.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=n===1/0?void 0:n,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var or=un.extend({initialize:function(n,a){y(this,a),this._layers={};var c,u;if(n)for(c=0,u=n.length;c<u;c++)this.addLayer(n[c])},addLayer:function(n){var a=this.getLayerId(n);return this._layers[a]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var a=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(n){var a=typeof n=="number"?n:this.getLayerId(n);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var a=Array.prototype.slice.call(arguments,1),c,u;for(c in this._layers)u=this._layers[c],u[n]&&u[n].apply(u,a);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,a){for(var c in this._layers)n.call(a,this._layers[c]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return m(n)}}),Z0=function(n,a){return new or(n,a)},Rn=or.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),or.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),or.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new ce;for(var a in this._layers){var c=this._layers[a];n.extend(c.getBounds?c.getBounds():c.getLatLng())}return n}}),H0=function(n,a){return new Rn(n,a)},lr=se.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){y(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,a){var c=this._getIconUrl(n);if(!c){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var u=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(u,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),u},_setIconStyles:function(n,a){var c=this.options,u=c[a+"Size"];typeof u=="number"&&(u=[u,u]);var f=F(u),j=F(a==="shadow"&&c.shadowAnchor||c.iconAnchor||f&&f.divideBy(2,!0));n.className="leaflet-marker-"+a+" "+(c.className||""),j&&(n.style.marginLeft=-j.x+"px",n.style.marginTop=-j.y+"px"),f&&(n.style.width=f.x+"px",n.style.height=f.y+"px")},_createImg:function(n,a){return a=a||document.createElement("img"),a.src=n,a},_getIconUrl:function(n){return be.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function W0(n){return new lr(n)}var ai=lr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof ai.imagePath!="string"&&(ai.imagePath=this._detectIconPath()),(this.options.imagePath||ai.imagePath)+lr.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var a=function(c,u,f){var j=u.exec(c);return j&&j[f]};return n=a(n,/^url\((['"])?(.+)\1\)$/,2),n&&a(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Ae("div","leaflet-default-icon-path",document.body),a=Xr(n,"background-image")||Xr(n,"backgroundImage");if(document.body.removeChild(n),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),kh=Sn.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Xn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ee(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var a=this._marker,c=a._map,u=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,j=Rs(a._icon),R=c.getPixelBounds(),B=c.getPixelOrigin(),H=G(R.min._subtract(B).add(f),R.max._subtract(B).subtract(f));if(!H.contains(j)){var X=F((Math.max(H.max.x,j.x)-H.max.x)/(R.max.x-H.max.x)-(Math.min(H.min.x,j.x)-H.min.x)/(R.min.x-H.min.x),(Math.max(H.max.y,j.y)-H.max.y)/(R.max.y-H.max.y)-(Math.min(H.min.y,j.y)-H.min.y)/(R.min.y-H.min.y)).multiplyBy(u);c.panBy(X,{animate:!1}),this._draggable._newPos._add(X),this._draggable._startPos._add(X),ot(a._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=D(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,n)))},_onDrag:function(n){var a=this._marker,c=a._shadow,u=Rs(a._icon),f=a._map.layerPointToLatLng(u);c&&ot(c,u),a._latlng=f,n.latlng=f,n.oldLatLng=this._oldLatLng,a.fire("move",n).fire("drag",n)},_onDragEnd:function(n){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Na=un.extend({options:{icon:new ai,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,a){y(this,a),this._latlng=ie(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var a=this._latlng;return this._latlng=ie(n),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=n.icon.createIcon(this._icon),u=!1;c!==this._icon&&(this._icon&&this._removeIcon(),u=!0,n.title&&(c.title=n.title),c.tagName==="IMG"&&(c.alt=n.alt||"")),Ee(c,a),n.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(c,"focus",this._panOnFocus,this);var f=n.icon.createShadow(this._shadow),j=!1;f!==this._shadow&&(this._removeShadow(),j=!0),f&&(Ee(f,a),f.alt=""),this._shadow=f,n.opacity<1&&this._updateOpacity(),u&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&j&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),Ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ke(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&ot(this._icon,n),this._shadow&&ot(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(Ee(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),kh)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new kh(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&Yt(this._icon,n),this._shadow&&Yt(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var a=this.options.icon.options,c=a.iconSize?F(a.iconSize):F(0,0),u=a.iconAnchor?F(a.iconAnchor):F(0,0);n.panInside(this._latlng,{paddingTopLeft:u,paddingBottomRight:c.subtract(u)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function V0(n,a){return new Na(n,a)}var es=un.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return y(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Sa=es.extend({options:{fill:!0,radius:10},initialize:function(n,a){y(this,a),this._latlng=ie(n),this._radius=this.options.radius},setLatLng:function(n){var a=this._latlng;return this._latlng=ie(n),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var a=n&&n.radius||this._radius;return es.prototype.setStyle.call(this,n),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,a=this._radiusY||n,c=this._clickTolerance(),u=[n+c,a+c];this._pxBounds=new $(this._point.subtract(u),this._point.add(u))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function q0(n,a){return new Sa(n,a)}var Vl=Sa.extend({initialize:function(n,a,c){if(typeof a=="number"&&(a=o({},c,{radius:a})),y(this,a),this._latlng=ie(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new ce(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:es.prototype.setStyle,_project:function(){var n=this._latlng.lng,a=this._latlng.lat,c=this._map,u=c.options.crs;if(u.distance===Ne.distance){var f=Math.PI/180,j=this._mRadius/Ne.R/f,R=c.project([a+j,n]),B=c.project([a-j,n]),H=R.add(B).divideBy(2),X=c.unproject(H).lat,le=Math.acos((Math.cos(j*f)-Math.sin(a*f)*Math.sin(X*f))/(Math.cos(a*f)*Math.cos(X*f)))/f;(isNaN(le)||le===0)&&(le=j/Math.cos(Math.PI/180*a)),this._point=H.subtract(c.getPixelOrigin()),this._radius=isNaN(le)?0:H.x-c.project([X,n-le]).x,this._radiusY=H.y-R.y}else{var Se=u.unproject(u.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(Se).x}this._updateBounds()}});function G0(n,a,c){return new Vl(n,a,c)}var On=es.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,a){y(this,a),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var a=1/0,c=null,u=ii,f,j,R=0,B=this._parts.length;R<B;R++)for(var H=this._parts[R],X=1,le=H.length;X<le;X++){f=H[X-1],j=H[X];var Se=u(n,f,j,!0);Se<a&&(a=Se,c=u(n,f,j))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,a){return a=a||this._defaultShape(),n=ie(n),a.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new ce,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return Jt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var a=[],c=Jt(n),u=0,f=n.length;u<f;u++)c?(a[u]=ie(n[u]),this._bounds.extend(a[u])):a[u]=this._convertLatLngs(n[u]);return a},_project:function(){var n=new $;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),a=new U(n,n);this._rawPxBounds&&(this._pxBounds=new $([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(n,a,c){var u=n[0]instanceof xe,f=n.length,j,R;if(u){for(R=[],j=0;j<f;j++)R[j]=this._map.latLngToLayerPoint(n[j]),c.extend(R[j]);a.push(R)}else for(j=0;j<f;j++)this._projectLatlngs(n[j],a,c)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,u,f,j,R,B,H;for(c=0,f=0,j=this._rings.length;c<j;c++)for(H=this._rings[c],u=0,R=H.length;u<R-1;u++)B=_h(H[u],H[u+1],n,u,!0),B&&(a[f]=a[f]||[],a[f].push(B[0]),(B[1]!==H[u+1]||u===R-2)&&(a[f].push(B[1]),f++))}},_simplifyPoints:function(){for(var n=this._parts,a=this.options.smoothFactor,c=0,u=n.length;c<u;c++)n[c]=vh(n[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,a){var c,u,f,j,R,B,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(c=0,j=this._parts.length;c<j;c++)for(B=this._parts[c],u=0,R=B.length,f=R-1;u<R;f=u++)if(!(!a&&u===0)&&bh(n,B[f],B[u])<=H)return!0;return!1}});function K0(n,a){return new On(n,a)}On._flat=jh;var cr=On.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var a=On.prototype._convertLatLngs.call(this,n),c=a.length;return c>=2&&a[0]instanceof xe&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(n){On.prototype._setLatLngs.call(this,n),Jt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Jt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,a=this.options.weight,c=new U(a,a);if(n=new $(n.min.subtract(c),n.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var u=0,f=this._rings.length,j;u<f;u++)j=xh(this._rings[u],n,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var a=!1,c,u,f,j,R,B,H,X;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(j=0,H=this._parts.length;j<H;j++)for(c=this._parts[j],R=0,X=c.length,B=X-1;R<X;B=R++)u=c[R],f=c[B],u.y>n.y!=f.y>n.y&&n.x<(f.x-u.x)*(n.y-u.y)/(f.y-u.y)+u.x&&(a=!a);return a||On.prototype._containsPoint.call(this,n,!0)}});function Q0(n,a){return new cr(n,a)}var An=Rn.extend({initialize:function(n,a){y(this,a),this._layers={},n&&this.addData(n)},addData:function(n){var a=k(n)?n:n.features,c,u,f;if(a){for(c=0,u=a.length;c<u;c++)f=a[c],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var j=this.options;if(j.filter&&!j.filter(n))return this;var R=ka(n,j);return R?(R.feature=Ea(n),R.defaultOptions=R.options,this.resetStyle(R),j.onEachFeature&&j.onEachFeature(n,R),this.addLayer(R)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=o({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(a){this._setLayerStyle(a,n)},this)},_setLayerStyle:function(n,a){n.setStyle&&(typeof a=="function"&&(a=a(n.feature)),n.setStyle(a))}});function ka(n,a){var c=n.type==="Feature"?n.geometry:n,u=c?c.coordinates:null,f=[],j=a&&a.pointToLayer,R=a&&a.coordsToLatLng||ql,B,H,X,le;if(!u&&!c)return null;switch(c.type){case"Point":return B=R(u),Ch(j,n,B,a);case"MultiPoint":for(X=0,le=u.length;X<le;X++)B=R(u[X]),f.push(Ch(j,n,B,a));return new Rn(f);case"LineString":case"MultiLineString":return H=Ca(u,c.type==="LineString"?0:1,R),new On(H,a);case"Polygon":case"MultiPolygon":return H=Ca(u,c.type==="Polygon"?1:2,R),new cr(H,a);case"GeometryCollection":for(X=0,le=c.geometries.length;X<le;X++){var Se=ka({geometry:c.geometries[X],type:"Feature",properties:n.properties},a);Se&&f.push(Se)}return new Rn(f);case"FeatureCollection":for(X=0,le=c.features.length;X<le;X++){var Le=ka(c.features[X],a);Le&&f.push(Le)}return new Rn(f);default:throw new Error("Invalid GeoJSON object.")}}function Ch(n,a,c,u){return n?n(a,c):new Na(c,u&&u.markersInheritOptions&&u)}function ql(n){return new xe(n[1],n[0],n[2])}function Ca(n,a,c){for(var u=[],f=0,j=n.length,R;f<j;f++)R=a?Ca(n[f],a-1,c):(c||ql)(n[f]),u.push(R);return u}function Gl(n,a){return n=ie(n),n.alt!==void 0?[S(n.lng,a),S(n.lat,a),S(n.alt,a)]:[S(n.lng,a),S(n.lat,a)]}function Pa(n,a,c,u){for(var f=[],j=0,R=n.length;j<R;j++)f.push(a?Pa(n[j],Jt(n[j])?0:a-1,c,u):Gl(n[j],u));return!a&&c&&f.length>0&&f.push(f[0].slice()),f}function dr(n,a){return n.feature?o({},n.feature,{geometry:a}):Ea(a)}function Ea(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var Kl={toGeoJSON:function(n){return dr(this,{type:"Point",coordinates:Gl(this.getLatLng(),n)})}};Na.include(Kl),Vl.include(Kl),Sa.include(Kl),On.include({toGeoJSON:function(n){var a=!Jt(this._latlngs),c=Pa(this._latlngs,a?1:0,!1,n);return dr(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),cr.include({toGeoJSON:function(n){var a=!Jt(this._latlngs),c=a&&!Jt(this._latlngs[0]),u=Pa(this._latlngs,c?2:a?1:0,!0,n);return a||(u=[u]),dr(this,{type:(c?"Multi":"")+"Polygon",coordinates:u})}}),or.include({toMultiPoint:function(n){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(n).geometry.coordinates)}),dr(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(n){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(n);var c=a==="GeometryCollection",u=[];return this.eachLayer(function(f){if(f.toGeoJSON){var j=f.toGeoJSON(n);if(c)u.push(j.geometry);else{var R=Ea(j);R.type==="FeatureCollection"?u.push.apply(u,R.features):u.push(R)}}}),c?dr(this,{geometries:u,type:"GeometryCollection"}):{type:"FeatureCollection",features:u}}});function Ph(n,a){return new An(n,a)}var Y0=Ph,La=un.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,a,c){this._url=n,this._bounds=ue(a),y(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ee(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&ir(this._image),this},bringToBack:function(){return this._map&&ar(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=ue(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",a=this._image=n?this._url:Ae("img");if(Ee(a,"leaflet-image-layer"),this._zoomAnimated&&Ee(a,"leaflet-zoom-animated"),this.options.className&&Ee(a,this.options.className),a.onselectstart=g,a.onmousemove=g,a.onload=d(this.fire,this,"load"),a.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(n){var a=this._map.getZoomScale(n.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Ms(this._image,c,a)},_reset:function(){var n=this._image,a=new $(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();ot(n,a.min),n.style.width=c.x+"px",n.style.height=c.y+"px"},_updateOpacity:function(){Yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),J0=function(n,a,c){return new La(n,a,c)},Eh=La.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",a=this._image=n?this._url:Ae("video");if(Ee(a,"leaflet-image-layer"),this._zoomAnimated&&Ee(a,"leaflet-zoom-animated"),this.options.className&&Ee(a,this.options.className),a.onselectstart=g,a.onmousemove=g,a.onloadeddata=d(this.fire,this,"load"),n){for(var c=a.getElementsByTagName("source"),u=[],f=0;f<c.length;f++)u.push(c[f].src);this._url=c.length>0?u:[a.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var R=Ae("source");R.src=this._url[j],a.appendChild(R)}}});function X0(n,a,c){return new Eh(n,a,c)}var Lh=La.extend({_initImage:function(){var n=this._image=this._url;Ee(n,"leaflet-image-layer"),this._zoomAnimated&&Ee(n,"leaflet-zoom-animated"),this.options.className&&Ee(n,this.options.className),n.onselectstart=g,n.onmousemove=g}});function ey(n,a,c){return new Lh(n,a,c)}var kn=un.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,a){n&&(n instanceof xe||k(n))?(this._latlng=ie(n),y(this,a)):(y(this,n),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&Yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&Yt(this._container,1),this.bringToFront(),this.options.interactive&&(Ee(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(Yt(this._container,0),this._removeTimeout=setTimeout(d(Ke,void 0,this._container),200)):Ke(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=ie(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ir(this._container),this},bringToBack:function(){return this._map&&ar(this._container),this},_prepareOpen:function(n){var a=this._source;if(!a._map)return!1;if(a instanceof Rn){a=null;var c=this._source._layers;for(var u in c)if(c[u]._map){a=c[u];break}if(!a)return!1;this._source=a}if(!n)if(a.getCenter)n=a.getCenter();else if(a.getLatLng)n=a.getLatLng();else if(a.getBounds)n=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")n.innerHTML=a;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),a=F(this.options.offset),c=this._getAnchor();this._zoomAnimated?ot(this._container,n.add(c)):a=a.add(n).add(c);var u=this._containerBottom=-a.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=u+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});Re.include({_initOverlay:function(n,a,c,u){var f=a;return f instanceof n||(f=new n(u).setContent(a)),c&&f.setLatLng(c),f}}),un.include({_initOverlay:function(n,a,c,u){var f=c;return f instanceof n?(y(f,u),f._source=this):(f=a&&!u?a:new n(u,this),f.setContent(c)),f}});var Ta=kn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,kn.prototype.openOn.call(this,n)},onAdd:function(n){kn.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof es||this._source.on("preclick",Os))},onRemove:function(n){kn.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof es||this._source.off("preclick",Os))},getEvents:function(){var n=kn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",a=this._container=Ae("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ae("div",n+"-content-wrapper",a);if(this._contentNode=Ae("div",n+"-content",c),si(a),Dl(this._contentNode),Pe(a,"contextmenu",Os),this._tipContainer=Ae("div",n+"-tip-container",a),this._tip=Ae("div",n+"-tip",this._tipContainer),this.options.closeButton){var u=this._closeButton=Ae("a",n+"-close-button",a);u.setAttribute("role","button"),u.setAttribute("aria-label","Close popup"),u.href="#close",u.innerHTML='<span aria-hidden="true">&#215;</span>',Pe(u,"click",function(f){yt(f),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,a=n.style;a.width="",a.whiteSpace="nowrap";var c=n.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var u=n.offsetHeight,f=this.options.maxHeight,j="leaflet-popup-scrolled";f&&u>f?(a.height=f+"px",Ee(n,j)):tt(n,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),c=this._getAnchor();ot(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,a=parseInt(Xr(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,u=this._containerWidth,f=new U(this._containerLeft,-c-this._containerBottom);f._add(Rs(this._container));var j=n.layerPointToContainerPoint(f),R=F(this.options.autoPanPadding),B=F(this.options.autoPanPaddingTopLeft||R),H=F(this.options.autoPanPaddingBottomRight||R),X=n.getSize(),le=0,Se=0;j.x+u+H.x>X.x&&(le=j.x+u-X.x+H.x),j.x-le-B.x<0&&(le=j.x-B.x),j.y+c+H.y>X.y&&(Se=j.y+c-X.y+H.y),j.y-Se-B.y<0&&(Se=j.y-B.y),(le||Se)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([le,Se]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ty=function(n,a){return new Ta(n,a)};Re.mergeOptions({closePopupOnClick:!0}),Re.include({openPopup:function(n,a,c){return this._initOverlay(Ta,n,a,c).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),un.include({bindPopup:function(n,a){return this._popup=this._initOverlay(Ta,this._popup,n,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof Rn||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){As(n);var a=n.layer||n.target;if(this._popup._source===a&&!(a instanceof es)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=a,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Ma=kn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){kn.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){kn.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=kn.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",a=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ae("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var a,c,u=this._map,f=this._container,j=u.latLngToContainerPoint(u.getCenter()),R=u.layerPointToContainerPoint(n),B=this.options.direction,H=f.offsetWidth,X=f.offsetHeight,le=F(this.options.offset),Se=this._getAnchor();B==="top"?(a=H/2,c=X):B==="bottom"?(a=H/2,c=0):B==="center"?(a=H/2,c=X/2):B==="right"?(a=0,c=X/2):B==="left"?(a=H,c=X/2):R.x<j.x?(B="right",a=0,c=X/2):(B="left",a=H+(le.x+Se.x)*2,c=X/2),n=n.subtract(F(a,c,!0)).add(le).add(Se),tt(f,"leaflet-tooltip-right"),tt(f,"leaflet-tooltip-left"),tt(f,"leaflet-tooltip-top"),tt(f,"leaflet-tooltip-bottom"),Ee(f,"leaflet-tooltip-"+B),ot(f,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&Yt(this._container,n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(a)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ny=function(n,a){return new Ma(n,a)};Re.include({openTooltip:function(n,a,c){return this._initOverlay(Ma,n,a,c).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),un.include({bindTooltip:function(n,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ma,this._tooltip,n,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var a=n?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof Rn||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&(Pe(a,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),Pe(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var a=n.latlng,c,u;this._tooltip.options.sticky&&n.originalEvent&&(c=this._map.mouseEventToContainerPoint(n.originalEvent),u=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(u)),this._tooltip.setLatLng(a)}});var Th=lr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var a=n&&n.tagName==="DIV"?n:document.createElement("div"),c=this.options;if(c.html instanceof Element?(ya(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var u=F(c.bgPos);a.style.backgroundPosition=-u.x+"px "+-u.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function sy(n){return new Th(n)}lr.Default=ai;var oi=un.extend({options:{tileSize:256,opacity:1,updateWhenIdle:be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){y(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Ke(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ir(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ar(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof U?n:new U(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var a=this.getPane().children,c=-n(-1/0,1/0),u=0,f=a.length,j;u<f;u++)j=a[u].style.zIndex,a[u]!==this._container&&j&&(c=n(c,+j));isFinite(c)&&(this.options.zIndex=c+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!be.ielt9){Yt(this._container,this.options.opacity);var n=+new Date,a=!1,c=!1;for(var u in this._tiles){var f=this._tiles[u];if(!(!f.current||!f.loaded)){var j=Math.min(1,(n-f.loaded)/200);Yt(f.el,j),j<1?a=!0:(f.active?c=!0:this._onOpaqueTile(f),f.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(J(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,a=this.options.maxZoom;if(n!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===n?(this._levels[c].el.style.zIndex=a-Math.abs(n-c),this._onUpdateLevel(c)):(Ke(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var u=this._levels[n],f=this._map;return u||(u=this._levels[n]={},u.el=Ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),u.el.style.zIndex=a,u.origin=f.project(f.unproject(f.getPixelOrigin()),n).round(),u.zoom=n,this._setZoomTransform(u,f.getCenter(),f.getZoom()),g(u.el.offsetWidth),this._onCreateLevel(u)),this._level=u,u}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var n,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)a=this._tiles[n],a.retain=a.current;for(n in this._tiles)if(a=this._tiles[n],a.current&&!a.active){var u=a.coords;this._retainParent(u.x,u.y,u.z,u.z-5)||this._retainChildren(u.x,u.y,u.z,u.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var a in this._tiles)this._tiles[a].coords.z===n&&this._removeTile(a)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Ke(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,a,c,u){var f=Math.floor(n/2),j=Math.floor(a/2),R=c-1,B=new U(+f,+j);B.z=+R;var H=this._tileCoordsToKey(B),X=this._tiles[H];return X&&X.active?(X.retain=!0,!0):(X&&X.loaded&&(X.retain=!0),R>u?this._retainParent(f,j,R,u):!1)},_retainChildren:function(n,a,c,u){for(var f=2*n;f<2*n+2;f++)for(var j=2*a;j<2*a+2;j++){var R=new U(f,j);R.z=c+1;var B=this._tileCoordsToKey(R),H=this._tiles[B];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);c+1<u&&this._retainChildren(f,j,c+1,u)}},_resetView:function(n){var a=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var a=this.options;return a.minNativeZoom!==void 0&&n<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<n?a.maxNativeZoom:n},_setView:function(n,a,c,u){var f=Math.round(a);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var j=this.options.updateWhenZooming&&f!==this._tileZoom;(!u||j)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(n),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(n,a)},_setZoomTransforms:function(n,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],n,a)},_setZoomTransform:function(n,a,c){var u=this._map.getZoomScale(c,n.zoom),f=n.origin.multiplyBy(u).subtract(this._map._getNewPixelOrigin(a,c)).round();be.any3d?Ms(n.el,f,u):ot(n.el,f)},_resetGrid:function(){var n=this._map,a=n.options.crs,c=this._tileSize=this.getTileSize(),u=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,a.wrapLng[0]],u).x/c.x),Math.ceil(n.project([0,a.wrapLng[1]],u).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([a.wrapLat[0],0],u).y/c.x),Math.ceil(n.project([a.wrapLat[1],0],u).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),u=a.getZoomScale(c,this._tileZoom),f=a.project(n,this._tileZoom).floor(),j=a.getSize().divideBy(u*2);return new $(f.subtract(j),f.add(j))},_update:function(n){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(n===void 0&&(n=a.getCenter()),this._tileZoom!==void 0){var u=this._getTiledPixelBounds(n),f=this._pxBoundsToTileRange(u),j=f.getCenter(),R=[],B=this.options.keepBuffer,H=new $(f.getBottomLeft().subtract([B,-B]),f.getTopRight().add([B,-B]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var X in this._tiles){var le=this._tiles[X].coords;(le.z!==this._tileZoom||!H.contains(new U(le.x,le.y)))&&(this._tiles[X].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(n,c);return}for(var Se=f.min.y;Se<=f.max.y;Se++)for(var Le=f.min.x;Le<=f.max.x;Le++){var Lt=new U(Le,Se);if(Lt.z=this._tileZoom,!!this._isValidTile(Lt)){var ft=this._tiles[this._tileCoordsToKey(Lt)];ft?ft.current=!0:R.push(Lt)}}if(R.sort(function(At,hr){return At.distanceTo(j)-hr.distanceTo(j)}),R.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xt=document.createDocumentFragment();for(Le=0;Le<R.length;Le++)this._addTile(R[Le],Xt);this._level.el.appendChild(Xt)}}}},_isValidTile:function(n){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(n.x<c.min.x||n.x>c.max.x)||!a.wrapLat&&(n.y<c.min.y||n.y>c.max.y))return!1}if(!this.options.bounds)return!0;var u=this._tileCoordsToBounds(n);return ue(this.options.bounds).overlaps(u)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var a=this._map,c=this.getTileSize(),u=n.scaleBy(c),f=u.add(c),j=a.unproject(u,n.z),R=a.unproject(f,n.z);return[j,R]},_tileCoordsToBounds:function(n){var a=this._tileCoordsToNwSe(n),c=new ce(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var a=n.split(":"),c=new U(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(n){var a=this._tiles[n];a&&(Ke(a.el),delete this._tiles[n],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){Ee(n,"leaflet-tile");var a=this.getTileSize();n.style.width=a.x+"px",n.style.height=a.y+"px",n.onselectstart=g,n.onmousemove=g,be.ielt9&&this.options.opacity<1&&Yt(n,this.options.opacity)},_addTile:function(n,a){var c=this._getTilePos(n),u=this._tileCoordsToKey(n),f=this.createTile(this._wrapCoords(n),d(this._tileReady,this,n));this._initTile(f),this.createTile.length<2&&D(d(this._tileReady,this,n,null,f)),ot(f,c),this._tiles[u]={el:f,coords:n,current:!0},a.appendChild(f),this.fire("tileloadstart",{tile:f,coords:n})},_tileReady:function(n,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:n});var u=this._tileCoordsToKey(n);c=this._tiles[u],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Yt(c.el,0),J(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(Ee(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),be.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var a=new U(this._wrapX?b(n.x,this._wrapX):n.x,this._wrapY?b(n.y,this._wrapY):n.y);return a.z=n.z,a},_pxBoundsToTileRange:function(n){var a=this.getTileSize();return new $(n.min.unscaleBy(a).floor(),n.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function ry(n){return new oi(n)}var ur=oi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,a){this._url=n,a=y(this,a),a.detectRetina&&be.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,a){return this._url===n&&a===void 0&&(a=!0),this._url=n,a||this.redraw(),this},createTile:function(n,a){var c=document.createElement("img");return Pe(c,"load",d(this._tileOnLoad,this,a,c)),Pe(c,"error",d(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(n),c},getTileUrl:function(n){var a={r:be.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-n.y;this.options.tms&&(a.y=c),a["-y"]=c}return x(this._url,o(a,this.options))},_tileOnLoad:function(n,a){be.ielt9?setTimeout(d(n,this,null,a),0):n(null,a)},_tileOnError:function(n,a,c){var u=this.options.errorTileUrl;u&&a.getAttribute("src")!==u&&(a.src=u),n(c,a)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,u=this.options.zoomOffset;return c&&(n=a-n),n+u},_getSubdomain:function(n){var a=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var n,a;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(a=this._tiles[n].el,a.onload=g,a.onerror=g,!a.complete)){a.src=A;var c=this._tiles[n].coords;Ke(a),delete this._tiles[n],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(n){var a=this._tiles[n];if(a)return a.el.setAttribute("src",A),oi.prototype._removeTile.call(this,n)},_tileReady:function(n,a,c){if(!(!this._map||c&&c.getAttribute("src")===A))return oi.prototype._tileReady.call(this,n,a,c)}});function Mh(n,a){return new ur(n,a)}var Rh=ur.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,a){this._url=n;var c=o({},this.defaultWmsParams);for(var u in a)u in this.options||(c[u]=a[u]);a=y(this,a);var f=a.detectRetina&&be.retina?2:1,j=this.getTileSize();c.width=j.x*f,c.height=j.y*f,this.wmsParams=c},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,ur.prototype.onAdd.call(this,n)},getTileUrl:function(n){var a=this._tileCoordsToNwSe(n),c=this._crs,u=G(c.project(a[0]),c.project(a[1])),f=u.min,j=u.max,R=(this._wmsVersion>=1.3&&this._crs===Sh?[f.y,f.x,j.y,j.x]:[f.x,f.y,j.x,j.y]).join(","),B=ur.prototype.getTileUrl.call(this,n);return B+C(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+R},setParams:function(n,a){return o(this.wmsParams,n),a||this.redraw(),this}});function iy(n,a){return new Rh(n,a)}ur.WMS=Rh,Mh.wms=iy;var In=un.extend({options:{padding:.1},initialize:function(n){y(this,n),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ee(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,a){var c=this._map.getZoomScale(a,this._zoom),u=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,a),j=u.multiplyBy(-c).add(f).subtract(this._map._getNewPixelOrigin(n,a));be.any3d?Ms(this._container,j,c):ot(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-n)).round();this._bounds=new $(c,c.add(a.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Oh=In.extend({options:{tolerance:0},getEvents:function(){var n=In.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){In.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");Pe(n,"mousemove",this._onMouseMove,this),Pe(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,Ke(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var a in this._layers)n=this._layers[a],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){In.prototype._update.call(this);var n=this._bounds,a=this._container,c=n.getSize(),u=be.retina?2:1;ot(a,n.min),a.width=u*c.x,a.height=u*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",be.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){In.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[m(n)]=n;var a=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var a=n._order,c=a.next,u=a.prev;c?c.prev=u:this._drawLast=u,u?u.next=c:this._drawFirst=c,delete n._order,delete this._layers[m(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var a=n.options.dashArray.split(/[, ]+/),c=[],u,f;for(f=0;f<a.length;f++){if(u=Number(a[f]),isNaN(u))return;c.push(u)}n.options._dashArray=c}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var a=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $,this._redrawBounds.extend(n._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(n._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var a=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var u=this._drawFirst;u;u=u.next)n=u.layer,(!a||n._pxBounds&&n._pxBounds.intersects(a))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,a){if(this._drawing){var c,u,f,j,R=n._parts,B=R.length,H=this._ctx;if(B){for(H.beginPath(),c=0;c<B;c++){for(u=0,f=R[c].length;u<f;u++)j=R[c][u],H[u?"lineTo":"moveTo"](j.x,j.y);a&&H.closePath()}this._fillStroke(H,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var a=n._point,c=this._ctx,u=Math.max(Math.round(n._radius),1),f=(Math.max(Math.round(n._radiusY),1)||u)/u;f!==1&&(c.save(),c.scale(1,f)),c.beginPath(),c.arc(a.x,a.y/f,u,0,Math.PI*2,!1),f!==1&&c.restore(),this._fillStroke(c,n)}},_fillStroke:function(n,a){var c=a.options;c.fill&&(n.globalAlpha=c.fillOpacity,n.fillStyle=c.fillColor||c.color,n.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(n.setLineDash&&n.setLineDash(a.options&&a.options._dashArray||[]),n.globalAlpha=c.opacity,n.lineWidth=c.weight,n.strokeStyle=c.color,n.lineCap=c.lineCap,n.lineJoin=c.lineJoin,n.stroke())},_onClick:function(n){for(var a=this._map.mouseEventToLayerPoint(n),c,u,f=this._drawFirst;f;f=f.next)c=f.layer,c.options.interactive&&c._containsPoint(a)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(c))&&(u=c);this._fireEvent(u?[u]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,a)}},_handleMouseOut:function(n){var a=this._hoveredLayer;a&&(tt(this._container,"leaflet-interactive"),this._fireEvent([a],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,a){if(!this._mouseHoverThrottled){for(var c,u,f=this._drawFirst;f;f=f.next)c=f.layer,c.options.interactive&&c._containsPoint(a)&&(u=c);u!==this._hoveredLayer&&(this._handleMouseOut(n),u&&(Ee(this._container,"leaflet-interactive"),this._fireEvent([u],n,"mouseover"),this._hoveredLayer=u)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,a,c){this._map._fireDOMEvent(a,c||a.type,n)},_bringToFront:function(n){var a=n._order;if(a){var c=a.next,u=a.prev;if(c)c.prev=u;else return;u?u.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(n)}},_bringToBack:function(n){var a=n._order;if(a){var c=a.next,u=a.prev;if(u)u.next=c;else return;c?c.prev=u:u&&(this._drawLast=u),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(n)}}});function Ah(n){return be.canvas?new Oh(n):null}var li=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ay={_initContainer:function(){this._container=Ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(In.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var a=n._container=li("shape");Ee(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",n._path=li("path"),a.appendChild(n._path),this._updateStyle(n),this._layers[m(n)]=n},_addPath:function(n){var a=n._container;this._container.appendChild(a),n.options.interactive&&n.addInteractiveTarget(a)},_removePath:function(n){var a=n._container;Ke(a),n.removeInteractiveTarget(a),delete this._layers[m(n)]},_updateStyle:function(n){var a=n._stroke,c=n._fill,u=n.options,f=n._container;f.stroked=!!u.stroke,f.filled=!!u.fill,u.stroke?(a||(a=n._stroke=li("stroke")),f.appendChild(a),a.weight=u.weight+"px",a.color=u.color,a.opacity=u.opacity,u.dashArray?a.dashStyle=k(u.dashArray)?u.dashArray.join(" "):u.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=u.lineCap.replace("butt","flat"),a.joinstyle=u.lineJoin):a&&(f.removeChild(a),n._stroke=null),u.fill?(c||(c=n._fill=li("fill")),f.appendChild(c),c.color=u.fillColor||u.color,c.opacity=u.fillOpacity):c&&(f.removeChild(c),n._fill=null)},_updateCircle:function(n){var a=n._point.round(),c=Math.round(n._radius),u=Math.round(n._radiusY||c);this._setPath(n,n._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+u+" 0,"+65535*360)},_setPath:function(n,a){n._path.v=a},_bringToFront:function(n){ir(n._container)},_bringToBack:function(n){ar(n._container)}},Ra=be.vml?li:he,ci=In.extend({_initContainer:function(){this._container=Ra("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ra("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ke(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){In.prototype._update.call(this);var n=this._bounds,a=n.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),ot(c,n.min),c.setAttribute("viewBox",[n.min.x,n.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(n){var a=n._path=Ra("path");n.options.className&&Ee(a,n.options.className),n.options.interactive&&Ee(a,"leaflet-interactive"),this._updateStyle(n),this._layers[m(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Ke(n._path),n.removeInteractiveTarget(n._path),delete this._layers[m(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var a=n._path,c=n.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(n,a){this._setPath(n,ye(n._parts,a))},_updateCircle:function(n){var a=n._point,c=Math.max(Math.round(n._radius),1),u=Math.max(Math.round(n._radiusY),1)||c,f="a"+c+","+u+" 0 1,0 ",j=n._empty()?"M0 0":"M"+(a.x-c)+","+a.y+f+c*2+",0 "+f+-c*2+",0 ";this._setPath(n,j)},_setPath:function(n,a){n._path.setAttribute("d",a)},_bringToFront:function(n){ir(n._path)},_bringToBack:function(n){ar(n._path)}});be.vml&&ci.include(ay);function Ih(n){return be.svg||be.vml?new ci(n):null}Re.include({getRenderer:function(n){var a=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var a=this._paneRenderers[n];return a===void 0&&(a=this._createRenderer({pane:n}),this._paneRenderers[n]=a),a},_createRenderer:function(n){return this.options.preferCanvas&&Ah(n)||Ih(n)}});var zh=cr.extend({initialize:function(n,a){cr.prototype.initialize.call(this,this._boundsToLatLngs(n),a)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=ue(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function oy(n,a){return new zh(n,a)}ci.create=Ra,ci.pointsToPath=ye,An.geometryToLayer=ka,An.coordsToLatLng=ql,An.coordsToLatLngs=Ca,An.latLngToCoords=Gl,An.latLngsToCoords=Pa,An.getFeature=dr,An.asFeature=Ea,Re.mergeOptions({boxZoom:!0});var Dh=Sn.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ei(),Ll(),this._startPoint=this._map.mouseEventToContainerPoint(n),Pe(document,{contextmenu:As,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Ae("div","leaflet-zoom-box",this._container),Ee(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var a=new $(this._point,this._startPoint),c=a.getSize();ot(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ke(this._box),tt(this._container,"leaflet-crosshair")),ti(),Tl(),Ue(document,{contextmenu:As,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var a=new ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Re.addInitHook("addHandler","boxZoom",Dh),Re.mergeOptions({doubleClickZoom:!0});var Fh=Sn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var a=this._map,c=a.getZoom(),u=a.options.zoomDelta,f=n.originalEvent.shiftKey?c-u:c+u;a.options.doubleClickZoom==="center"?a.setZoom(f):a.setZoomAround(n.containerPoint,f)}});Re.addInitHook("addHandler","doubleClickZoom",Fh),Re.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Bh=Sn.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Xn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}Ee(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=ue(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,a){return n-(n-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;n.x<a.min.x&&(n.x=this._viscousLimit(n.x,a.min.x)),n.y<a.min.y&&(n.y=this._viscousLimit(n.y,a.min.y)),n.x>a.max.x&&(n.x=this._viscousLimit(n.x,a.max.x)),n.y>a.max.y&&(n.y=this._viscousLimit(n.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,a=Math.round(n/2),c=this._initialWorldOffset,u=this._draggable._newPos.x,f=(u-a+c)%n+a-c,j=(u+a+c)%n-a-c,R=Math.abs(f+c)<Math.abs(j+c)?f:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=R},_onDragEnd:function(n){var a=this._map,c=a.options,u=!c.inertia||n.noInertia||this._times.length<2;if(a.fire("dragend",n),u)a.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,R=c.easeLinearity,B=f.multiplyBy(R/j),H=B.distanceTo([0,0]),X=Math.min(c.inertiaMaxSpeed,H),le=B.multiplyBy(X/H),Se=X/(c.inertiaDeceleration*R),Le=le.multiplyBy(-Se/2).round();!Le.x&&!Le.y?a.fire("moveend"):(Le=a._limitOffset(Le,a.options.maxBounds),D(function(){a.panBy(Le,{duration:Se,easeLinearity:R,noMoveStart:!0,animate:!0})}))}}});Re.addInitHook("addHandler","dragging",Bh),Re.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Uh=Sn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),Pe(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,a=document.documentElement,c=n.scrollTop||a.scrollTop,u=n.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(u,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var a=this._panKeys={},c=this.keyCodes,u,f;for(u=0,f=c.left.length;u<f;u++)a[c.left[u]]=[-1*n,0];for(u=0,f=c.right.length;u<f;u++)a[c.right[u]]=[n,0];for(u=0,f=c.down.length;u<f;u++)a[c.down[u]]=[0,n];for(u=0,f=c.up.length;u<f;u++)a[c.up[u]]=[0,-1*n]},_setZoomDelta:function(n){var a=this._zoomKeys={},c=this.keyCodes,u,f;for(u=0,f=c.zoomIn.length;u<f;u++)a[c.zoomIn[u]]=n;for(u=0,f=c.zoomOut.length;u<f;u++)a[c.zoomOut[u]]=-n},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=n.keyCode,c=this._map,u;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(u=this._panKeys[a],n.shiftKey&&(u=F(u).multiplyBy(3)),c.options.maxBounds&&(u=c._limitOffset(F(u),c.options.maxBounds)),c.options.worldCopyJump){var f=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(u)));c.panTo(f)}else c.panBy(u)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;As(n)}}});Re.addInitHook("addHandler","keyboard",Uh),Re.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $h=Sn.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var a=hh(n),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var u=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),u),As(n)},_performZoom:function(){var n=this._map,a=n.getZoom(),c=this._map.options.zoomSnap||0;n._stop();var u=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(u))))/Math.LN2,j=c?Math.ceil(f/c)*c:f,R=n._limitZoom(a+(this._delta>0?j:-j))-a;this._delta=0,this._startTime=null,R&&(n.options.scrollWheelZoom==="center"?n.setZoom(a+R):n.setZoomAround(this._lastMousePos,a+R))}});Re.addInitHook("addHandler","scrollWheelZoom",$h);var ly=600;Re.mergeOptions({tapHold:be.touchNative&&be.safari&&be.mobile,tapTolerance:15});var Zh=Sn.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var a=n.touches[0];this._startPos=this._newPos=new U(a.clientX,a.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(Pe(document,"touchend",yt),Pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),ly),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Ue(document,"touchend",yt),Ue(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(n){var a=n.touches[0];this._newPos=new U(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,a){var c=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Re.addInitHook("addHandler","tapHold",Zh),Re.mergeOptions({touchZoom:be.touch,bounceAtZoomLimits:!0});var Hh=Sn.extend({addHooks:function(){Ee(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var a=this._map;if(!(!n.touches||n.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(n.touches[0]),u=a.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(u)._divideBy(2))),this._startDist=c.distanceTo(u),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),yt(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(n.touches[0]),u=a.mouseEventToContainerPoint(n.touches[1]),f=c.distanceTo(u)/this._startDist;if(this._zoom=a.getScaleZoom(f,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&f<1||this._zoom>a.getMaxZoom()&&f>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var j=c._add(u)._divideBy(2)._subtract(this._centerPoint);if(f===1&&j.x===0&&j.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var R=d(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(R,this,!0),yt(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Re.addInitHook("addHandler","touchZoom",Hh),Re.BoxZoom=Dh,Re.DoubleClickZoom=Fh,Re.Drag=Bh,Re.Keyboard=Uh,Re.ScrollWheelZoom=$h,Re.TapHold=Zh,Re.TouchZoom=Hh,r.Bounds=$,r.Browser=be,r.CRS=q,r.Canvas=Oh,r.Circle=Vl,r.CircleMarker=Sa,r.Class=se,r.Control=dn,r.DivIcon=Th,r.DivOverlay=kn,r.DomEvent=k0,r.DomUtil=N0,r.Draggable=Xn,r.Evented=_e,r.FeatureGroup=Rn,r.GeoJSON=An,r.GridLayer=oi,r.Handler=Sn,r.Icon=lr,r.ImageOverlay=La,r.LatLng=xe,r.LatLngBounds=ce,r.Layer=un,r.LayerGroup=or,r.LineUtil=F0,r.Map=Re,r.Marker=Na,r.Mixin=R0,r.Path=es,r.Point=U,r.PolyUtil=O0,r.Polygon=cr,r.Polyline=On,r.Popup=Ta,r.PosAnimation=mh,r.Projection=B0,r.Rectangle=zh,r.Renderer=In,r.SVG=ci,r.SVGOverlay=Lh,r.TileLayer=ur,r.Tooltip=Ma,r.Transformation=fe,r.Util=te,r.VideoOverlay=Eh,r.bind=d,r.bounds=G,r.canvas=Ah,r.circle=G0,r.circleMarker=q0,r.control=ri,r.divIcon=sy,r.extend=o,r.featureGroup=H0,r.geoJSON=Ph,r.geoJson=Y0,r.gridLayer=ry,r.icon=W0,r.imageOverlay=J0,r.latLng=ie,r.latLngBounds=ue,r.layerGroup=Z0,r.map=C0,r.marker=V0,r.point=F,r.polygon=Q0,r.polyline=K0,r.popup=ty,r.rectangle=oy,r.setOptions=y,r.stamp=m,r.svg=Ih,r.svgOverlay=ey,r.tileLayer=Mh,r.tooltip=ny,r.transformation=ve,r.version=i,r.videoOverlay=X0;var cy=window.L;r.noConflict=function(){return window.L=cy,this},window.L=r})})(Od,Od.exports);var Qr=Od.exports;const Ts=Ff(Qr);function wl(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function _l(e,t){return t==null?function(i,o){const l=v.useRef();return l.current||(l.current=e(i,o)),l}:function(i,o){const l=v.useRef();l.current||(l.current=e(i,o));const d=v.useRef(i),{instance:h}=l.current;return v.useEffect(function(){d.current!==i&&(t(h,i,d.current),d.current=i)},[h,i,o]),l}}function qx(e,t){v.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var l;(l=t.layerContainer)==null||l.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function Gx(e){return function(r){const i=Uu(),o=e(bl(r,i),i);return $x(i.map,r.attribution),$u(o.current,r.eventHandlers),qx(o.current,i),o}}function rj(e,t){const r=v.useRef();v.useEffect(function(){if(t.pathOptions!==r.current){const o=t.pathOptions??{};e.instance.setStyle(o),r.current=o}},[e,t])}function ij(e){return function(r){const i=Uu(),o=e(bl(r,i),i);return $u(o.current,r.eventHandlers),qx(o.current,i),rj(o.current,r),o}}function aj(e,t){const r=_l(e,t),i=Gx(r);return Vx(i)}function oj(e,t){const r=_l(e),i=sj(r,t);return tj(i)}function lj(e,t){const r=_l(e,t),i=ij(r);return Vx(i)}function cj(e,t){const r=_l(e,t),i=Gx(r);return nj(i)}function dj(e,t,r){const{opacity:i,zIndex:o}=t;i!=null&&i!==r.opacity&&e.setOpacity(i),o!=null&&o!==r.zIndex&&e.setZIndex(o)}const uj=lj(function({center:t,children:r,...i},o){const l=new Qr.Circle(t,i);return wl(l,Zx(o,{overlayContainer:l}))},J1);function Ad(){return Ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ad.apply(this,arguments)}function hj({bounds:e,boundsOptions:t,center:r,children:i,className:o,id:l,placeholder:d,style:h,whenReady:m,zoom:p,...b},g){const[S]=v.useState({className:o,id:l,style:h}),[w,N]=v.useState(null);v.useImperativeHandle(g,()=>(w==null?void 0:w.map)??null,[w]);const y=v.useCallback(_=>{if(_!==null&&w===null){const x=new Qr.Map(_,b);r!=null&&p!=null?x.setView(r,p):e!=null&&x.fitBounds(e,t),m!=null&&x.whenReady(m),N(ej(x))}},[]);v.useEffect(()=>()=>{w==null||w.map.remove()},[w]);const C=w?Ie.createElement(Wx,{value:w},i):d??null;return Ie.createElement("div",Ad({},S,{ref:y}),C)}const pa=v.forwardRef(hj),Kn=aj(function({position:t,...r},i){const o=new Qr.Marker(t,r);return wl(o,Zx(i,{overlayContainer:o}))},function(t,r,i){r.position!==i.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==i.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==i.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==i.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),Qn=oj(function(t,r){const i=new Qr.Popup(t,r.overlayContainer);return wl(i,r)},function(t,r,{position:i},o){v.useEffect(function(){const{instance:d}=t;function h(p){p.popup===d&&(d.update(),o(!0))}function m(p){p.popup===d&&o(!1)}return r.map.on({popupopen:h,popupclose:m}),r.overlayContainer==null?(i!=null&&d.setLatLng(i),d.openOn(r.map)):r.overlayContainer.bindPopup(d),function(){var b;r.map.off({popupopen:h,popupclose:m}),(b=r.overlayContainer)==null||b.unbindPopup(),r.map.removeLayer(d)}},[t,r,o,i])}),ga=cj(function({url:t,...r},i){const o=new Qr.TileLayer(t,bl(r,i));return wl(o,i)},function(t,r,i){dj(t,r,i);const{url:o}=r;o!=null&&o!==i.url&&t.setUrl(o)}),zf={user:[{text:" Need help NOW!",urgent:!0},{text:" Being followed",urgent:!0},{text:" Location changed",urgent:!1},{text:" I'm safe now",urgent:!1},{text:" Send police immediately",urgent:!0},{text:" Still waiting for help",urgent:!1}],police:[{text:" On my way",urgent:!1},{text:" Share your exact location",urgent:!1},{text:" Arrived at location",urgent:!1},{text:" Searching the area",urgent:!1},{text:" Backup requested",urgent:!0},{text:" Situation resolved",urgent:!1}],admin:[{text:" Monitoring situation",urgent:!1},{text:" Police dispatched",urgent:!1},{text:" Please stay calm",urgent:!1},{text:" Help is on the way",urgent:!1},{text:" Confirm your location",urgent:!1},{text:" Additional units alerted",urgent:!0}]},Zu=({sosAlertId:e,onClose:t,isOpen:r})=>{var Ce;const{user:i}=Mn(),[o,l]=v.useState([]),[d,h]=v.useState(""),[m,p]=v.useState(!0),[b,g]=v.useState(!1),[S,w]=v.useState(null),[N,y]=v.useState(null),C=v.useRef(null),_=v.useRef(null),x=v.useRef(o),[k,E]=v.useState(!1),[A,M]=v.useState(0),[P,I]=v.useState(!1),z=v.useRef(null),V=v.useRef([]),D=v.useRef(null),J=v.useRef(0),[te,se]=v.useState(null),ge=v.useRef(null);v.useEffect(()=>{x.current=o},[o]);const ae=()=>{var Q;(Q=C.current)==null||Q.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{if(r&&e)return U(),_e(),_.current=setInterval(()=>{T()},2e3),()=>{_.current&&clearInterval(_.current)}},[r,e]),v.useEffect(()=>{ae()},[o]);const _e=async()=>{var Q;try{const he=await rs.getChatInfo(e);y((Q=he==null?void 0:he.data)==null?void 0:Q.data)}catch(he){console.error("Error fetching chat info:",he)}},U=async()=>{var Q,he,ye;try{p(!0),w(null);const O=await rs.getMessages(e);l(((Q=O==null?void 0:O.data)==null?void 0:Q.data)||[])}catch(O){console.error("Error fetching messages:",O),w(((ye=(he=O.response)==null?void 0:he.data)==null?void 0:ye.message)||"Failed to load messages")}finally{p(!1)}},T=async()=>{var he,ye;const Q=x.current;if(Q.length===0){try{const O=await rs.getMessages(e),K=((he=O==null?void 0:O.data)==null?void 0:he.data)||[];K.length>0&&l(K)}catch(O){console.error("Error fetching messages:",O)}return}try{const O=Q[Q.length-1],K=await rs.getMessages(e,O.createdAt),oe=((ye=K==null?void 0:K.data)==null?void 0:ye.data)||[];oe.length>0&&l(de=>[...de,...oe])}catch(O){console.error("Error fetching new messages:",O)}},F=async Q=>{var he,ye,O;if(Q.preventDefault(),!(!d.trim()||b)){g(!0);try{const K=await rs.sendMessage(e,d.trim());(he=K==null?void 0:K.data)!=null&&he.data&&l(oe=>[...oe,K.data.data]),h("")}catch(K){console.error("Error sending message:",K),w(((O=(ye=K.response)==null?void 0:ye.data)==null?void 0:O.message)||"Failed to send message")}finally{g(!1)}}},$=async Q=>{var he,ye,O;if(!b){g(!0);try{const K=await rs.sendMessage(e,Q);(he=K==null?void 0:K.data)!=null&&he.data&&l(oe=>[...oe,K.data.data])}catch(K){console.error("Error sending message:",K),w(((O=(ye=K.response)==null?void 0:ye.data)==null?void 0:O.message)||"Failed to send message")}finally{g(!1)}}},G=async()=>{try{const Q=await navigator.mediaDevices.getUserMedia({audio:!0}),he=new MediaRecorder(Q);z.current=he,V.current=[],he.ondataavailable=ye=>{ye.data.size>0&&V.current.push(ye.data)},he.onstop=async()=>{const ye=new Blob(V.current,{type:"audio/webm"}),O=new FileReader;O.readAsDataURL(ye),O.onloadend=async()=>{const K=O.result;await ue(K,J.current)},Q.getTracks().forEach(K=>K.stop())},he.start(),E(!0),M(0),J.current=0,D.current=setInterval(()=>{J.current+=1,M(J.current)},1e3)}catch(Q){console.error("Error starting recording:",Q),w("Could not access microphone")}},ce=()=>{z.current&&k&&(z.current.stop(),E(!1),D.current&&clearInterval(D.current))},ue=async(Q,he)=>{var ye;g(!0);try{const O=await rs.sendAudioMessage(e,Q,he);(ye=O==null?void 0:O.data)!=null&&ye.data&&l(K=>[...K,O.data.data])}catch(O){console.error("Error sending audio:",O),w("Failed to send audio message")}finally{g(!1),M(0),J.current=0}},xe=(Q,he)=>{if(te===Q)ge.current&&(ge.current.pause(),ge.current=null),se(null);else{ge.current&&ge.current.pause();const ye=new Audio(he);ye.onended=()=>se(null),ye.play(),ge.current=ye,se(Q)}},ie=async()=>{var Q;I(!0);try{const he=await new Promise((de,Z)=>{navigator.geolocation.getCurrentPosition(de,Z,{enableHighAccuracy:!0,timeout:1e4})}),{latitude:ye,longitude:O}=he.coords;let K="";try{K=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${ye}&lon=${O}&format=json`)).json()).display_name||""}catch{K=""}const oe=await rs.sendLocationMessage(e,{lat:ye,lng:O,address:K});(Q=oe==null?void 0:oe.data)!=null&&Q.data&&l(de=>[...de,oe.data.data])}catch(he){console.error("Error sharing location:",he),w("Could not get location")}finally{I(!1)}},q=(Q,he)=>{window.open(`https://www.google.com/maps?q=${Q},${he}`,"_blank")},Ne=Q=>{const he=Math.floor(Q/60),ye=Q%60;return`${he}:${ye.toString().padStart(2,"0")}`},Y=zf[(i==null?void 0:i.role)==="admin"?"admin":(i==null?void 0:i.role)==="police"?"police":"user"]||zf.user,fe=Q=>{switch(Q){case"user":return"bg-red-100 text-red-800";case"police":return"bg-blue-100 text-blue-800";case"admin":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},ve=(Q,he)=>{if(he)return"bg-blue-600 text-white";switch(Q){case"user":return"bg-red-50 text-gray-900 border border-red-100";case"police":return"bg-blue-50 text-gray-900 border border-blue-100";case"admin":return"bg-purple-50 text-gray-900 border border-purple-100";default:return"bg-gray-100 text-gray-900"}};return r?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg h-[85vh] sm:h-[600px] flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:s.jsx(Ss,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Emergency Chat"}),s.jsxs("p",{className:"text-blue-100 text-xs",children:[((Ce=N==null?void 0:N.participants)==null?void 0:Ce.length)||0," participants"]})]})]}),s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors",children:s.jsx(Jn,{className:"w-5 h-5 text-white"})})]}),(N==null?void 0:N.participants)&&s.jsxs("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-100 flex items-center gap-2 overflow-x-auto",children:[s.jsx(We,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),N.participants.map((Q,he)=>s.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ${fe(Q.role)}`,children:[Q.name," (",Q.role,")"]},he))]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:[m?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(st,{className:"w-6 h-6 animate-spin text-blue-600"})}):S?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx(vn,{className:"w-10 h-10 text-red-400 mb-2"}),s.jsx("p",{className:"text-gray-600 text-sm",children:S}),s.jsx("button",{onClick:U,className:"mt-3 text-blue-600 text-sm font-medium hover:underline",children:"Try again"})]}):o.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx(Ss,{className:"w-10 h-10 text-gray-300 mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No messages yet"}),s.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Start the conversation"})]}):o.map((Q,he)=>{const ye=Q.sender===(i==null?void 0:i._id)||Q.sender===(i==null?void 0:i.id);return s.jsx("div",{className:`flex ${ye?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[80%] ${ye?"order-1":"order-2"}`,children:[!ye&&s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${fe(Q.senderRole)}`,children:Q.senderName})}),s.jsxs("div",{className:`px-4 py-2.5 rounded-2xl ${ve(Q.senderRole,ye)} ${ye?"rounded-br-md":"rounded-bl-md"}`,children:[(!Q.messageType||Q.messageType==="text")&&s.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:Q.message}),Q.messageType==="audio"&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>xe(Q._id,Q.audioData),className:`w-8 h-8 rounded-full flex items-center justify-center ${ye?"bg-white/20 hover:bg-white/30":"bg-gray-200 hover:bg-gray-300"}`,children:te===Q._id?s.jsx(yx,{className:`w-4 h-4 ${ye?"text-white":"text-gray-700"}`}):s.jsx(vx,{className:`w-4 h-4 ${ye?"text-white":"text-gray-700"}`})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:`text-sm ${ye?"text-white":"text-gray-900"}`,children:" Voice message"}),Q.audioDuration>0&&s.jsx("span",{className:`text-xs ${ye?"text-white/70":"text-gray-500"}`,children:Ne(Q.audioDuration)})]})]}),Q.messageType==="location"&&Q.location&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Te,{className:`w-4 h-4 ${ye?"text-white":"text-red-500"}`}),s.jsx("span",{className:`text-sm font-medium ${ye?"text-white":"text-gray-900"}`,children:" Location shared"})]}),Q.location.address&&s.jsx("p",{className:`text-xs ${ye?"text-white/80":"text-gray-600"} line-clamp-2`,children:Q.location.address}),s.jsxs("button",{onClick:()=>q(Q.location.lat,Q.location.lng),className:`flex items-center gap-1 text-xs font-medium ${ye?"text-white hover:text-white/80":"text-blue-600 hover:text-blue-700"}`,children:[s.jsx(ca,{className:"w-3 h-3"}),"Open in Maps"]})]})]}),s.jsx("p",{className:`text-xs text-gray-400 mt-1 ${ye?"text-right":"text-left"}`,children:new Date(Q.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},Q._id||he)}),s.jsx("div",{ref:C})]}),s.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ur,{className:"w-3.5 h-3.5 text-amber-500"}),s.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Quick responses"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map((Q,he)=>s.jsx("button",{onClick:()=>$(Q.text),disabled:b,className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed ${Q.urgent?"bg-red-100 text-red-700 hover:bg-red-200 border border-red-200":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:Q.text},he))})]}),s.jsxs("div",{className:"p-4 border-t border-gray-100 bg-white",children:[k&&s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3 py-2 px-4 bg-red-50 rounded-lg border border-red-100",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),s.jsxs("span",{className:"text-red-600 font-medium text-sm",children:["Recording... ",Ne(A)]}),s.jsx("button",{onClick:ce,className:"ml-2 p-1.5 rounded-lg bg-red-100 hover:bg-red-200 text-red-600",children:s.jsx(qo,{className:"w-4 h-4"})})]}),s.jsxs("form",{onSubmit:F,className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:ie,disabled:b||P||k,className:"w-10 h-10 rounded-xl bg-green-50 text-green-600 flex items-center justify-center hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border border-green-200",title:"Share location",children:P?s.jsx(st,{className:"w-5 h-5 animate-spin"}):s.jsx(Te,{className:"w-5 h-5"})}),s.jsx("button",{type:"button",onClick:k?ce:G,disabled:b||P,className:`w-10 h-10 rounded-xl flex items-center justify-center transition-colors border ${k?"bg-red-500 text-white border-red-500 hover:bg-red-600":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"} disabled:opacity-50 disabled:cursor-not-allowed`,title:k?"Stop recording":"Record voice message",children:k?s.jsx(qo,{className:"w-5 h-5"}):s.jsx(xx,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",value:d,onChange:Q=>h(Q.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",disabled:b||k}),s.jsx("button",{type:"submit",disabled:!d.trim()||b||k,className:"w-10 h-10 rounded-xl bg-blue-600 text-white flex items-center justify-center hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?s.jsx(st,{className:"w-5 h-5 animate-spin"}):s.jsx(na,{className:"w-5 h-5"})})]})]})]})}):null},mj=()=>new Promise((e,t)=>{if(!navigator.geolocation){t(new Error("Geolocation is not supported by your browser"));return}navigator.geolocation.getCurrentPosition(r=>{e({lat:r.coords.latitude,lng:r.coords.longitude})},r=>{let i="Unable to retrieve your location";switch(r.code){case r.PERMISSION_DENIED:i="Location permission denied. Please enable location access.";break;case r.POSITION_UNAVAILABLE:i="Location information is unavailable.";break;case r.TIMEOUT:i="Location request timed out.";break}t(new Error(i))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),fj=Ts.divIcon({className:"sos-marker",html:'<div style="background:#dc2626;width:28px;height:28px;border-radius:50%;border:3px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.3);"></div>',iconSize:[28,28],iconAnchor:[14,14]}),pj=Ts.divIcon({className:"police-station-marker",html:'<div style="background:#2563eb;width:28px;height:28px;border-radius:50%;border:3px solid white;box-shadow:0 2px 8px rgba(37,99,235,0.5);display:flex;align-items:center;justify-content:center;"><span style="color:white;font-size:14px;font-weight:bold;">P</span></div>',iconSize:[28,28],iconAnchor:[14,14]}),gj=(e,t)=>{window.open(`https://www.google.com/maps?q=${e},${t}`,"_blank","noopener,noreferrer")},xj=()=>{var P,I;const{user:e}=Mn(),[t,r]=v.useState([]),[i,o]=v.useState(!0),[l,d]=v.useState(null),[h,m]=v.useState(!1),[p,b]=v.useState(!1),[g,S]=v.useState(null),[w,N]=v.useState(!1),[y,C]=v.useState(!1),_=v.useRef(null);v.useEffect(()=>{_.current=g},[g]),v.useEffect(()=>{E(),x();const z=setInterval(()=>{k()},5e3);return()=>clearInterval(z)},[]);const x=async()=>{var z,V;try{const D=await to.getUserActiveAlert();(z=D==null?void 0:D.data)!=null&&z.data?S(D.data.data):S(null)}catch(D){((V=D.response)==null?void 0:V.status)===404?S(null):console.error("Failed to check active alert:",D)}},k=async()=>{var z,V;try{const D=await to.getUserActiveAlert(),J=_.current!==null;(z=D==null?void 0:D.data)!=null&&z.data?S(D.data.data):(J&&ee.info("Your SOS alert has been resolved",{autoClose:5e3}),S(null))}catch(D){((V=D.response)==null?void 0:V.status)===404&&(_.current!==null&&ee.info("Your SOS alert has been resolved",{autoClose:5e3}),S(null))}};v.useEffect(()=>{(async()=>{var V;try{o(!0);const D=await ms.getGuardians();r(((V=D==null?void 0:D.data)==null?void 0:V.data)||[])}catch(D){console.error("Failed to fetch guardians:",D),r([])}finally{o(!1)}})()},[]);const E=async()=>{m(!0);try{const z=await mj();d(z),ee.success("Location updated")}catch(z){console.error("Location error:",z),ee.error(z.message)}finally{m(!1)}},A=async()=>{var J,te,se;if(!l){ee.error("Location not available. Try refreshing.");return}const z=t.length,V=z>0?`Send emergency alert to ${z} guardian(s) and nearby police station?`:"No guardians added. Send emergency alert to nearby police station only?";if(window.confirm(V)){b(!0);try{const ge=await to.triggerSOS({lat:l.lat,lng:l.lng}),ae=(J=ge==null?void 0:ge.data)==null?void 0:J.data;await x(),z>0?ee.success(`Alert sent to ${z} guardian(s) and police`,{autoClose:5e3}):ee.success("Alert sent to nearby police station",{autoClose:5e3})}catch(ge){console.error("SOS error:",ge),ee.error(((se=(te=ge.response)==null?void 0:te.data)==null?void 0:se.message)||"Failed to send SOS. Try again.")}finally{b(!1)}}},M=async()=>{var V,D;if(!(!(g!=null&&g._id)||!window.confirm("Are you sure you want to cancel the active SOS alert?"))){N(!0);try{await to.cancelAlert(g._id),S(null),ee.success("SOS alert cancelled")}catch(J){console.error("Cancel error:",J),ee.error(((D=(V=J.response)==null?void 0:V.data)==null?void 0:D.message)||"Failed to cancel alert")}finally{N(!1)}}};return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:"user"}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 min-h-screen bg-gray-50/80 p-4 md:p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-100 flex items-center justify-center",children:s.jsx(Be,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 tracking-tight",children:"Emergency SOS"}),s.jsx("p",{className:"text-gray-500 text-sm mt-0.5",children:"Send your location to guardians in an emergency"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-8 flex flex-col items-center",children:[s.jsx("p",{className:"text-gray-600 text-sm mb-6 text-center",children:"Press the button to send your current location to your guardians and nearby police."}),s.jsx("button",{onClick:A,disabled:p||!l||g,className:`w-40 h-40 rounded-full flex flex-col items-center justify-center transition-all shadow-lg ${p||!l||g?"bg-gray-300 cursor-not-allowed":"bg-red-600 hover:bg-red-700 hover:shadow-red-600/30 active:scale-95"}`,children:p?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-10 h-10 text-white animate-spin mb-2"}),s.jsx("span",{className:"text-white font-semibold text-sm",children:"Sending"})]}):g?s.jsxs(s.Fragment,{children:[s.jsx(dt,{className:"w-10 h-10 text-white mb-2"}),s.jsx("span",{className:"text-white font-bold text-lg",children:"Active"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Be,{className:"w-10 h-10 text-white mb-2"}),s.jsx("span",{className:"text-white font-bold text-xl",children:"SOS"})]})}),g&&s.jsx("button",{onClick:M,disabled:w,className:"mt-4 px-4 py-2 text-sm font-medium text-red-600 hover:text-red-700 border border-red-200 hover:border-red-300 rounded-lg transition-colors disabled:opacity-50",children:w?"Cancelling...":"Cancel Active Alert"}),!l&&!g&&s.jsx("p",{className:"mt-4 text-xs text-amber-600 text-center",children:!l&&"Get your location below."}),!t.length&&!g&&l&&s.jsx("p",{className:"mt-3 text-xs text-gray-500 text-center",children:"Tip: Add guardians to also notify them"})]})}),s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(We,{className:"w-5 h-5 text-gray-500"}),s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Guardians"}),s.jsxs("span",{className:"text-sm text-gray-400",children:["(",i?"":t.length,")"]})]}),i?s.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-2",children:[s.jsx(st,{className:"w-4 h-4 animate-spin"})," Loading guardians"]}):t.length>0?s.jsx("ul",{className:"space-y-3",children:t.slice(0,5).map(z=>s.jsxs("li",{className:"p-3 rounded-xl bg-gray-50 border border-gray-100",children:[s.jsx("p",{className:"font-medium text-gray-900 text-sm",children:z.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-600",children:[s.jsx(Et,{className:"w-3.5 h-3.5"}),z.phone]}),z.email&&s.jsxs("div",{className:"flex items-center gap-2 mt-0.5 text-xs text-gray-600",children:[s.jsx(Gn,{className:"w-3.5 h-3.5"}),z.email]})]},z._id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"No guardians added yet."})]})]}),s.jsxs("div",{className:"mt-6 bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Te,{className:"w-5 h-5 text-red-500"}),s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Your location"})]}),s.jsxs("button",{onClick:E,disabled:h,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium text-red-600 hover:bg-red-50 disabled:opacity-50 transition-colors",children:[h?s.jsx(st,{className:"w-4 h-4 animate-spin"}):s.jsx(on,{className:"w-4 h-4"}),h?"Fetching":"Refresh location"]})]}),s.jsx("div",{className:"p-6",children:h&&!l?s.jsxs("div",{className:"flex items-center justify-center py-8 text-gray-500 text-sm",children:[s.jsx(st,{className:"w-6 h-6 animate-spin mr-2"}),"Getting your location"]}):l?s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[s.jsxs("span",{className:"text-gray-500",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Lat"})," ",l.lat.toFixed(6)]}),s.jsxs("span",{className:"text-gray-500",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Lng"})," ",l.lng.toFixed(6)]}),s.jsxs("button",{onClick:()=>gj(l.lat,l.lng),className:"inline-flex items-center gap-1.5 text-red-600 hover:text-red-700 font-medium",children:[s.jsx(ca,{className:"w-4 h-4"}),"Open in Google Maps"]})]}):s.jsxs("div",{className:"text-center py-6",children:[s.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Location not available."}),s.jsx("button",{onClick:E,className:"px-5 py-2.5 rounded-xl bg-red-600 text-white text-sm font-medium hover:bg-red-700",children:"Get my location"})]})})]}),g&&s.jsxs("div",{className:"mt-6 bg-white rounded-2xl border border-red-200 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-red-100 bg-red-50 flex items-center gap-2",children:[s.jsx(Be,{className:"w-5 h-5 text-red-600"}),s.jsx("h2",{className:"text-base font-semibold text-red-900",children:"Active SOS Alert"})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[g.nearestStation&&s.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(qt,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-blue-900",children:"Assigned Police Station"})]}),s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:g.nearestStation.name}),s.jsxs("p",{className:"text-sm text-blue-700",children:[g.nearestStation.area,", ",g.nearestStation.city]}),g.nearestStation.helpline&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-blue-700",children:[s.jsx(Et,{className:"w-4 h-4"}),s.jsx("span",{children:g.nearestStation.helpline})]})]}),g.assignedOfficers&&g.assignedOfficers.length>0&&s.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Assigned Officers"}),s.jsx("ul",{className:"space-y-2",children:g.assignedOfficers.map((z,V)=>s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-700",children:[s.jsx(We,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-medium",children:z.name||z}),z.phone&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{children:z.phone})]})]},V))})]}),l&&((I=(P=g.nearestStation)==null?void 0:P.location)==null?void 0:I.coordinates)&&s.jsx("div",{className:"rounded-xl overflow-hidden border border-gray-200 h-72 relative z-0",children:s.jsxs(pa,{center:[l.lat,l.lng],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!1,children:[s.jsx(ga,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(Kn,{position:[l.lat,l.lng],icon:fj,children:s.jsxs(Qn,{children:[s.jsx("strong",{children:"Your Location"}),s.jsx("br",{}),"Lat: ",l.lat.toFixed(6),s.jsx("br",{}),"Lng: ",l.lng.toFixed(6)]})}),s.jsx(Kn,{position:[g.nearestStation.location.coordinates[1],g.nearestStation.location.coordinates[0]],icon:pj,children:s.jsxs(Qn,{children:[s.jsx("strong",{children:g.nearestStation.name}),s.jsx("br",{}),g.nearestStation.area,", ",g.nearestStation.city,s.jsx("br",{}),g.nearestStation.helpline&&`Helpline: ${g.nearestStation.helpline}`]})})]})}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-600"}),s.jsx("span",{children:"Your Location"})]}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),s.jsx("span",{children:"Police Station"})]})]}),s.jsxs("button",{onClick:()=>C(!0),className:"w-full mt-4 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Chat with Police & Admin"]})]})]}),g&&s.jsx(Zu,{sosAlertId:g._id,isOpen:y,onClose:()=>C(!1)})]})})]})},yj=()=>{const{user:e,updateUser:t}=Mn(),[r,i]=v.useState([]),[o,l]=v.useState(!1),[d,h]=v.useState(null),[m,p]=v.useState({name:"",phone:"",email:""}),[b,g]=v.useState(!1);v.useEffect(()=>{S()},[]);const S=async()=>{try{const _=await ms.getGuardians();i(_.data.data)}catch{ee.error("Failed to fetch guardians")}},w=async _=>{var x,k;_.preventDefault(),g(!0);try{d?(await ms.updateGuardian(d._id,m),ee.success("Guardian updated successfully")):(await ms.addGuardian(m),ee.success("Guardian added successfully")),S(),C()}catch(E){ee.error(((k=(x=E.response)==null?void 0:x.data)==null?void 0:k.message)||"Operation failed")}finally{g(!1)}},N=async _=>{if(window.confirm("Are you sure you want to delete this guardian?"))try{await ms.deleteGuardian(_),ee.success("Guardian deleted successfully"),S()}catch{ee.error("Failed to delete guardian")}},y=(_=null)=>{_?(h(_),p({name:_.name,phone:_.phone,email:_.email})):(h(null),p({name:"",phone:"",email:""})),l(!0)},C=()=>{l(!1),h(null),p({name:"",phone:"",email:""})};return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:"user"}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Emergency Guardians"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your emergency contacts (Max 5)"})]}),s.jsxs("button",{onClick:()=>y(),disabled:r.length>=5,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(ta,{className:"h-5 w-5"}),s.jsx("span",{children:"Add Guardian"})]})]}),r.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 text-center",children:[s.jsx(We,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Guardians Added"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Add trusted contacts who will receive emergency alerts"}),s.jsx("button",{onClick:()=>y(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Add Your First Guardian"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(_=>s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-red-50 rounded-lg",children:s.jsx(We,{className:"h-6 w-6 text-red-600"})}),s.jsx("div",{children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_.name})})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>y(_),className:"text-blue-600 hover:text-blue-700",children:s.jsx(ea,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>N(_._id),className:"text-red-600 hover:text-red-700",children:s.jsx(fl,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",_.phone]}),s.jsxs("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",_.email]})]})]},_._id))}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:d?"Edit Guardian":"Add Guardian"}),s.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Jn,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),s.jsx("input",{type:"text",required:!0,value:m.name,onChange:_=>p({...m,name:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",required:!0,value:m.phone,onChange:_=>p({...m,phone:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",required:!0,value:m.email,onChange:_=>p({...m,email:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:C,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:b,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50",children:b?"Saving...":d?"Update":"Add"})]})]})]})})]})})]})},vj=Ts.divIcon({className:"nearby-user-marker",html:'<div style="background:#dc2626;width:24px;height:24px;border-radius:50%;border:3px solid white;box-shadow:0 2px 6px rgba(0,0,0,0.3);"></div>',iconSize:[24,24],iconAnchor:[12,12]}),bj=Ts.divIcon({className:"nearby-station-marker",html:'<div style="background:#2563eb;width:22px;height:22px;border-radius:50%;border:2px solid white;box-shadow:0 2px 6px rgba(0,0,0,0.3);"></div>',iconSize:[22,22],iconAnchor:[11,11]}),wj=()=>{const[e,t]=v.useState([]),[r,i]=v.useState(!0),[o,l]=v.useState(""),[d,h]=v.useState(null),[m,p]=v.useState(null),[b,g]=v.useState(!1);v.useEffect(()=>{S()},[]),v.useEffect(()=>{d&&w()},[d]);const S=()=>{if(!navigator.geolocation){p("Geolocation is not supported by your browser."),i(!1);return}navigator.geolocation.getCurrentPosition(x=>{h({lat:x.coords.latitude,lng:x.coords.longitude}),p(null)},()=>{p("Unable to get your location. Please enable location access."),i(!1)})},w=async()=>{if(d)try{i(!0);const x=await re.get("/stations/nearby",{params:{lat:d.lat,lng:d.lng}});t(x.data.data||[])}catch(x){console.error("Error fetching nearby stations:",x),t([])}finally{i(!1)}},N=v.useMemo(()=>{if(!o.trim())return e;const x=o.toLowerCase();return e.filter(k=>k.name&&k.name.toLowerCase().includes(x)||k.area&&k.area.toLowerCase().includes(x)||k.city&&k.city.toLowerCase().includes(x))},[e,o]),y=x=>{var k,E;return x.latitude!=null&&x.longitude!=null?{lat:Number(x.latitude),lng:Number(x.longitude)}:((E=(k=x.location)==null?void 0:k.coordinates)==null?void 0:E.length)===2?{lat:x.location.coordinates[1],lng:x.location.coordinates[0]}:null},C=x=>{const k=y(x);return k?`https://www.google.com/maps/dir/?api=1&destination=${k.lat},${k.lng}`:"#"},_=d?[d.lat,d.lng]:null;return m?s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:"user"}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 min-h-screen bg-gray-50/80 p-4 md:p-8",children:s.jsx("div",{className:"max-w-lg mx-auto",children:s.jsxs("div",{className:"bg-white rounded-2xl border border-red-100 p-8 text-center shadow-sm",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-red-100 flex items-center justify-center mx-auto mb-4",children:s.jsx(Te,{className:"w-7 h-7 text-red-600"})}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Location required"}),s.jsx("p",{className:"text-gray-600 text-sm mb-6",children:m}),s.jsx("button",{onClick:S,className:"px-5 py-2.5 rounded-xl bg-red-600 text-white font-medium hover:bg-red-700 transition-colors",children:"Try again"})]})})})]}):s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:"user"}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 min-h-screen bg-gray-50/80 p-4 md:p-8",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:s.jsx(Te,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 tracking-tight",children:"Nearby police stations"}),s.jsxs("p",{className:"text-gray-500 text-sm mt-0.5",children:["Within 5 km of your location",d&&s.jsxs("span",{className:"text-gray-400 ml-1",children:[" ",d.lat.toFixed(4),", ",d.lng.toFixed(4)]})]})]})]}),s.jsxs("button",{onClick:()=>{g(!0),S(),setTimeout(()=>g(!1),1500)},disabled:r||b,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-gray-200 text-gray-700 text-sm font-medium hover:bg-white hover:border-gray-300 disabled:opacity-50 shrink-0",children:[s.jsx(on,{className:`w-4 h-4 ${b?"animate-spin":""}`}),"Refresh location"]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by name, area, or city...",value:o,onChange:x=>l(x.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none bg-white"})]})}),_&&s.jsxs("div",{className:"mb-6 bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center gap-2",children:[s.jsx(Te,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Map  you and nearby stations"})]}),s.jsx("div",{className:"h-80",children:s.jsxs(pa,{center:_,zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(ga,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(Kn,{position:_,icon:vj,children:s.jsx(Qn,{children:"You are here"})}),N.map(x=>{const k=y(x);return k?s.jsx(Kn,{position:[k.lat,k.lng],icon:bj,children:s.jsxs(Qn,{children:[s.jsx("strong",{children:x.name}),s.jsx("br",{}),x.area,x.city&&`, ${x.city}`,s.jsx("br",{}),x.distance&&s.jsx("span",{className:"text-gray-500",children:x.distance})]})},x._id):null})]})}),s.jsxs("div",{className:"px-4 py-2 flex gap-4 text-xs text-gray-500 border-t border-gray-100",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-red-500"})," Your location"]}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"})," Police stations"]})]})]}),r?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[s.jsx(h_,{className:"w-8 h-8 animate-spin text-blue-500"}),s.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Finding nearby stations"})]}):N.length===0?s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-12 text-center shadow-sm",children:[s.jsx(Te,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"No stations found"}),s.jsx("p",{className:"text-sm text-gray-500",children:o?"Try a different search":"No police stations within 5 km"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(x=>s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-5 hover:shadow-md hover:border-gray-200 transition-all",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center shrink-0",children:s.jsx(Te,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:x.name}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:[x.area,x.city].filter(Boolean).join(", ")||""})]})]}),x.distance&&s.jsx("span",{className:"text-sm font-medium text-blue-600 shrink-0",children:x.distance})]}),x.helpline&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[s.jsx(Et,{className:"w-4 h-4 text-gray-400"}),x.helpline]}),s.jsxs("a",{href:C(x),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 w-full justify-center px-3 py-2 rounded-xl border border-blue-200 text-blue-600 text-sm font-medium hover:bg-blue-50 transition-colors",children:[s.jsx(Gr,{className:"w-4 h-4"}),"Get directions"]})]},x._id))})]})})]})},Kx=(e,t="")=>Ts.divIcon({className:"custom-marker",html:`<div style="background-color:${e};width:24px;height:24px;border-radius:50%;border:3px solid white;box-shadow:0 2px 5px rgba(0,0,0,0.3);display:flex;align-items:center;justify-content:center;color:white;font-size:11px;font-weight:bold;">${t}</div>`,iconSize:[24,24],iconAnchor:[12,12]}),_j=Kx("#dc2626","!"),jj=Kx("#2563eb","P"),Nj=()=>{const e=sr(),[t,r]=v.useState(!1),[i,o]=v.useState(!1),[l,d]=v.useState(""),[h,m]=v.useState(!1),[p,b]=v.useState([]),[g,S]=v.useState(!1),[w,N]=v.useState({description:"",stationId:"",lat:"",lng:""}),[y,C]=v.useState({}),_=w.lat&&w.lng?{lat:parseFloat(w.lat),lng:parseFloat(w.lng)}:null,x=v.useMemo(()=>_?[_.lat,_.lng]:null,[_==null?void 0:_.lat,_==null?void 0:_.lng]),k=()=>{const D={},J=parseFloat(w.lat),te=parseFloat(w.lng);return!w.lat||isNaN(J)?D.lat="Valid latitude is required":(J<-90||J>90)&&(D.lat="Latitude must be between -90 and 90"),!w.lng||isNaN(te)?D.lng="Valid longitude is required":(te<-180||te>180)&&(D.lng="Longitude must be between -180 and 180"),C(D),Object.keys(D).length===0},E=()=>new Promise((D,J)=>{if(!navigator.geolocation){J(new Error("Geolocation is not supported by your browser"));return}navigator.geolocation.getCurrentPosition(te=>{D({lat:te.coords.latitude,lng:te.coords.longitude})},te=>{J(new Error("Unable to get your location. Please enable location access."))})}),A=async(D,J)=>{var te;try{const se=await re.get(`/stations/nearby?lat=${D}&lng=${J}`);se.data.success?(b(se.data.data||[]),S(!0),ee.success(`Found ${((te=se.data.data)==null?void 0:te.length)||0} nearby police stations`)):(ee.error(se.data.message||"No nearby stations found"),b([]),S(!0))}catch(se){console.error("Error fetching nearby stations:",se),ee.error("Failed to fetch nearby stations"),b([]),S(!0)}},M=async()=>{const D=l.trim();if(!D){ee.error("Enter a place name or address");return}m(!0);try{const te=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(D)}&limit=1`,{headers:{Accept:"application/json","User-Agent":"WomenSafetyApp/1.0"}})).json();if(!te||te.length===0){ee.error("Place not found. Try a different name or address.");return}const{lat:se,lon:ge}=te[0],ae=parseFloat(se),_e=parseFloat(ge);N(U=>({...U,lat:String(ae),lng:String(_e)})),C(U=>({...U,lat:void 0,lng:void 0})),await A(ae,_e),ee.success("Location set. Select a police station below.")}catch(J){console.error("Geocode error:",J),ee.error("Could not find that place. Try again or use current location.")}finally{m(!1)}},P=async()=>{o(!0);try{const D=await E();N(J=>({...J,lat:D.lat.toString(),lng:D.lng.toString()})),await A(D.lat,D.lng),ee.success("Location updated successfully!")}catch(D){console.error("Location error:",D),ee.error(D.message)}finally{o(!1)}},I=D=>{const{name:J,value:te}=D.target;if(N(se=>({...se,[J]:te})),J==="lat"||J==="lng"){const se=J==="lat"?te:w.lat,ge=J==="lng"?te:w.lng;if(se&&ge){const ae=parseFloat(se),_e=parseFloat(ge);!isNaN(ae)&&!isNaN(_e)&&ae>=-90&&ae<=90&&_e>=-180&&_e<=180&&A(ae,_e)}}},z=D=>{const{name:J,value:te}=D.target;J==="lat"||J==="lng"?I(D):N(se=>({...se,[J]:te}))},V=async D=>{var J,te;if(D.preventDefault(),!k()){ee.error("Please fix coordinate errors before submitting");return}r(!0);try{const se=await re.post("/complaints",w);ee.success("Complaint filed successfully!"),e("/user/complaints")}catch(se){console.error("Error filing complaint:",se),ee.error(((te=(J=se.response)==null?void 0:J.data)==null?void 0:te.message)||"Failed to file complaint")}finally{r(!1)}};return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:"user"}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 min-h-screen bg-gray-50/80 p-4 md:p-8",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-100 flex items-center justify-center",children:s.jsx(He,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 tracking-tight",children:"File a Complaint"}),s.jsx("p",{className:"text-gray-500 text-sm mt-0.5",children:"Report an incident to the nearest police station"})]})]})}),s.jsx("form",{onSubmit:V,className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsxs("div",{className:"p-6 md:p-8 space-y-8",children:[s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded-full bg-red-100 text-red-600 text-sm font-semibold",children:"1"}),s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"What happened?"})]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-gray-600",children:"Describe the incident in detail"}),s.jsx("textarea",{name:"description",value:w.description,onChange:z,required:!0,rows:"4",className:"w-full px-4 py-3 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-red-500/20 focus:border-red-500 transition-all outline-none resize-none",placeholder:"Include date, time, place, and what occurred. Be as specific as possible."})]}),s.jsx("hr",{className:"border-gray-100"}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded-full bg-red-100 text-red-600 text-sm font-semibold",children:"2"}),s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Where did it happen?"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Search by place or address"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(bn,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:l,onChange:D=>d(D.target.value),onKeyDown:D=>D.key==="Enter"&&(D.preventDefault(),M()),placeholder:"e.g. Connaught Place Delhi, MG Road Bangalore",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500/20 focus:border-red-500 outline-none placeholder-gray-400"})]}),s.jsxs("button",{type:"button",onClick:M,disabled:h,className:"px-5 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 disabled:opacity-50 font-medium text-sm flex items-center justify-center gap-2 transition-colors shrink-0",children:[h?s.jsx(st,{className:"w-4 h-4 animate-spin"}):s.jsx(bn,{className:"w-4 h-4"}),"Search"]})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Or use your current location below."})]}),s.jsxs("button",{type:"button",onClick:P,disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 border-dashed border-gray-200 text-gray-600 hover:border-red-200 hover:bg-red-50/50 hover:text-red-700 disabled:opacity-50 transition-all",children:[i?s.jsx(st,{className:"w-5 h-5 animate-spin text-red-600"}):s.jsx(Gr,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:i?"Getting location":"Use my current location"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Latitude"}),s.jsx("input",{type:"number",step:"any",name:"lat",value:w.lat,onChange:z,required:!0,className:`w-full px-3 py-2.5 text-sm border rounded-lg focus:ring-2 focus:ring-red-500/20 focus:border-red-500 outline-none ${y.lat?"border-red-400":"border-gray-200"}`,placeholder:"28.6139"}),y.lat&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:y.lat})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Longitude"}),s.jsx("input",{type:"number",step:"any",name:"lng",value:w.lng,onChange:z,required:!0,className:`w-full px-3 py-2.5 text-sm border rounded-lg focus:ring-2 focus:ring-red-500/20 focus:border-red-500 outline-none ${y.lng?"border-red-400":"border-gray-200"}`,placeholder:"77.2090"}),y.lng&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:y.lng})]})]}),g&&s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-green-50 text-green-800 text-sm",children:[s.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-green-200 text-green-800 text-xs font-bold",children:""}),"Location set  ",p.length," nearby station",p.length!==1?"s":""," found"]}),g&&_&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Map  drag to pan, scroll to zoom"}),s.jsx("div",{className:"rounded-xl border border-gray-200 overflow-hidden map-wrapper bg-gray-50",children:s.jsxs(pa,{center:x,zoom:14,style:{height:360,width:"100%"},scrollWheelZoom:!0,children:[s.jsx(ga,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(Kn,{position:[_.lat,_.lng],icon:_j,children:s.jsx(Qn,{children:"Incident location"})}),p.map(D=>s.jsx(Kn,{position:[Number(D.latitude),Number(D.longitude)],icon:jj,children:s.jsxs(Qn,{children:[s.jsx("strong",{children:D.name}),s.jsx("br",{}),D.area,"  ",D.distance]})},D._id))]},`${_.lat}-${_.lng}`)}),s.jsxs("div",{className:"flex gap-4 text-xs text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," Incident"]}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"})," Police stations"]})]})]})]})]}),s.jsx("hr",{className:"border-gray-100"}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded-full bg-red-100 text-red-600 text-sm font-semibold",children:"3"}),s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Choose police station"})]}),g?p.length===0?s.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-red-50 border border-red-100 text-red-800 text-sm",children:[s.jsx(Be,{className:"w-5 h-5 shrink-0"}),"No police stations within 5 km. Try another location."]}):s.jsxs(s.Fragment,{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Nearest stations"}),s.jsxs("select",{name:"stationId",value:w.stationId,onChange:z,required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500/20 focus:border-red-500 outline-none bg-white",children:[s.jsx("option",{value:"",children:"Select a station"}),p.map(D=>s.jsxs("option",{value:D._id,children:[D.name,"  ",D.area," (",D.distance||"Nearby",")"]},D._id))]})]}):s.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-amber-50 border border-amber-100 text-amber-800 text-sm",children:[s.jsx(Be,{className:"w-5 h-5 shrink-0"}),"Set the incident location above first to see nearby stations."]}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:s.jsxs("button",{type:"submit",disabled:t||!g||p.length===0,className:"w-full flex items-center justify-center gap-2 px-6 py-4 rounded-xl bg-red-600 text-white font-semibold hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-red-600/20",children:[t?s.jsx(st,{className:"w-5 h-5 animate-spin"}):s.jsx(na,{className:"w-5 h-5"}),t?"Submitting":"Submit complaint"]})})]})]})}),s.jsx("div",{className:"mt-6 p-4 rounded-xl bg-amber-50/80 border border-amber-100",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Be,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-amber-900",children:[s.jsx("p",{className:"font-medium mb-1",children:"Please note"}),s.jsxs("ul",{className:"text-amber-800/90 space-y-0.5 text-xs",children:[s.jsx("li",{children:" File only genuine complaints with accurate details."}),s.jsx("li",{children:" False complaints may lead to legal action."}),s.jsx("li",{children:' Track status under "My Complaints".'})]})]})]})})]})})]})},Sj=()=>{const[e,t]=v.useState([]),[r,i]=v.useState(!0),[o,l]=v.useState(null),[d,h]=v.useState(!1);v.useEffect(()=>{m()},[]);const m=async()=>{try{i(!0);const w=await re.get("/complaints/my-complaints");t(w.data.data||[])}catch(w){console.error("Error fetching complaints:",w)}finally{i(!1)}},p=w=>{switch(w){case"Pending":return{class:"bg-amber-100 text-amber-800 border-amber-200",icon:gt};case"In Progress":return{class:"bg-blue-100 text-blue-800 border-blue-200",icon:Be};case"Resolved":return{class:"bg-green-100 text-green-800 border-green-200",icon:dt};default:return{class:"bg-gray-100 text-gray-700 border-gray-200",icon:He}}},b=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),g=w=>{l(w),h(!0)},S=w=>w.station||w.stationId;return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:"user"}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 min-h-screen bg-gray-50/80 p-4 md:p-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-100 flex items-center justify-center",children:s.jsx(He,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 tracking-tight",children:"My Complaints"}),s.jsx("p",{className:"text-gray-500 text-sm mt-0.5",children:"Track and manage your filed complaints"})]})]}),s.jsxs(ht,{to:"/user/create-complaint",className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl bg-red-600 text-white text-sm font-medium hover:bg-red-700 transition-colors shadow-sm",children:[s.jsx(He,{className:"w-4 h-4"}),"File new complaint"]})]})}),r?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[s.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-red-200 border-t-red-600 animate-spin"}),s.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Loading your complaints"})]}):e.length===0?s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-12 text-center shadow-sm",children:[s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gray-100 flex items-center justify-center mx-auto mb-5",children:s.jsx(He,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No complaints yet"}),s.jsx("p",{className:"text-gray-500 text-sm max-w-sm mx-auto mb-8",children:"You haven't filed any complaints. Report an incident to get help from the nearest police station."}),s.jsxs(ht,{to:"/user/create-complaint",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-red-600 text-white font-medium hover:bg-red-700 transition-colors",children:[s.jsx(He,{className:"w-5 h-5"}),"File your first complaint"]})]}):s.jsx("div",{className:"space-y-4",children:e.map(w=>{const N=p(w.status),y=N.icon,C=S(w);return s.jsx("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden hover:shadow-md hover:border-gray-200 transition-all",children:s.jsx("div",{className:"p-5 md:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-gray-900 font-medium line-clamp-2 pr-2",children:w.description.length>80?`${w.description.substring(0,80)}`:w.description}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-3 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx($n,{className:"w-4 h-4 text-gray-400"}),b(w.createdAt)]}),w.location&&s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(Te,{className:"w-4 h-4 text-gray-400"}),typeof w.location.lat=="number"?`${w.location.lat.toFixed(4)}, ${w.location.lng.toFixed(4)}`:`${w.location.lat}, ${w.location.lng}`]}),C&&s.jsx("span",{className:"text-gray-600 font-medium",children:C.name})]})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full border ${N.class}`,children:[s.jsx(y,{className:"w-3.5 h-3.5"}),w.status]}),s.jsxs("button",{onClick:()=>g(w),className:"flex items-center gap-1 px-3 py-2 rounded-xl text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:["View",s.jsx(c_,{className:"w-4 h-4"})]})]})]})})},w._id)})}),d&&o&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>h(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",onClick:w=>w.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Complaint details"}),s.jsx("button",{onClick:()=>h(!1),className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors","aria-label":"Close",children:s.jsx(Jn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[(()=>{const{class:w,icon:N}=p(o.status);return s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-full border ${w}`,children:[s.jsx(N,{className:"w-4 h-4"}),o.status]})})(),s.jsx("span",{className:"text-sm text-gray-500",children:b(o.createdAt)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-900 bg-gray-50 rounded-xl p-4 text-sm leading-relaxed",children:o.description})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3 text-sm",children:s.jsxs("div",{className:"rounded-xl bg-gray-50 p-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 mb-0.5",children:"Location"}),s.jsx("p",{className:"text-gray-900",children:o.location?typeof o.location.lat=="number"?`${o.location.lat.toFixed(5)}, ${o.location.lng.toFixed(5)}`:`${o.location.lat}, ${o.location.lng}`:""})]})}),S(o)&&s.jsxs("div",{className:"rounded-xl bg-blue-50 border border-blue-100 p-4",children:[s.jsx("p",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide mb-2",children:"Assigned station"}),s.jsx("p",{className:"font-semibold text-blue-900",children:S(o).name}),s.jsxs("p",{className:"text-sm text-blue-700 mt-0.5",children:[S(o).area,S(o).city&&`, ${S(o).city}`]}),S(o).helpline&&s.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Helpline: ",S(o).helpline]})]})]})]})})]})})]})},kj=()=>{const{user:e,updateUser:t}=Mn(),[r,i]=v.useState(!1),[o,l]=v.useState(!1),[d,h]=v.useState([]),[m,p]=v.useState(!0),[b,g]=v.useState(!1),S=v.useRef(null),[w,N]=v.useState({name:"",email:"",phone:"",address:""});v.useEffect(()=>{e&&N({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||""})},[e]),v.useEffect(()=>{y()},[]);const y=async()=>{var E;p(!0);try{const A=await ms.getGuardians(),M=((E=A==null?void 0:A.data)==null?void 0:E.data)??(A==null?void 0:A.data)??[];h(Array.isArray(M)?M:[])}catch(A){console.error("Error fetching guardians:",A),h([])}finally{p(!1)}},C=E=>{N({...w,[E.target.name]:E.target.value})},_=async()=>{var E,A,M,P;l(!0);try{const I=await Zn.updateUserProfile(w),z=(E=I==null?void 0:I.data)==null?void 0:E.data;z&&(t(z),N({name:z.name||"",email:z.email||"",phone:z.phone||"",address:z.address||""})),ee.success(((A=I==null?void 0:I.data)==null?void 0:A.message)||"Profile updated successfully!"),i(!1)}catch(I){ee.error(((P=(M=I.response)==null?void 0:M.data)==null?void 0:P.message)||"Failed to update profile")}finally{l(!1)}},x=()=>{N({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||""}),i(!1)},k=async E=>{var P;const A=(P=E.target.files)==null?void 0:P[0];if(!A)return;if(!A.type.startsWith("image/")){ee.error("Please select an image file");return}if(A.size>5*1024*1024){ee.error("Image size should be less than 5MB");return}g(!0);const M=new FileReader;M.onloadend=async()=>{var I,z,V;try{const D=await Zn.updateProfilePhoto(M.result),J=(I=D==null?void 0:D.data)==null?void 0:I.data;J&&t(J),ee.success("Profile photo updated!")}catch(D){ee.error(((V=(z=D.response)==null?void 0:z.data)==null?void 0:V.message)||"Failed to upload photo")}finally{g(!1),S.current&&(S.current.value="")}},M.onerror=()=>{ee.error("Failed to read image file"),g(!1)},M.readAsDataURL(A)};return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:"user"}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(wt,{className:"h-8 w-8 text-blue-600 mr-3"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"})]}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("span",{className:"text-gray-600",children:["Member since: ",e!=null&&e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:k,className:"hidden"}),s.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-4 cursor-pointer group",onClick:()=>{var E;return!b&&((E=S.current)==null?void 0:E.click())},children:[e!=null&&e.profilePhoto?s.jsx("img",{src:e.profilePhoto,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg"}):s.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:s.jsx(wt,{className:"w-12 h-12 text-white"})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:b?s.jsx(st,{className:"w-6 h-6 text-white animate-spin"}):s.jsx(mx,{className:"w-6 h-6 text-white"})})]}),s.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Click to change photo"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:e==null?void 0:e.name}),s.jsx("p",{className:"text-gray-600 mb-4",children:e==null?void 0:e.email})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx($n,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsxs("span",{className:"text-gray-600",children:["Joined: ",e!=null&&e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"]})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(Te,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-gray-600",children:(e==null?void 0:e.address)||"Location not set"})]})]})})]})}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Information"}),r?s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:_,disabled:o,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:[o?s.jsx(st,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(m_,{className:"w-4 h-4 mr-2"}),o?"Saving":"Save"]}),s.jsxs("button",{onClick:x,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Cancel"]})]}):s.jsxs("button",{onClick:()=>i(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ea,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(wt,{className:"w-4 h-4 inline mr-1"}),"Full Name"]}),r?s.jsx("input",{type:"text",name:"name",value:w.name,onChange:C,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):s.jsx("p",{className:"text-gray-900 font-medium",children:(e==null?void 0:e.name)||"Not set"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Gn,{className:"w-4 h-4 inline mr-1"}),"Email Address"]}),r?s.jsx("input",{type:"email",name:"email",value:w.email,onChange:C,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):s.jsx("p",{className:"text-gray-900 font-medium",children:(e==null?void 0:e.email)||"Not set"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Et,{className:"w-4 h-4 inline mr-1"}),"Phone Number"]}),r?s.jsx("input",{type:"tel",name:"phone",value:w.phone,onChange:C,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):s.jsx("p",{className:"text-gray-900 font-medium",children:(e==null?void 0:e.phone)||"Not set"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Te,{className:"w-4 h-4 inline mr-1"}),"Address"]}),r?s.jsx("input",{type:"text",name:"address",value:w.address,onChange:C,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):s.jsx("p",{className:"text-gray-900 font-medium",children:(e==null?void 0:e.address)||"Not set"})]})]})]}),s.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Emergency Contacts"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[d.length,"/5 contact(s)"]})]}),m?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent"})}):d.length>0?s.jsxs("div",{className:"space-y-3",children:[d.map(E=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(wt,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900",children:E.name}),s.jsx("p",{className:"text-sm text-gray-600",children:E.email})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"text-sm text-gray-600",children:E.phone})})]},E._id)),d.length<5&&s.jsxs("p",{className:"text-xs text-gray-500 text-center pt-2",children:["You can add up to ",5-d.length," more contact",5-d.length!==1?"s":""]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(We,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No emergency contacts added"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Add trusted contacts to receive emergency alerts"}),s.jsxs("a",{href:"/user/guardians",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[s.jsx(ea,{className:"w-4 h-4 mr-2"}),"Add Emergency Contacts"]})]})]})]})]})]})})]})},Cj=[{text:" Hey! On my way"},{text:" I've arrived at the meeting point"},{text:" Running late, 10 mins"},{text:" Where are you?"},{text:" I can see you!"},{text:" Starting the trip now"},{text:" Reached safely, thanks!"},{text:" Can you call me?"}],Pj=({tripId:e,onClose:t,isOpen:r})=>{var ze;const{user:i}=Mn(),[o,l]=v.useState([]),[d,h]=v.useState(""),[m,p]=v.useState(!0),[b,g]=v.useState(!1),[S,w]=v.useState(null),[N,y]=v.useState(null),C=v.useRef(null),_=v.useRef(null),x=v.useRef(o),[k,E]=v.useState(!1),[A,M]=v.useState(0),[P,I]=v.useState(!1),z=v.useRef(null),V=v.useRef([]),D=v.useRef(null),J=v.useRef(0),[te,se]=v.useState(null),ge=v.useRef(null);v.useEffect(()=>{x.current=o},[o]);const ae=()=>{var Y;(Y=C.current)==null||Y.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{if(r&&e)return U(),_e(),_.current=setInterval(()=>{T(),_e()},2e3),()=>{_.current&&clearInterval(_.current)}},[r,e]),v.useEffect(()=>{ae()},[o]);const _e=async()=>{var Y;try{const fe=await ss.getChatInfo(e);y((Y=fe==null?void 0:fe.data)==null?void 0:Y.data)}catch(fe){console.error("Error fetching chat info:",fe)}},U=async()=>{var Y,fe,ve;try{p(!0),w(null);const Ce=await ss.getMessages(e);l(((Y=Ce==null?void 0:Ce.data)==null?void 0:Y.data)||[])}catch(Ce){console.error("Error fetching messages:",Ce),w(((ve=(fe=Ce.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to load messages")}finally{p(!1)}},T=async()=>{var fe,ve;const Y=x.current;if(Y.length===0){try{const Ce=await ss.getMessages(e),Q=((fe=Ce==null?void 0:Ce.data)==null?void 0:fe.data)||[];Q.length>0&&l(Q)}catch(Ce){console.error("Error fetching messages:",Ce)}return}try{const Ce=Y[Y.length-1],Q=await ss.getMessages(e,Ce.createdAt),he=((ve=Q==null?void 0:Q.data)==null?void 0:ve.data)||[];he.length>0&&l(ye=>[...ye,...he])}catch(Ce){console.error("Error fetching new messages:",Ce)}},F=async Y=>{var fe,ve,Ce;if(Y.preventDefault(),!(!d.trim()||b)){g(!0);try{const Q=await ss.sendMessage(e,d.trim());(fe=Q==null?void 0:Q.data)!=null&&fe.data&&l(he=>[...he,Q.data.data]),h("")}catch(Q){console.error("Error sending message:",Q),w(((Ce=(ve=Q.response)==null?void 0:ve.data)==null?void 0:Ce.message)||"Failed to send message")}finally{g(!1)}}},$=async Y=>{var fe,ve,Ce;if(!b){g(!0);try{const Q=await ss.sendMessage(e,Y);(fe=Q==null?void 0:Q.data)!=null&&fe.data&&l(he=>[...he,Q.data.data])}catch(Q){console.error("Error sending message:",Q),w(((Ce=(ve=Q.response)==null?void 0:ve.data)==null?void 0:Ce.message)||"Failed to send message")}finally{g(!1)}}},G=async()=>{try{const Y=await navigator.mediaDevices.getUserMedia({audio:!0}),fe=new MediaRecorder(Y);z.current=fe,V.current=[],fe.ondataavailable=ve=>{ve.data.size>0&&V.current.push(ve.data)},fe.onstop=async()=>{const ve=new Blob(V.current,{type:"audio/webm"}),Ce=new FileReader;Ce.readAsDataURL(ve),Ce.onloadend=async()=>{await ue(Ce.result,J.current)},Y.getTracks().forEach(Q=>Q.stop())},fe.start(),E(!0),M(0),J.current=0,D.current=setInterval(()=>{J.current+=1,M(J.current)},1e3)}catch(Y){console.error("Error starting recording:",Y),w("Could not access microphone")}},ce=()=>{z.current&&k&&(z.current.stop(),E(!1),D.current&&clearInterval(D.current))},ue=async(Y,fe)=>{var ve;g(!0);try{const Ce=await ss.sendAudioMessage(e,Y,fe);(ve=Ce==null?void 0:Ce.data)!=null&&ve.data&&l(Q=>[...Q,Ce.data.data])}catch(Ce){console.error("Error sending audio:",Ce),w("Failed to send audio message")}finally{g(!1),M(0),J.current=0}},xe=(Y,fe)=>{if(te===Y)ge.current&&(ge.current.pause(),ge.current=null),se(null);else{ge.current&&ge.current.pause();const ve=new Audio(fe);ve.onended=()=>se(null),ve.play(),ge.current=ve,se(Y)}},ie=async()=>{var Y;I(!0);try{const fe=await new Promise((ye,O)=>{navigator.geolocation.getCurrentPosition(ye,O,{enableHighAccuracy:!0,timeout:1e4})}),{latitude:ve,longitude:Ce}=fe.coords;let Q="";try{Q=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${ve}&lon=${Ce}&format=json`)).json()).display_name||""}catch{Q=""}const he=await ss.sendLocationMessage(e,{lat:ve,lng:Ce,address:Q});(Y=he==null?void 0:he.data)!=null&&Y.data&&l(ye=>[...ye,he.data.data])}catch(fe){console.error("Error sharing location:",fe),w("Could not get location")}finally{I(!1)}},q=(Y,fe)=>{window.open(`https://www.google.com/maps?q=${Y},${fe}`,"_blank")},Ne=Y=>{const fe=Math.floor(Y/60),ve=Y%60;return`${fe}:${ve.toString().padStart(2,"0")}`};return r?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg h-[85vh] sm:h-[600px] flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-purple-600 to-purple-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:s.jsx(Ss,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Trip Chat"}),s.jsx("p",{className:"text-purple-100 text-xs",children:N?`${N.from}  ${N.to}  ${((ze=N.participants)==null?void 0:ze.length)||0} members`:"Loading..."})]})]}),s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors",children:s.jsx(Jn,{className:"w-5 h-5 text-white"})})]}),(N==null?void 0:N.participants)&&s.jsxs("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-100 flex items-center gap-2 overflow-x-auto",children:[s.jsx(We,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),N.participants.map((Y,fe)=>s.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 flex items-center gap-1 ${Y.role==="owner"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:[Y.profilePhoto?s.jsx("img",{src:Y.profilePhoto,alt:"",className:"w-4 h-4 rounded-full object-cover"}):s.jsx(wt,{className:"w-3 h-3"}),Y.name,Y.role==="owner"&&" "]},fe))]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:[m?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(st,{className:"w-6 h-6 animate-spin text-purple-600"})}):S?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx(vn,{className:"w-10 h-10 text-red-400 mb-2"}),s.jsx("p",{className:"text-gray-600 text-sm",children:S}),s.jsx("button",{onClick:U,className:"mt-3 text-purple-600 text-sm font-medium hover:underline",children:"Try again"})]}):o.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx(Ss,{className:"w-10 h-10 text-gray-300 mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No messages yet"}),s.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Say hi to your travel buddy!"})]}):o.map((Y,fe)=>{const ve=Y.sender===(i==null?void 0:i._id)||Y.sender===(i==null?void 0:i.id);return s.jsx("div",{className:`flex ${ve?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:"max-w-[80%]",children:[!ve&&s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-purple-100 text-purple-800",children:Y.senderName})}),s.jsxs("div",{className:`px-4 py-2.5 rounded-2xl ${ve?"bg-purple-600 text-white rounded-br-md":"bg-white text-gray-900 border border-gray-200 rounded-bl-md"}`,children:[(!Y.messageType||Y.messageType==="text")&&s.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:Y.message}),Y.messageType==="audio"&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>xe(Y._id,Y.audioData),className:`w-8 h-8 rounded-full flex items-center justify-center ${ve?"bg-white/20 hover:bg-white/30":"bg-gray-200 hover:bg-gray-300"}`,children:te===Y._id?s.jsx(yx,{className:`w-4 h-4 ${ve?"text-white":"text-gray-700"}`}):s.jsx(vx,{className:`w-4 h-4 ${ve?"text-white":"text-gray-700"}`})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:`text-sm ${ve?"text-white":"text-gray-900"}`,children:" Voice message"}),Y.audioDuration>0&&s.jsx("span",{className:`text-xs ${ve?"text-white/70":"text-gray-500"}`,children:Ne(Y.audioDuration)})]})]}),Y.messageType==="location"&&Y.location&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Te,{className:`w-4 h-4 ${ve?"text-white":"text-red-500"}`}),s.jsx("span",{className:`text-sm font-medium ${ve?"text-white":"text-gray-900"}`,children:" Location shared"})]}),Y.location.address&&s.jsx("p",{className:`text-xs ${ve?"text-white/80":"text-gray-600"} line-clamp-2`,children:Y.location.address}),s.jsxs("button",{onClick:()=>q(Y.location.lat,Y.location.lng),className:`flex items-center gap-1 text-xs font-medium ${ve?"text-white hover:text-white/80":"text-purple-600 hover:text-purple-700"}`,children:[s.jsx(ca,{className:"w-3 h-3"}),"Open in Maps"]})]})]}),s.jsx("p",{className:`text-xs text-gray-400 mt-1 ${ve?"text-right":"text-left"}`,children:new Date(Y.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},Y._id||fe)}),s.jsx("div",{ref:C})]}),s.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ur,{className:"w-3.5 h-3.5 text-amber-500"}),s.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Quick responses"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Cj.map((Y,fe)=>s.jsx("button",{onClick:()=>$(Y.text),disabled:b,className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed bg-white text-gray-700 hover:bg-gray-100 border border-gray-200",children:Y.text},fe))})]}),s.jsxs("div",{className:"p-4 border-t border-gray-100 bg-white",children:[k&&s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3 py-2 px-4 bg-red-50 rounded-lg border border-red-100",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),s.jsxs("span",{className:"text-red-600 font-medium text-sm",children:["Recording... ",Ne(A)]}),s.jsx("button",{onClick:ce,className:"ml-2 p-1.5 rounded-lg bg-red-100 hover:bg-red-200 text-red-600",children:s.jsx(qo,{className:"w-4 h-4"})})]}),s.jsxs("form",{onSubmit:F,className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:ie,disabled:b||P||k,className:"w-10 h-10 rounded-xl bg-green-50 text-green-600 flex items-center justify-center hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border border-green-200",title:"Share location",children:P?s.jsx(st,{className:"w-5 h-5 animate-spin"}):s.jsx(Te,{className:"w-5 h-5"})}),s.jsx("button",{type:"button",onClick:k?ce:G,disabled:b||P,className:`w-10 h-10 rounded-xl flex items-center justify-center transition-colors border ${k?"bg-red-500 text-white border-red-500 hover:bg-red-600":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"} disabled:opacity-50 disabled:cursor-not-allowed`,title:k?"Stop recording":"Record voice message",children:k?s.jsx(qo,{className:"w-5 h-5"}):s.jsx(xx,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",value:d,onChange:Y=>h(Y.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",disabled:b||k}),s.jsx("button",{type:"submit",disabled:!d.trim()||b||k,className:"w-10 h-10 rounded-xl bg-purple-600 text-white flex items-center justify-center hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?s.jsx(st,{className:"w-5 h-5 animate-spin"}):s.jsx(na,{className:"w-5 h-5"})})]})]})]})}):null},Df=({label:e,color:t,value:r,onSelect:i,placeholder:o,icon:l})=>{const[d,h]=v.useState(r||""),[m,p]=v.useState([]),[b,g]=v.useState(!1),[S,w]=v.useState(!1),N=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{h(r||"")},[r]),v.useEffect(()=>{const E=A=>{y.current&&!y.current.contains(A.target)&&w(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const C=async E=>{if(E.length<3){p([]);return}g(!0);try{const M=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(E)}&limit=5&countrycodes=in`,{headers:{"Accept-Language":"en"}})).json();p(M),w(!0)}catch{p([])}finally{g(!1)}},_=E=>{const A=E.target.value;h(A),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>C(A),400)},x=E=>{const A=E.display_name.split(",").slice(0,3).join(", ");h(A),w(!1),p([]),i({name:A,lat:E.lat,lng:E.lon})},k=t==="green"?"border-green-200 focus:ring-green-400":"border-red-200 focus:ring-red-400";return s.jsxs("div",{ref:y,className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:o,value:d,onChange:_,onFocus:()=>m.length>0&&w(!0),className:`w-full px-3 py-2 pr-8 border ${k} rounded-lg text-sm focus:ring-2 focus:border-transparent`,required:!0}),b?s.jsx(st,{className:"absolute right-2.5 top-2.5 w-4 h-4 text-gray-400 animate-spin"}):s.jsx(bn,{className:"absolute right-2.5 top-2.5 w-4 h-4 text-gray-400"})]}),S&&m.length>0&&s.jsx("ul",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:m.map((E,A)=>s.jsxs("li",{onClick:()=>x(E),className:"px-3 py-2 text-sm text-gray-700 hover:bg-purple-50 cursor-pointer flex items-start gap-2",children:[s.jsx(Te,{className:"w-4 h-4 text-gray-400 mt-0.5 shrink-0"}),s.jsx("span",{children:E.display_name})]},A))})]})},Ej=()=>{const{user:e}=Mn(),[t,r]=v.useState("find"),[i,o]=v.useState([]),[l,d]=v.useState([]),[h,m]=v.useState(!1),[p,b]=v.useState(!1),[g,S]=v.useState(null),[w,N]=v.useState(null),[y,C]=v.useState(null),[_,x]=v.useState(!1),[k,E]=v.useState(""),[A,M]=v.useState(null),[P,I]=v.useState({fromName:"",fromLat:"",fromLng:"",toName:"",toLat:"",toLng:"",departureTime:"",note:""});v.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(T=>{M({lat:T.coords.latitude,lng:T.coords.longitude})},T=>{},{enableHighAccuracy:!0})},[]);const z=v.useCallback(async()=>{var T;m(!0);try{const F=await ns.findTrips({});o(((T=F==null?void 0:F.data)==null?void 0:T.data)||[])}catch(F){console.error("Error fetching trips:",F),ee.error("Failed to load trips")}finally{m(!1)}},[]),V=v.useCallback(async()=>{var T;m(!0);try{const F=await ns.getMyTrips();d(((T=F==null?void 0:F.data)==null?void 0:T.data)||[])}catch(F){console.error("Error fetching my trips:",F),ee.error("Failed to load your trips")}finally{m(!1)}},[]);v.useEffect(()=>{t==="find"?z():t==="my-trips"&&V()},[t,z,V]);const D=async T=>{var F,$;if(T.preventDefault(),!P.fromName||!P.fromLat||!P.fromLng||!P.toName||!P.toLat||!P.toLng||!P.departureTime){!P.fromLat||!P.toLat?ee.error("Please select locations from the search suggestions"):ee.error("Please fill in all required fields");return}b(!0);try{await ns.createTrip({from:{name:P.fromName,coordinates:[parseFloat(P.fromLng),parseFloat(P.fromLat)]},to:{name:P.toName,coordinates:[parseFloat(P.toLng),parseFloat(P.toLat)]},departureTime:P.departureTime,note:P.note}),ee.success("Trip posted! Others can now find and join you."),I({fromName:"",fromLat:"",fromLng:"",toName:"",toLat:"",toLng:"",departureTime:"",note:""}),r("my-trips")}catch(G){ee.error((($=(F=G.response)==null?void 0:F.data)==null?void 0:$.message)||"Failed to create trip")}finally{b(!1)}},J=async T=>{var F,$;try{N(T),await ns.sendRequest(T,{message:k}),ee.success("Join request sent!"),E(""),N(null),z()}catch(G){ee.error((($=(F=G.response)==null?void 0:F.data)==null?void 0:$.message)||"Failed to send request"),N(null)}},te=async(T,F)=>{var $,G;try{await ns.acceptRequest(T,F),ee.success("Request accepted! You are now travel buddies."),V()}catch(ce){ee.error(((G=($=ce.response)==null?void 0:$.data)==null?void 0:G.message)||"Failed to accept request")}},se=async(T,F)=>{var $,G;try{await ns.rejectRequest(T,F),ee.info("Request rejected"),V()}catch(ce){ee.error(((G=($=ce.response)==null?void 0:$.data)==null?void 0:G.message)||"Failed to reject request")}},ge=async T=>{var F,$;try{await ns.cancelTrip(T),ee.success("Trip cancelled"),V()}catch(G){ee.error((($=(F=G.response)==null?void 0:F.data)==null?void 0:$.message)||"Failed to cancel trip")}},ae=async T=>{var F,$;try{await ns.completeTrip(T),ee.success("Trip marked as completed!"),V()}catch(G){ee.error((($=(F=G.response)==null?void 0:F.data)==null?void 0:$.message)||"Failed to complete trip")}},_e=T=>new Date(T).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),U=T=>{const F={Active:"bg-green-100 text-green-700",Matched:"bg-blue-100 text-blue-700",Completed:"bg-gray-100 text-gray-700",Cancelled:"bg-red-100 text-red-700"};return s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F[T]||"bg-gray-100 text-gray-700"}`,children:T})};return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:"user"}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsx("div",{className:"mb-8 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-100",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(We,{className:"h-8 w-8 text-purple-600 mr-3"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Travel Buddy"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Find a safe travel companion going the same way"})]})]})})}),s.jsx("div",{className:"flex space-x-1 mb-8 bg-white rounded-xl p-1 shadow-md border border-gray-100",children:[{id:"find",label:"Find Companions",icon:bn},{id:"create",label:"Post a Trip",icon:ta},{id:"my-trips",label:"My Trips",icon:vf}].map(T=>s.jsxs("button",{onClick:()=>r(T.id),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-all ${t===T.id?"bg-purple-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(T.icon,{className:"w-4 h-4"}),T.label]},T.id))}),t==="find"&&s.jsx("div",{children:h?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(st,{className:"w-8 h-8 text-purple-500 animate-spin"})}):i.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center border border-gray-100",children:[s.jsx(We,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No trips available right now"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Be the first to post a trip and find a travel companion!"}),s.jsx("button",{onClick:()=>r("create"),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Post a Trip"})]}):s.jsx("div",{className:"space-y-4",children:i.map(T=>{var F,$,G,ce,ue,xe;return s.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[(F=T.userId)!=null&&F.profilePhoto?s.jsx("img",{src:T.userId.profilePhoto,alt:T.userId.name,className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(wt,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:(($=T.userId)==null?void 0:$.name)||"User"}),s.jsxs("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full",children:[(Array.isArray(T.matchedWith)?T.matchedWith.length:0)+1,"/5 members"]})]}),s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),s.jsx("span",{className:"font-medium",children:"From:"})," ",T.from.name]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),s.jsx("span",{className:"font-medium",children:"To:"})," ",T.to.name]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx(gt,{className:"w-3 h-3"}),_e(T.departureTime)]})]}),T.note&&s.jsxs("p",{className:"text-sm text-gray-500 mt-2 italic",children:['"',T.note,'"']})]})]}),s.jsx("div",{children:((G=T.userId)==null?void 0:G._id)===(e==null?void 0:e._id)?s.jsx("span",{className:"px-3 py-1.5 text-xs font-medium bg-gray-100 text-gray-500 rounded-lg",children:"Your Trip"}):(ce=T.matchedWith)!=null&&ce.some(ie=>{var q;return(ie._id||ie)===(e==null?void 0:e._id)||((q=ie._id)==null?void 0:q.toString())===(e==null?void 0:e._id)})?s.jsx("span",{className:"px-3 py-1.5 text-xs font-medium bg-green-100 text-green-700 rounded-lg",children:"Joined"}):(ue=T.requests)!=null&&ue.some(ie=>{var q,Ne,ze;return(((q=ie.userId)==null?void 0:q._id)||ie.userId)===(e==null?void 0:e._id)||((ze=((Ne=ie.userId)==null?void 0:Ne._id)||ie.userId)==null?void 0:ze.toString())===(e==null?void 0:e._id)})?s.jsx("span",{className:"px-3 py-1.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-lg",children:"Request Sent"}):((xe=T.matchedWith)==null?void 0:xe.length)>=4?s.jsx("span",{className:"px-3 py-1.5 text-xs font-medium bg-red-100 text-red-600 rounded-lg",children:"Full"}):w===T._id?s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsx("textarea",{value:k,onChange:ie=>E(ie.target.value),placeholder:"Hi! I'm also heading that way...",className:"w-full p-2 text-sm border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:2}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{N(null),E("")},className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:()=>J(T._id),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(na,{className:"w-3 h-3"}),"Send"]})]})]}):s.jsxs("button",{onClick:()=>N(T._id),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(na,{className:"w-4 h-4"}),"Request to Join"]})})]})},T._id)})})}),t==="create"&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 border border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(Gr,{className:"w-6 h-6 text-purple-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Post Your Trip"})]}),s.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Share where you're going so others heading the same way can join you for a safer journey."}),s.jsxs("form",{onSubmit:D,className:"space-y-6",children:[s.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-100",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-green-700 mb-3",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),"Starting Point"]}),s.jsx(Df,{color:"green",value:P.fromName,placeholder:"Search starting location (e.g., Central Mall, Sector 15)",onSelect:({name:T,lat:F,lng:$})=>I(G=>({...G,fromName:T,fromLat:F,fromLng:$}))}),P.fromLat&&s.jsxs("p",{className:"text-xs text-green-600 mt-2 flex items-center gap-1",children:[s.jsx(dt,{className:"w-3 h-3"}),"Location selected"]})]}),s.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-100",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-red-700 mb-3",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),"Destination"]}),s.jsx(Df,{color:"red",value:P.toName,placeholder:"Search destination (e.g., Railway Station, Airport)",onSelect:({name:T,lat:F,lng:$})=>I(G=>({...G,toName:T,toLat:F,toLng:$}))}),P.toLat&&s.jsxs("p",{className:"text-xs text-red-600 mt-2 flex items-center gap-1",children:[s.jsx(dt,{className:"w-3 h-3"}),"Location selected"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[s.jsx(gt,{className:"w-4 h-4"}),"Departure Time"]}),s.jsx("input",{type:"datetime-local",value:P.departureTime,onChange:T=>I(F=>({...F,departureTime:T.target.value})),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[s.jsx(vn,{className:"w-4 h-4"}),"Note (Optional)"]}),s.jsx("textarea",{value:P.note,onChange:T=>I(F=>({...F,note:T.target.value})),placeholder:"E.g., Taking an auto, prefer to walk, leaving from the east gate...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",rows:3})]}),s.jsxs("button",{type:"submit",disabled:p,className:"w-full flex items-center justify-center gap-2 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[p?s.jsx(st,{className:"w-5 h-5 animate-spin"}):s.jsx(ta,{className:"w-5 h-5"}),p?"Posting...":"Post Trip"]})]})]}),t==="my-trips"&&s.jsx("div",{children:h?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(st,{className:"w-8 h-8 text-purple-500 animate-spin"})}):l.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center border border-gray-100",children:[s.jsx(vf,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No trips yet"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Post your first trip to find a safe companion!"}),s.jsx("button",{onClick:()=>r("create"),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Post a Trip"})]}):s.jsx("div",{className:"space-y-4",children:l.map(T=>{var F,$,G,ce,ue,xe,ie;return s.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100",children:[s.jsx("div",{className:"p-6 cursor-pointer",onClick:()=>S(g===T._id?null:T._id),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[U(T.status),s.jsx("span",{className:"text-xs text-gray-400",children:_e(T.createdAt)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),s.jsx("span",{className:"font-medium",children:"From:"})," ",T.from.name]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),s.jsx("span",{className:"font-medium",children:"To:"})," ",T.to.name]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx(gt,{className:"w-3 h-3"}),"Departure: ",_e(T.departureTime)]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[((F=T.userId)==null?void 0:F._id)===(e==null?void 0:e._id)&&(($=T.requests)==null?void 0:$.filter(q=>q.status==="Pending").length)>0&&s.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:[s.jsx(vn,{className:"w-3 h-3"}),T.requests.filter(q=>q.status==="Pending").length," pending"]}),((G=T.userId)==null?void 0:G._id)!==(e==null?void 0:e._id)&&T.status==="Matched"&&s.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium flex items-center gap-1",children:[s.jsx(dt,{className:"w-3 h-3"}),"Matched"]}),((ce=T.userId)==null?void 0:ce._id)!==(e==null?void 0:e._id)&&T.status==="Active"&&s.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium flex items-center gap-1",children:[s.jsx(gt,{className:"w-3 h-3"}),"Pending"]}),g===T._id?s.jsx(d_,{className:"w-5 h-5 text-gray-400"}):s.jsx(fx,{className:"w-5 h-5 text-gray-400"})]})]})}),g===T._id&&s.jsxs("div",{className:"px-6 pb-6 border-t border-gray-100 pt-4",children:[T.status==="Matched"&&(()=>{var ze;const q=((ze=T.userId)==null?void 0:ze._id)===(e==null?void 0:e._id),Ne=[];return!q&&T.userId&&Ne.push(T.userId),Array.isArray(T.matchedWith)&&T.matchedWith.forEach(Y=>{Y&&Y._id!==(e==null?void 0:e._id)&&Ne.push(Y)}),Ne.length>0?s.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-100",children:[s.jsxs("h4",{className:"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[s.jsx(dt,{className:"w-4 h-4"}),"Travel Buddies (",Ne.length+1,"/5)"]}),s.jsx("div",{className:"space-y-3",children:Ne.map(Y=>s.jsxs("div",{className:"flex items-center gap-3",children:[Y.profilePhoto?s.jsx("img",{src:Y.profilePhoto,alt:Y.name,className:"w-10 h-10 rounded-full object-cover"}):s.jsx("div",{className:"w-10 h-10 bg-blue-200 rounded-full flex items-center justify-center",children:s.jsx(wt,{className:"w-5 h-5 text-blue-700"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:Y.name}),s.jsxs("a",{href:`tel:${Y.phone}`,className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(Et,{className:"w-3 h-3"}),Y.phone]})]})]},Y._id))}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),s.jsx("span",{className:"font-medium",children:"From:"})," ",T.from.name]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),s.jsx("span",{className:"font-medium",children:"To:"})," ",T.to.name]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx(gt,{className:"w-3 h-3"}),"Departure: ",_e(T.departureTime)]})]}),s.jsxs("button",{onClick:Y=>{Y.stopPropagation(),C(T._id),x(!0)},className:"w-full mt-3 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium flex items-center justify-center gap-2 transition-colors text-sm",children:[s.jsx(Ss,{className:"w-4 h-4"}),"Chat with Travel Buddies"]})]})]}):null})(),((ue=T.userId)==null?void 0:ue._id)!==(e==null?void 0:e._id)&&T.status==="Active"&&(()=>{var Ne;const q=(Ne=T.requests)==null?void 0:Ne.find(ze=>{var Y;return((Y=ze.userId)==null?void 0:Y._id)===(e==null?void 0:e._id)});return q?s.jsx("div",{className:`mb-4 p-4 rounded-lg border ${q.status==="Pending"?"bg-yellow-50 border-yellow-100":q.status==="Rejected"?"bg-red-50 border-red-100":"bg-green-50 border-green-100"}`,children:s.jsxs("p",{className:`text-sm font-medium ${q.status==="Pending"?"text-yellow-700":q.status==="Rejected"?"text-red-700":"text-green-700"}`,children:[q.status==="Pending"&&" Your request is pending approval...",q.status==="Rejected"&&" Your request was declined.",q.status==="Accepted"&&" Your request was accepted!"]})}):null})(),((xe=T.userId)==null?void 0:xe._id)===(e==null?void 0:e._id)&&T.requests&&T.requests.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Join Requests"}),s.jsx("div",{className:"space-y-2",children:T.requests.map(q=>{var Ne,ze;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[(Ne=q.userId)!=null&&Ne.profilePhoto?s.jsx("img",{src:q.userId.profilePhoto,alt:q.userId.name,className:"w-9 h-9 rounded-full object-cover"}):s.jsx("div",{className:"w-9 h-9 bg-gray-200 rounded-full flex items-center justify-center",children:s.jsx(wt,{className:"w-4 h-4 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:(ze=q.userId)==null?void 0:ze.name}),q.message&&s.jsxs("p",{className:"text-xs text-gray-500 italic",children:['"',q.message,'"']})]})]}),q.status==="Pending"?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Y=>{Y.stopPropagation(),te(T._id,q._id)},className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(l_,{className:"w-3 h-3"}),"Accept"]}),s.jsxs("button",{onClick:Y=>{Y.stopPropagation(),se(T._id,q._id)},className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[s.jsx(Au,{className:"w-3 h-3"}),"Reject"]})]}):s.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${q.status==="Accepted"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:q.status})]},q._id)})})]}),((ie=T.userId)==null?void 0:ie._id)===(e==null?void 0:e._id)&&(T.status==="Active"||T.status==="Matched")&&s.jsxs("div",{className:"flex gap-3 pt-2",children:[T.status==="Matched"&&s.jsxs("button",{onClick:()=>ae(T._id),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[s.jsx(dt,{className:"w-4 h-4"}),"Mark as Completed"]}),s.jsxs("button",{onClick:()=>ge(T._id),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[s.jsx(a_,{className:"w-4 h-4"}),"Cancel Trip"]})]})]})]},T._id)})})})]})}),s.jsx(Pj,{tripId:y,isOpen:_,onClose:()=>{x(!1),C(null)}})]})},Lj=()=>{const e="police",[t,r]=v.useState(null),[i,o]=v.useState([]),[l,d]=v.useState([]),[h,m]=v.useState(!0),[p,b]=v.useState(null);v.useEffect(()=>{g()},[]),v.useEffect(()=>{const w=()=>{document.visibilityState==="visible"&&g()};return document.addEventListener("visibilitychange",w),()=>{document.removeEventListener("visibilitychange",w)}},[]);const g=async()=>{var w;try{m(!0),b(null);const[N,y]=await Promise.all([re.get("/police/dashboard"),re.get("/sos/alerts/police/assigned").catch(_=>(console.warn("Error fetching SOS alerts, using empty array:",_),{data:{data:[]}}))]);r(N.data.data.stats),o(N.data.data.recentComplaints);const C=((w=y==null?void 0:y.data)==null?void 0:w.data)||[];d(C)}catch(N){console.error("Error fetching dashboard data:",N),b("Failed to load dashboard data. Please refresh the page.")}finally{m(!1)}},S=({icon:w,title:N,value:y,color:C,iconBg:_})=>s.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 hover:border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:N}),s.jsx("div",{className:"flex items-baseline",children:s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:y||0})})]}),s.jsx("div",{className:`p-4 rounded-xl ${_} shadow-inner flex-shrink-0`,children:s.jsx(w,{className:"w-6 h-6 text-white"})})]})});return h?s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-8"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((w,N)=>s.jsx("div",{className:"h-32 bg-gray-300 rounded-xl"},N))})]})})]}):s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Police Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and respond to complaints and emergency alerts"})]}),s.jsxs("button",{onClick:g,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:h,title:"Refresh dashboard data",children:[s.jsx(on,{className:`w-4 h-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]})]}),p&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3",children:[s.jsx(Be,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:"text-red-800 text-sm",children:p})]}),l.length>0&&s.jsx(ht,{to:"/police/sos-alerts",className:"mb-8 block p-4 bg-gradient-to-r from-red-50 to-red-100 border-2 border-red-300 rounded-xl hover:shadow-lg transition-all group",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx("div",{className:"p-3 bg-red-200 rounded-lg animate-pulse group-hover:scale-110 transition-transform",children:s.jsx(Ur,{className:"w-6 h-6 text-red-600 animate-bounce"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-red-900 font-bold text-lg flex items-center gap-2",children:[" ACTIVE SOS ALERTS",s.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:l.length})]}),s.jsxs("p",{className:"text-red-700 text-sm mt-1",children:[l.length," emergency alert(s) assigned to you - Immediate response required!"]})]})]}),s.jsx(i_,{className:"w-5 h-5 text-red-600 group-hover:translate-x-1 transition-transform flex-shrink-0"})]})}),s.jsx("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(hx,{className:"w-5 h-5 text-blue-600"}),"Complaints Overview"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(He,{className:"w-4 h-4 text-blue-500 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700",children:["Total Complaints: ",s.jsx("strong",{children:(t==null?void 0:t.totalComplaints)||0})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Be,{className:"w-4 h-4 text-red-500 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700",children:["Pending: ",s.jsx("strong",{children:(t==null?void 0:t.pendingComplaints)||0})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(gt,{className:"w-4 h-4 text-yellow-500 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700",children:["In Progress: ",s.jsx("strong",{children:(t==null?void 0:t.inProgressComplaints)||0})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(dt,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700",children:["Resolved: ",s.jsx("strong",{children:(t==null?void 0:t.resolvedComplaints)||0})]})]})]})]}),s.jsx("div",{className:"text-right mt-4 lg:mt-0",children:s.jsxs("span",{className:"text-xs text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString()]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(S,{icon:He,title:"Total Complaints",value:(t==null?void 0:t.totalComplaints)||0,color:"bg-blue-500",iconBg:"bg-gradient-to-br from-blue-400 to-blue-600"}),s.jsx(S,{icon:Be,title:"Pending",value:(t==null?void 0:t.pendingComplaints)||0,color:"bg-red-500",iconBg:"bg-gradient-to-br from-red-400 to-red-600"}),s.jsx(S,{icon:gt,title:"In Progress",value:(t==null?void 0:t.inProgressComplaints)||0,color:"bg-yellow-500",iconBg:"bg-gradient-to-br from-yellow-400 to-yellow-600"}),s.jsx(S,{icon:dt,title:"Resolved",value:(t==null?void 0:t.resolvedComplaints)||0,color:"bg-green-500",iconBg:"bg-gradient-to-br from-green-400 to-green-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsx(S,{icon:Be,title:"Critical/High Priority",value:(t==null?void 0:t.criticalComplaints)||0,iconBg:"bg-gradient-to-br from-red-400 to-red-600"}),s.jsx(S,{icon:Br,title:"My Resolution Rate",value:`${(t==null?void 0:t.resolutionRate)||0}%`,iconBg:"bg-gradient-to-br from-green-400 to-green-600"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[s.jsxs("div",{className:"p-6 border-b border-gray-100 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(He,{className:"w-5 h-5 text-blue-600"})}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Complaints"})]}),s.jsxs("button",{onClick:g,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors disabled:opacity-50",disabled:h,children:[s.jsx(on,{className:`w-4 h-4 mr-1 ${h?"animate-spin":""}`}),"Refresh"]})]}),s.jsx("div",{className:"p-6",children:i.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(He,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No complaints"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"New complaints from your assigned station will appear here"})]}):s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map(w=>{var N,y,C;return s.jsx("div",{className:`rounded-lg p-4 hover:shadow-md transition-all border-l-4 ${w.priority==="Critical"?"bg-red-50 border-red-500":w.priority==="High"?"bg-orange-50 border-orange-500":w.priority==="Medium"?"bg-yellow-50 border-yellow-500":"bg-gray-50 border-blue-500"}`,children:s.jsx("div",{className:"flex justify-between items-start gap-3",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center mb-2 gap-2 flex-wrap",children:[s.jsx("p",{className:"font-semibold text-gray-900 truncate",children:((N=w.userId)==null?void 0:N.name)||"Unknown User"}),s.jsxs("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap font-medium ${w.priority==="Critical"?"bg-red-200 text-red-800":w.priority==="High"?"bg-orange-200 text-orange-800":w.priority==="Medium"?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800"}`,children:[w.priority||"Medium"," Priority"]}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap ${w.status==="Resolved"?"bg-green-100 text-green-800":w.status==="In Progress"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:w.status||"Pending"})]}),s.jsxs("p",{className:"text-sm text-gray-600 line-clamp-2",children:[((y=w.description)==null?void 0:y.substring(0,100))||"No description","..."]}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2 gap-3 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Et,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{children:((C=w.userId)==null?void 0:C.phone)||"No phone"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gt,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{children:new Date(w.createdAt).toLocaleDateString()})]}),w.assignedTo&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Br,{className:"w-3 h-3 flex-shrink-0"}),s.jsxs("span",{children:["Assigned to ",w.assignedTo.name||w.assignedTo]})]})]})]})})},w._id)})})})]})]})]})},Tj=()=>{var $,G,ce,ue,xe,ie;const e="police",[t,r]=v.useState([]),[i,o]=v.useState(!0),[l,d]=v.useState(""),[h,m]=v.useState(""),[p,b]=v.useState(""),[g,S]=v.useState(1),[w,N]=v.useState(1),[y,C]=v.useState(null),[_,x]=v.useState(!1),[k,E]=v.useState(!1),[A,M]=v.useState(!1);v.useEffect(()=>{P()},[g,l,h,p]);const P=async()=>{var q;try{o(!0);const Ne=await re.get("/police/complaints",{params:{page:g,limit:10,search:l,status:h,priority:p}});r(Ne.data.data.complaints||[]),N(((q=Ne.data.data.pagination)==null?void 0:q.pages)||1)}catch(Ne){console.error("Error fetching complaints:",Ne)}finally{o(!1)}},I=async()=>{M(!0),await P(),setTimeout(()=>M(!1),1e3)},z=async(q,Ne)=>{var ze,Y;try{E(!0);const fe=await re.put(`/police/complaints/${q}`,{status:Ne});r(t.map(ve=>ve._id===q?fe.data.data:ve)),y&&y._id===q&&C(fe.data.data)}catch(fe){console.error("Error updating complaint status:",fe),alert(((Y=(ze=fe.response)==null?void 0:ze.data)==null?void 0:Y.message)||"Failed to update complaint status")}finally{E(!1)}},V=q=>{d(q.target.value),S(1)},D=q=>{m(q),S(1)},J=q=>{b(q),S(1)},te=[{value:"",label:"All Status",icon:px},{value:"Pending",label:"Pending",icon:Be},{value:"In Progress",label:"In Progress",icon:gt},{value:"Resolved",label:"Resolved",icon:dt}],se=[{value:"",label:"All Priority",color:"gray"},{value:"Critical",label:"Critical",color:"red"},{value:"High",label:"High",color:"orange"},{value:"Medium",label:"Medium",color:"yellow"},{value:"Low",label:"Low",color:"blue"}],ge=q=>{C(q),x(!0)},ae=q=>{switch(q){case"Resolved":return"bg-green-100 text-green-800 border-green-200";case"In Progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Pending":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_e=q=>{switch(q){case"Critical":return"bg-red-100 text-red-800 border-red-200";case"High":return"bg-orange-100 text-orange-800 border-orange-200";case"Medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},U=q=>{switch(q){case"Resolved":return s.jsx(dt,{className:"w-4 h-4"});case"In Progress":return s.jsx(gt,{className:"w-4 h-4"});case"Pending":return s.jsx(Be,{className:"w-4 h-4"});default:return s.jsx(Au,{className:"w-4 h-4"})}},T=q=>s.jsx(Br,{className:"w-4 h-4"}),F=({complaint:q})=>{var Ne,ze,Y,fe;return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-blue-200 cursor-pointer overflow-hidden group",onClick:()=>ge(q),children:[s.jsx("div",{className:`h-1 w-full ${_e(q.priority||"Medium")}`}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(Ne=q.userId)!=null&&Ne.profilePhoto?s.jsx("img",{src:q.userId.profilePhoto,alt:((ze=q.userId)==null?void 0:ze.name)||"User",className:"w-12 h-12 rounded-full object-cover shadow-md group-hover:scale-105 transition-transform flex-shrink-0"}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-md group-hover:scale-105 transition-transform flex-shrink-0",children:s.jsx(wt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg truncate",children:((Y=q.userId)==null?void 0:Y.name)||"Unknown User"}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:((fe=q.userId)==null?void 0:fe.phone)||"No phone"})]})]})}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${ae(q.status)}`,children:[U(q.status),q.status]}),s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${_e(q.priority||"Medium")}`,children:[T(q.priority||"Medium"),q.priority||"Medium"]})]}),s.jsx("p",{className:"text-gray-700 mb-4 line-clamp-2 text-sm leading-relaxed",children:q.description}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("div",{className:"flex items-center text-gray-500",children:[s.jsx($n,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()})]})}),s.jsxs("button",{className:"text-blue-600 hover:text-blue-800 font-medium flex items-center group-hover:translate-x-1 transition-transform",children:["View",s.jsx("span",{className:"ml-1",children:""})]})]})]})]})};return _&&y?s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>x(!1),className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors shadow-md",children:[s.jsx("span",{className:"mr-2",children:""}),"Back to Complaints"]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",y._id.slice(-8)]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Complaint Details"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium border ${ae(y.status)}`,children:[U(y.status),y.status]}),s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium border ${_e(y.priority||"Medium")}`,children:[T(y.priority||"Medium"),y.priority||"Medium"]})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"rounded-xl bg-blue-50 border border-blue-100 p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"User Information"}),s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[($=y.userId)!=null&&$.profilePhoto?s.jsx("img",{src:y.userId.profilePhoto,alt:((G=y.userId)==null?void 0:G.name)||"User",className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:s.jsx(wt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-blue-900 truncate",children:((ce=y.userId)==null?void 0:ce.name)||"Unknown"}),s.jsx("p",{className:"text-sm text-blue-700 truncate",children:((ue=y.userId)==null?void 0:ue.email)||"No email"})]})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(Et,{className:"w-4 h-4 mr-2 text-blue-600 flex-shrink-0"}),s.jsx("span",{className:"text-blue-800",children:((xe=y.userId)==null?void 0:xe.phone)||"No phone"})]})})]}),s.jsxs("div",{className:"rounded-xl bg-purple-50 border border-purple-100 p-4",children:[s.jsx("h4",{className:"font-medium text-purple-900 mb-3",children:"Complaint Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx($n,{className:"w-4 h-4 mr-2 text-purple-600 flex-shrink-0"}),s.jsxs("span",{className:"text-purple-800",children:["Filed on ",new Date(y.createdAt).toLocaleDateString()]})]}),((ie=y.location)==null?void 0:ie.coordinates)&&s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(Te,{className:"w-4 h-4 mr-2 text-purple-600 flex-shrink-0"}),s.jsxs("span",{className:"text-purple-800",children:[y.location.coordinates[1].toFixed(5),", ",y.location.coordinates[0].toFixed(5)]})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(Br,{className:"w-4 h-4 mr-2 text-purple-600 flex-shrink-0"}),s.jsxs("span",{className:"text-purple-800",children:["Priority: ",y.priority||"Medium"]})]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Complaint Description"}),s.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg border border-gray-200",children:y.description})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Update Status"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>z(y._id,"Pending"),disabled:y.status==="Pending"||k,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.status==="Pending"?"bg-red-100 text-red-800 cursor-not-allowed border border-red-200":"bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 border border-red-600"}`,children:"Mark as Pending"}),s.jsx("button",{onClick:()=>z(y._id,"In Progress"),disabled:y.status==="In Progress"||k,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.status==="In Progress"?"bg-yellow-100 text-yellow-800 cursor-not-allowed border border-yellow-200":"bg-yellow-600 text-white hover:bg-yellow-700 disabled:opacity-50 border border-yellow-600"}`,children:"Mark as In Progress"}),s.jsx("button",{onClick:()=>z(y._id,"Resolved"),disabled:y.status==="Resolved"||k,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.status==="Resolved"?"bg-green-100 text-green-800 cursor-not-allowed border border-green-200":"bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 border border-green-600"}`,children:"Mark as Resolved"})]})]})]})]})]})})]}):s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Complaints"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Review and respond to complaints from your station"})]}),s.jsxs("button",{onClick:I,disabled:A,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(on,{className:`w-4 h-4 ${A?"animate-spin":""}`}),"Refresh"]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length})]}),s.jsx(He,{className:"w-8 h-8 text-blue-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.filter(q=>q.status==="Pending").length})]}),s.jsx(Be,{className:"w-8 h-8 text-red-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-yellow-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(q=>q.status==="In Progress").length})]}),s.jsx(gt,{className:"w-8 h-8 text-yellow-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(q=>q.status==="Resolved").length})]}),s.jsx(dt,{className:"w-8 h-8 text-green-500"})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8 border border-gray-100",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search by user name, phone, or description...",value:l,onChange:V,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 mr-1",children:"Status:"}),te.map(({value:q,label:Ne,icon:ze})=>{const Y=h===q;return s.jsxs("button",{type:"button",onClick:()=>D(q),className:`inline-flex items-center gap-1.5 px-4 py-2 rounded-xl border text-sm font-medium transition-all ${Y?q===""?"bg-gray-900 text-white border-gray-900":ae(q).replace("bg-","bg-").replace("border","border"):"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"}`,children:[s.jsx(ze,{className:"w-4 h-4"}),Ne]},q||"all")})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 mr-1",children:"Priority:"}),se.map(({value:q,label:Ne})=>{const ze=p===q,Y={Critical:"bg-red-100 text-red-800 border-red-200",High:"bg-orange-100 text-orange-800 border-orange-200",Medium:"bg-yellow-100 text-yellow-800 border-yellow-200",Low:"bg-blue-100 text-blue-800 border-blue-200"};return s.jsx("button",{type:"button",onClick:()=>J(q),className:`inline-flex items-center gap-1.5 px-4 py-2 rounded-xl border text-sm font-medium transition-all ${ze?q===""?"bg-gray-900 text-white border-gray-900":Y[q]||"bg-gray-100 text-gray-800 border-gray-200":"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"}`,children:Ne},q||"all")})]})]})}),i?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((q,Ne)=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-3/4"})]})]}),s.jsx("div",{className:"h-3 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-5/6"})]},Ne))}):t.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(He,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No complaints found"}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:l||h||p?"Try adjusting your search or filter criteria":"No complaints have been filed for your station yet"}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>{d(""),m(""),b("")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Filters"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(q=>s.jsx(F,{complaint:q},q._id))}),w>1&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-lg shadow-lg px-4 py-2",children:[s.jsx("button",{onClick:()=>S(Math.max(1,g-1)),disabled:g===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),s.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:w},(q,Ne)=>Ne+1).map(q=>s.jsx("button",{onClick:()=>S(q),className:`w-8 h-8 text-sm font-medium rounded-md transition-colors ${g===q?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:q},q))}),s.jsx("button",{onClick:()=>S(Math.min(w,g+1)),disabled:g===w,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})})]})]})]})},Mj=Ts.divIcon({className:"sos-location-marker",html:'<div style="background:#dc2626;width:28px;height:28px;border-radius:50%;border:4px solid white;box-shadow:0 2px 12px rgba(220,38,38,0.6);animation:pulse 2s infinite;"></div><style>@keyframes pulse{0%,100%{box-shadow:0 2px 12px rgba(220,38,38,0.6)}50%{box-shadow:0 2px 20px rgba(220,38,38,0.9)}}</style>',iconSize:[28,28],iconAnchor:[14,14]}),Rj=()=>{const e="police",[t,r]=v.useState([]),[i,o]=v.useState(!0),[l,d]=v.useState(!1),[h,m]=v.useState(null),[p,b]=v.useState(null),[g,S]=v.useState(!1),w=M=>{b(M),S(!0)},N=M=>{var P,I,z,V;return{name:M.name||((P=M.userId)==null?void 0:P.name)||"Unknown User",phone:M.phone||((I=M.userId)==null?void 0:I.phone)||null,email:M.email||((z=M.userId)==null?void 0:z.email)||null,profilePhoto:M.profilePhoto||((V=M.userId)==null?void 0:V.profilePhoto)||null}};v.useEffect(()=>{y()},[]),v.useEffect(()=>{const M=()=>{document.visibilityState==="visible"&&y()};return document.addEventListener("visibilitychange",M),()=>document.removeEventListener("visibilitychange",M)},[]);const y=async()=>{var M;try{o(!0);const P=await re.get("/sos/alerts/police/assigned");r(((M=P==null?void 0:P.data)==null?void 0:M.data)||[])}catch(P){console.error("Error fetching SOS alerts:",P),ee.error("Failed to load SOS alerts"),r([])}finally{o(!1)}},C=async()=>{d(!0),await y(),setTimeout(()=>d(!1),1e3)},_=async M=>{var P,I;if(window.confirm("Are you sure you want to mark this SOS alert as resolved?"))try{m(M),await re.put(`/sos/alerts/${M}/resolve`),r(z=>z.filter(V=>V._id!==M)),ee.success("SOS Alert resolved successfully")}catch(z){console.error("Error resolving alert:",z),ee.error(((I=(P=z.response)==null?void 0:P.data)==null?void 0:I.message)||"Failed to resolve alert")}finally{m(null)}},x=(M,P)=>{window.open(`https://www.google.com/maps?q=${M},${P}`,"_blank","noopener,noreferrer")},k=M=>{const P=Math.floor((new Date-new Date(M))/1e3),I=Math.floor(P/60),z=Math.floor(I/60);return z>0?`${z}h ago`:I>0?`${I}m ago`:"Just now"},E=M=>!M&&M!==0?"N/A":M>1e3?`${(M/1e3).toFixed(1)} km`:`${Math.round(M)} m`,A=t.length>0&&t[0].location?[t[0].location.lat,t[0].location.lng]:[28.7041,77.1025];return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-100 flex items-center justify-center",children:s.jsx(Ur,{className:"w-6 h-6 text-red-600"})}),"SOS Alerts"]}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Emergency alerts assigned to you - Respond immediately"})]}),s.jsxs("button",{onClick:C,disabled:i||l,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(on,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Refresh"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-red-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Alerts"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:i?"":t.length})]}),s.jsx(Be,{className:"w-8 h-8 text-red-500"})]})})}),i?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 border border-gray-100 h-96 animate-pulse",children:s.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(2)].map((M,P)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse border border-gray-100",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},P))})]}):t.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:s.jsx(dt,{className:"w-10 h-10 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No active SOS alerts"}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto mb-6",children:"You're all caught up! When SOS alerts are assigned to you, they will appear here for immediate response."}),s.jsx("button",{onClick:y,className:"px-4 py-2 text-sm font-medium text-red-700 bg-red-100 rounded-lg hover:bg-red-200 transition-colors",children:"Refresh"})]}):s.jsxs("div",{className:"space-y-6",children:[t.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center gap-2",children:[s.jsx(Be,{className:"w-4 h-4 text-red-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Emergency Map  Your Assigned SOS Locations"})]}),s.jsx("div",{className:"h-96 relative z-0",children:s.jsxs(pa,{center:A,zoom:t.length===1?15:12,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(ga,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map(M=>{var I,z;if(!((I=M.location)!=null&&I.lat)||!((z=M.location)!=null&&z.lng))return null;const P=N(M);return s.jsx(Kn,{position:[M.location.lat,M.location.lng],icon:Mj,children:s.jsx(Qn,{children:s.jsxs("div",{className:"text-sm max-w-xs",children:[s.jsx("strong",{className:"block text-gray-900 mb-2 text-red-600",children:" SOS ALERT"}),s.jsx("strong",{className:"block text-gray-900",children:P.name}),P.phone?s.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[s.jsx(Et,{className:"w-3 h-3"}),P.phone]}):s.jsx("span",{className:"text-gray-500 text-xs",children:"No phone available"}),s.jsxs("span",{className:"text-gray-500 text-xs block mt-2",children:[M.location.lat.toFixed(5),", ",M.location.lng.toFixed(5)]}),M.guardianCount>0&&s.jsxs("span",{className:"text-gray-500 text-xs block mt-1",children:[M.guardianCount," guardian(s) notified"]}),M.nearestStation&&s.jsxs("span",{className:"text-gray-500 text-xs block mt-1",children:["Station: ",M.nearestStation.name," (",E(M.distanceToStation),")"]}),M.createdAt&&s.jsx("span",{className:"text-gray-500 text-xs block mt-1",children:k(M.createdAt)})]})})},M._id)})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(M=>{var I,z;const P=N(M);return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-red-200 overflow-hidden hover:shadow-xl transition-shadow flex flex-col",children:[s.jsx("div",{className:"h-2 w-full bg-gradient-to-r from-red-500 to-red-600 animate-pulse"}),s.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[P.profilePhoto?s.jsx("img",{src:P.profilePhoto,alt:P.name,className:"w-11 h-11 rounded-full object-cover flex-shrink-0 ring-2 ring-red-200"}):s.jsx("div",{className:"w-11 h-11 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0 animate-pulse",children:s.jsx(Ur,{className:"w-5 h-5 text-red-600"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 truncate",children:[" ",P.name]}),P.phone?s.jsxs("p",{className:"text-sm text-gray-600 truncate flex items-center gap-1.5",children:[s.jsx(Et,{className:"w-3.5 h-3.5 flex-shrink-0"}),P.phone]}):s.jsx("p",{className:"text-sm text-gray-400 truncate",children:"No phone available"})]})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium flex-shrink-0",children:[s.jsx(Be,{className:"w-3 h-3"}),"ACTIVE"]})]}),M.location&&s.jsxs("div",{className:"text-xs text-gray-500 mb-3 p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"font-medium text-gray-700",children:" Coordinates:"})," ",(I=M.location.lat)==null?void 0:I.toFixed(5),", ",(z=M.location.lng)==null?void 0:z.toFixed(5)]}),M.guardianCount>0&&s.jsxs("div",{className:"text-xs text-gray-600 mb-3 bg-blue-50 p-2 rounded border border-blue-100",children:[" ",M.guardianCount," guardian(s) notified"]}),M.nearestStation&&s.jsxs("div",{className:"text-xs text-gray-700 mb-3 p-2 bg-amber-50 rounded border border-amber-100",children:[s.jsxs("div",{className:"font-medium flex items-center gap-1 mb-1",children:[s.jsx(Te,{className:"w-3 h-3"}),"Nearest Station"]}),s.jsxs("div",{className:"text-gray-600",children:[s.jsx("p",{className:"font-medium",children:M.nearestStation.name}),s.jsxs("p",{className:"text-gray-500",children:[M.nearestStation.area,", ",M.nearestStation.city]}),M.distanceToStation!=null&&s.jsxs("p",{className:"text-gray-500",children:["Distance: ",E(M.distanceToStation)]})]})]}),M.createdAt&&s.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Alert triggered: ",k(M.createdAt)]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-auto pt-2",children:[s.jsxs("button",{type:"button",onClick:()=>{var V,D;return x((V=M.location)==null?void 0:V.lat,(D=M.location)==null?void 0:D.lng)},className:"flex-1 min-w-[100px] flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-blue-600 text-white text-xs sm:text-sm font-medium hover:bg-blue-700 transition-colors",children:[s.jsx(Gr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Navigate"})]}),s.jsxs("button",{type:"button",onClick:()=>{var V,D;return x((V=M.location)==null?void 0:V.lat,(D=M.location)==null?void 0:D.lng)},className:"flex-1 min-w-[100px] flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-gray-600 text-white text-xs sm:text-sm font-medium hover:bg-gray-700 transition-colors",children:[s.jsx(ca,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Maps"})]}),s.jsxs("button",{type:"button",onClick:()=>w(M._id),className:"flex-1 min-w-[100px] flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-blue-600 text-white text-xs sm:text-sm font-medium hover:bg-blue-700 transition-colors",children:[s.jsx(Ss,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Chat"})]}),s.jsxs("button",{type:"button",onClick:()=>_(M._id),disabled:h===M._id,className:"flex-1 min-w-[100px] flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-green-600 text-white text-xs sm:text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(dt,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:h===M._id?"Resolving...":"Resolve"})]})]})]})]},M._id)})})]}),s.jsx(Zu,{sosAlertId:p,isOpen:g,onClose:()=>{S(!1),b(null)}})]})]})},Oj=()=>{const e="admin",[t,r]=v.useState(null),[i,o]=v.useState([]),[l,d]=v.useState([]),[h,m]=v.useState(!0),[p,b]=v.useState(null);v.useEffect(()=>{g()},[]),v.useEffect(()=>{const w=()=>{document.visibilityState==="visible"&&g()};return document.addEventListener("visibilitychange",w),()=>{document.removeEventListener("visibilitychange",w)}},[]);const g=async()=>{try{m(!0),b(null);const w=await re.get("/admin/dashboard");r(w.data.data.stats),o(w.data.data.recentComplaints),d(w.data.data.recentUsers)}catch(w){console.error("Error fetching dashboard data:",w),b("Failed to load dashboard data. Please refresh the page.")}finally{m(!1)}},S=({icon:w,title:N,value:y,color:C,iconBg:_})=>s.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 hover:border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:N}),s.jsx("div",{className:"flex items-baseline",children:s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:y||0})})]}),s.jsx("div",{className:`p-4 rounded-xl ${_} shadow-inner flex-shrink-0`,children:s.jsx(w,{className:"w-6 h-6 text-white"})})]})});return h?s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-8"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((w,N)=>s.jsx("div",{className:"h-32 bg-gray-300 rounded-xl"},N))})]})})]}):s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Overview of the Women Safety System"})]}),s.jsxs("button",{onClick:g,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:h,title:"Refresh dashboard data",children:[s.jsx(on,{className:`w-4 h-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]})]}),p&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3",children:[s.jsx(Be,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:"text-red-800 text-sm",children:p})]}),s.jsx("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(hx,{className:"w-5 h-5 text-blue-600"}),"System Overview"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Pd,{className:"w-4 h-4 text-blue-500 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700",children:["Active Users: ",s.jsx("strong",{children:(t==null?void 0:t.totalUsers)||0})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(qt,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700",children:["Active Police: ",s.jsx("strong",{children:(t==null?void 0:t.totalPolice)||0})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Te,{className:"w-4 h-4 text-purple-500 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700",children:["Total Stations: ",s.jsx("strong",{children:(t==null?void 0:t.totalStations)||0})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(He,{className:"w-4 h-4 text-orange-500 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700",children:["Total Complaints: ",s.jsx("strong",{children:(t==null?void 0:t.totalComplaints)||0})]})]})]})]}),s.jsx("div",{className:"text-right mt-4 lg:mt-0",children:s.jsxs("span",{className:"text-xs text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString()]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(S,{icon:We,title:"Total Users",value:(t==null?void 0:t.totalUsers)||0,color:"bg-blue-500",iconBg:"bg-gradient-to-br from-blue-400 to-blue-600"}),s.jsx(S,{icon:qt,title:"Total Police",value:(t==null?void 0:t.totalPolice)||0,color:"bg-green-500",iconBg:"bg-gradient-to-br from-green-400 to-green-600"}),s.jsx(S,{icon:Te,title:"Police Stations",value:(t==null?void 0:t.totalStations)||0,color:"bg-purple-500",iconBg:"bg-gradient-to-br from-purple-400 to-purple-600"}),s.jsx(S,{icon:He,title:"Total Complaints",value:(t==null?void 0:t.totalComplaints)||0,color:"bg-orange-500",iconBg:"bg-gradient-to-br from-orange-400 to-orange-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[s.jsx(S,{icon:Be,title:"Pending Complaints",value:(t==null?void 0:t.pendingComplaints)||0,iconBg:"bg-gradient-to-br from-red-400 to-red-600"}),s.jsx(S,{icon:gt,title:"In Progress",value:(t==null?void 0:t.inProgressComplaints)||0,iconBg:"bg-gradient-to-br from-yellow-400 to-yellow-600"}),s.jsx(S,{icon:dt,title:"Resolved",value:(t==null?void 0:t.resolvedComplaints)||0,iconBg:"bg-gradient-to-br from-green-400 to-green-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[s.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:s.jsx(He,{className:"w-5 h-5 text-red-600"})}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Complaints"})]}),s.jsxs("button",{onClick:g,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors disabled:opacity-50",disabled:h,children:[s.jsx(on,{className:`w-4 h-4 mr-1 ${h?"animate-spin":""}`}),"Refresh"]})]}),s.jsx("div",{className:"p-6",children:i.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(He,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No recent complaints"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Recent complaints will appear here"})]}):s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map(w=>{var N,y,C;return s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors border-l-4 border-blue-500",children:s.jsx("div",{className:"flex justify-between items-start gap-3",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center mb-2 gap-2 flex-wrap",children:[s.jsx("p",{className:"font-semibold text-gray-900 truncate",children:((N=w.userId)==null?void 0:N.name)||"Unknown User"}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap ${w.status==="Resolved"?"bg-green-100 text-green-800":w.status==="In Progress"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:w.status||"Pending"})]}),s.jsxs("p",{className:"text-sm text-gray-600 line-clamp-2",children:[((y=w.description)==null?void 0:y.substring(0,100))||"No description","..."]}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2 gap-3 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Te,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{children:((C=w.stationId)==null?void 0:C.name)||"Unknown Station"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gt,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{children:new Date(w.createdAt).toLocaleDateString()})]})]})]})})},w._id)})})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[s.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(sa,{className:"w-5 h-5 text-green-600"})}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"New Users"})]}),s.jsxs("button",{onClick:g,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors disabled:opacity-50",disabled:h,children:[s.jsx(on,{className:`w-4 h-4 mr-1 ${h?"animate-spin":""}`}),"Refresh"]})]}),s.jsx("div",{className:"p-6",children:l.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(sa,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No new users"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"New users from the last 7 days will appear here"})]}):s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:l.map(w=>{var N,y;return s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-md flex-shrink-0",children:s.jsx("span",{className:"text-white font-bold text-lg",children:((y=(N=w.name)==null?void 0:N.charAt(0))==null?void 0:y.toUpperCase())||"U"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-semibold text-gray-900 truncate",children:w.name||"Unknown"}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:w.email||"No email"}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1 gap-1",children:[s.jsx(gt,{className:"w-3 h-3 flex-shrink-0"}),s.jsxs("span",{children:["Joined ",new Date(w.createdAt).toLocaleDateString()]})]})]})]},w._id)})})})]})]})]})]})},Aj=()=>{const e="admin",[t,r]=v.useState([]),[i,o]=v.useState(!0),[l,d]=v.useState(""),[h,m]=v.useState(1),[p,b]=v.useState(1),[g,S]=v.useState(!1),[w,N]=v.useState(null),[y,C]=v.useState(null),[_,x]=v.useState([]),[k,E]=v.useState(!1),[A,M]=v.useState(""),P=v.useRef(null),[I,z]=v.useState({name:"",area:"",city:"",helpline:"",latitude:"",longitude:""});v.useEffect(()=>{V()},[h,l]),v.useEffect(()=>{const T=()=>{document.visibilityState==="visible"&&V()};return document.addEventListener("visibilitychange",T),()=>{document.removeEventListener("visibilitychange",T)}},[h,l]);const V=async()=>{try{o(!0);const T=await re.get("/admin/stations",{params:{page:h,limit:10,search:l}});r(T.data.data.stations),b(T.data.data.pagination.pages)}catch(T){console.error("Error fetching stations:",T)}finally{o(!1)}},D=v.useCallback(async T=>{if(!T||T.length<3){x([]);return}E(!0),M("");try{const F=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(T)}&format=json&limit=5`,{headers:{Accept:"application/json","User-Agent":"WomenSafetyApp"}});if(!F.ok)throw new Error("Failed to fetch suggestions");const $=await F.json();x($.map(G=>({name:G.display_name,lat:parseFloat(G.lat),lng:parseFloat(G.lon),address:G.address||{}})))}catch(F){console.error("Geocoding error:",F),M("Unable to fetch location suggestions. You can enter coordinates manually."),x([])}finally{E(!1)}},[]),J=v.useCallback(T=>{z({...I,name:T}),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{D(T)},500)},[I,D]),te=T=>{z({...I,name:I.name||T.address.amenity||T.name.split(",")[0],latitude:T.lat.toFixed(6),longitude:T.lng.toFixed(6),area:I.area||T.address.neighbourhood||T.address.suburb||"",city:I.city||T.address.city||T.address.town||""}),x([]),M("")},se=async T=>{T.preventDefault();try{w?await re.put(`/admin/stations/${w._id}`,I):await re.post("/admin/stations",I),V(),S(!1),N(null),z({name:"",area:"",city:"",helpline:"",latitude:"",longitude:""}),x([])}catch(F){console.error("Error saving station:",F)}},ge=async T=>{var F,$;try{await re.delete(`/admin/stations/${T}`),r(t.filter(G=>G._id!==T)),C(null)}catch(G){console.error("Error deleting station:",G),alert((($=(F=G.response)==null?void 0:F.data)==null?void 0:$.message)||"Error deleting station")}},ae=T=>{var F,$;N(T),z({name:T.name,area:T.area,city:T.city,helpline:T.helpline,latitude:((F=T.location)==null?void 0:F.coordinates[1])||"",longitude:(($=T.location)==null?void 0:$.coordinates[0])||""}),S(!0)},_e=T=>{d(T.target.value),m(1)},U=({station:T})=>s.jsx("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center",children:s.jsx(gf,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:T.name}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[s.jsx(Te,{className:"w-4 h-4 mr-1"}),T.area,", ",T.city]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[s.jsx(Et,{className:"w-4 h-4 mr-1"}),T.helpline]}),T.location&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[s.jsx(Gr,{className:"w-4 h-4 mr-1"}),T.location.coordinates[1].toFixed(4),", ",T.location.coordinates[0].toFixed(4)]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>ae(T),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx(ea,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>C(T._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(fl,{className:"w-4 h-4"})})]})]})});return g?s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsx("button",{onClick:()=>{S(!1),N(null),x([])},className:"text-blue-600 hover:text-blue-800 font-medium",children:" Back to Police Stations"})}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:w?"Edit Police Station":"Add New Police Station"})}),s.jsxs("form",{onSubmit:se,className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Station Name / Address",s.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(Start typing to see suggestions)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",required:!0,value:I.name,onChange:T=>J(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Mumbai Central Police Station or 19.0760, 72.8777"}),k&&s.jsx(st,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-500 animate-spin"}),_.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-20",children:_.map((T,F)=>s.jsx("button",{type:"button",onClick:()=>te(T),className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Te,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:T.address.amenity||T.name.split(",")[0]}),s.jsx("p",{className:"text-xs text-gray-600 truncate",children:T.name}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Lat: ",T.lat.toFixed(4),", Lng: ",T.lng.toFixed(4)]})]})]})},F))}),A&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-yellow-50 border border-yellow-200 rounded-lg p-2 text-xs text-yellow-800",children:A})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area"}),s.jsx("input",{type:"text",required:!0,value:I.area,onChange:T=>z({...I,area:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),s.jsx("input",{type:"text",required:!0,value:I.city,onChange:T=>z({...I,city:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Helpline Number"}),s.jsx("input",{type:"tel",required:!0,value:I.helpline,onChange:T=>z({...I,helpline:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Latitude",I.latitude&&s.jsx("span",{className:"text-xs text-green-600 ml-1",children:" Auto-filled"})]}),s.jsx("input",{type:"number",step:"any",required:!0,value:I.latitude,onChange:T=>z({...I,latitude:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 19.0760"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Longitude",I.longitude&&s.jsx("span",{className:"text-xs text-green-600 ml-1",children:" Auto-filled"})]}),s.jsx("input",{type:"number",step:"any",required:!0,value:I.longitude,onChange:T=>z({...I,longitude:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 72.8777"})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg flex gap-3",children:[s.jsx(Te,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Auto-fill Coordinates:"}),s.jsx("p",{children:"Start typing the station name or address above. Suggestions will appear with automatic latitude and longitude values. Click any suggestion to fill all location fields."})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>{S(!1),N(null),x([])},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[w?"Update":"Create"," Police Station"]})]})]})]})]})})]}):s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Police Stations"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all police stations"})]}),s.jsxs("button",{onClick:()=>S(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ta,{className:"w-4 h-4 mr-2"}),"Add Police Station"]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search stations by name, area, or city...",value:l,onChange:_e,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),i?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((T,F)=>s.jsx("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-3/4"})]})]})},F))}):t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No police stations found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:l?"Try adjusting your search terms":"No police stations have been added yet"}),!l&&s.jsxs("button",{onClick:()=>S(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mx-auto",children:[s.jsx(ta,{className:"w-4 h-4 mr-2"}),"Add First Police Station"]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(T=>s.jsx(U,{station:T},T._id))}),p>1&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>m(Math.max(1,h-1)),disabled:h===1,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),s.jsxs("span",{className:"px-4 py-2",children:["Page ",h," of ",p]}),s.jsx("button",{onClick:()=>m(Math.min(p,h+1)),disabled:h===p,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})})]}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this police station? This action cannot be undone. Note: You cannot delete a station if police officers are assigned to it."}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>C(null),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>ge(y),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})]})},Qx=Ie.memo(({isOpen:e,onClose:t,editingPolice:r,formData:i,onFormDataChange:o,stations:l,onSubmit:d,fileInputRef:h,uploadingPhoto:m,onPhotoUpload:p})=>e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:t,children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg mx-auto overflow-hidden border border-gray-100",onClick:b=>b.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-5 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center",children:s.jsx(sa,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold tracking-tight",children:r?"Edit Officer":"Add Police Officer"}),s.jsx("p",{className:"text-blue-100 text-sm mt-0.5",children:r?"Update officer details":"Create a new police account"})]})]}),s.jsx("button",{type:"button",onClick:t,className:"p-2 rounded-lg hover:bg-white/20 transition-colors","aria-label":"Close",children:s.jsx(Jn,{className:"w-5 h-5"})})]})}),s.jsxs("form",{onSubmit:d,className:"p-6",children:[s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex flex-col items-center mb-2",children:[s.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:p,className:"hidden"}),s.jsxs("div",{className:"relative w-20 h-20 cursor-pointer group",onClick:()=>{var b;return!m&&((b=h.current)==null?void 0:b.click())},children:[i.profilePhoto?s.jsx("img",{src:i.profilePhoto,alt:"Profile",className:"w-20 h-20 rounded-full object-cover border-4 border-white shadow-lg"}):s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(wt,{className:"w-10 h-10 text-white"})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:m?s.jsx(st,{className:"w-5 h-5 text-white animate-spin"}):s.jsx(mx,{className:"w-5 h-5 text-white"})})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Click to add photo"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(wt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",required:!0,placeholder:"Full name",value:i.name,onChange:b=>o({...i,name:b.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"email",required:!0,placeholder:"officer@example.com",value:i.email,onChange:b=>o({...i,email:b.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone"}),s.jsxs("div",{className:"relative",children:[s.jsx(Et,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"tel",required:!0,placeholder:"10-digit number",value:i.phone,onChange:b=>o({...i,phone:b.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:r?"New password (optional)":"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"password",required:!r,placeholder:r?"Leave blank to keep":"Min 6 characters",value:i.password,onChange:b=>o({...i,password:b.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Police Station"}),s.jsxs("div",{className:"relative",children:[s.jsx(Te,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none z-10"}),s.jsxs("select",{value:i.stationId,onChange:b=>o({...i,stationId:b.target.value}),required:!0,className:"w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl text-gray-900 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none bg-white cursor-pointer",children:[s.jsx("option",{value:"",children:"Select a station"}),l.map(b=>s.jsxs("option",{value:b._id,children:[b.name,"  ",b.area]},b._id))]}),s.jsx(fx,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]})]}),s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 mt-6 pt-4 border-t border-gray-100",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 sm:flex-none px-5 py-3 rounded-xl border border-gray-200 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700 shadow-lg shadow-blue-600/25 hover:shadow-blue-600/30 transition-all",children:[s.jsx(qt,{className:"w-4 h-4"}),r?"Update Officer":"Create Officer"]})]})]})]})}):null);Qx.displayName="AddPoliceModal";const Yx=Ie.memo(({isOpen:e,onConfirm:t,onCancel:r})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(vn,{className:"w-12 h-12 text-red-500 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Delete"}),s.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this police officer? This action cannot be undone."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:r,className:"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:t,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete Officer"})]})]})}):null);Yx.displayName="DeleteConfirmModal";const Ij=()=>{const e="admin",[t,r]=v.useState([]),[i,o]=v.useState([]),[l,d]=v.useState(!0),[h,m]=v.useState(""),[p,b]=v.useState(1),[g,S]=v.useState(1),[w,N]=v.useState(!1),[y,C]=v.useState(null),[_,x]=v.useState(null),[k,E]=v.useState(!1),A=v.useRef(null),[M,P]=v.useState({name:"",email:"",password:"",phone:"",stationId:"",profilePhoto:""});v.useEffect(()=>{I(),z()},[p,h]);const I=async()=>{var $,G,ce,ue,xe;try{d(!0);const ie=await re.get("/admin/police",{params:{page:p,limit:10,search:h}});r(((G=($=ie==null?void 0:ie.data)==null?void 0:$.data)==null?void 0:G.police)||[]),S(((xe=(ue=(ce=ie==null?void 0:ie.data)==null?void 0:ce.data)==null?void 0:ue.pagination)==null?void 0:xe.pages)||1)}catch(ie){console.error("Error fetching police:",ie),r([])}finally{d(!1)}},z=async()=>{var $,G;try{const ce=await re.get("/admin/stations",{params:{limit:100}});o(((G=($=ce==null?void 0:ce.data)==null?void 0:$.data)==null?void 0:G.stations)||[])}catch(ce){console.error("Error fetching stations:",ce),o([])}},V=async $=>{var G,ce;$.preventDefault();try{y?await re.put(`/admin/police/${y._id}`,M):await re.post("/admin/police",M),I(),N(!1),C(null),P({name:"",email:"",password:"",phone:"",stationId:"",profilePhoto:""})}catch(ue){console.error("Error saving police officer:",ue),alert("Error: "+(((ce=(G=ue.response)==null?void 0:G.data)==null?void 0:ce.message)||ue.message||"Failed to save police officer"))}},D=async $=>{var G,ce;try{await re.delete(`/admin/police/${$}`),r(ue=>ue.filter(xe=>xe._id!==$)),x(null)}catch(ue){console.error("Error deleting police officer:",ue),alert("Error: "+(((ce=(G=ue.response)==null?void 0:G.data)==null?void 0:ce.message)||ue.message||"Failed to delete police officer"))}},J=v.useCallback($=>{P($)},[]),te=v.useCallback($=>{var ue;const G=(ue=$.target.files)==null?void 0:ue[0];if(!G)return;if(!G.type.startsWith("image/")){alert("Please select an image file");return}if(G.size>5*1024*1024){alert("Image size should be less than 5MB");return}E(!0);const ce=new FileReader;ce.onloadend=()=>{P(xe=>({...xe,profilePhoto:ce.result})),E(!1),A.current&&(A.current.value="")},ce.onerror=()=>{alert("Failed to read image file"),E(!1)},ce.readAsDataURL(G)},[]),se=v.useCallback(()=>{N(!1),C(null),P({name:"",email:"",password:"",phone:"",stationId:"",profilePhoto:""})},[]),ge=v.useCallback(()=>{C(null),P({name:"",email:"",password:"",phone:"",stationId:"",profilePhoto:""}),N(!0)},[]),ae=v.useCallback(()=>{_&&D(_)},[_]),_e=v.useCallback(()=>{x(null)},[]),U=v.useCallback($=>{var G;C($),P({name:$.name||"",email:$.email||"",password:"",phone:$.phone||"",stationId:((G=$.stationId)==null?void 0:G._id)||"",profilePhoto:$.profilePhoto||""}),N(!0)},[]),T=$=>{m($.target.value),b(1)},F=({officer:$})=>s.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-blue-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[$.profilePhoto?s.jsx("img",{src:$.profilePhoto,alt:$.name,className:"w-12 h-12 rounded-full object-cover shadow-md"}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-md",children:s.jsx(qt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:$.name}),s.jsx("p",{className:"text-sm text-gray-600",children:$.email})]})]}),s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:$.status})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Et,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:$.phone})]}),$.stationId&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Te,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{children:[$.stationId.name," - ",$.stationId.area]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Added ",$.createdAt?new Date($.createdAt).toLocaleDateString():"N/A"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>U($),className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[s.jsx(ea,{className:"w-4 h-4 mr-1"}),"Edit"]}),s.jsxs("button",{onClick:()=>x($._id),className:"text-red-600 hover:text-red-800 font-medium flex items-center",children:[s.jsx(fl,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]})});return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Police Accounts"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all police officers"})]}),s.jsxs("button",{onClick:ge,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[s.jsx(sa,{className:"w-5 h-5 mr-2"}),"Add Police Officer"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Officers"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length})]}),s.jsx(qt,{className:"w-8 h-8 text-blue-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Stations"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.length})]}),s.jsx(Te,{className:"w-8 h-8 text-green-500"})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search police officers by name, email, or phone...",value:h,onChange:T,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),l?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map(($,G)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-3/4"})]})]}),s.jsx("div",{className:"h-3 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-5/6"})]},G))}):t.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(qt,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No police officers found"}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:h?"Try adjusting your search terms":"No police officers have been added yet"}),s.jsx("div",{className:"mt-6",children:s.jsxs("button",{onClick:ge,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mx-auto",children:[s.jsx(sa,{className:"w-5 h-5 mr-2"}),"Add First Police Officer"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map($=>s.jsx(F,{officer:$},$._id))}),g>1&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-lg shadow-lg px-4 py-2",children:[s.jsx("button",{onClick:()=>b(Math.max(1,p-1)),disabled:p===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),s.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:g},($,G)=>G+1).map($=>s.jsx("button",{onClick:()=>b($),className:`w-8 h-8 text-sm font-medium rounded-md transition-colors ${p===$?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:$},$))}),s.jsx("button",{onClick:()=>b(Math.min(g,p+1)),disabled:p===g,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})})]})]}),s.jsx(Qx,{isOpen:w,onClose:se,editingPolice:y,formData:M,onFormDataChange:J,stations:i,onSubmit:V,fileInputRef:A,uploadingPhoto:k,onPhotoUpload:te}),s.jsx(Yx,{isOpen:!!_,onConfirm:ae,onCancel:_e})]})]})},zj=()=>{var he,ye,O,K,oe,de;const e="admin",[t,r]=v.useState([]),[i,o]=v.useState(!0),[l,d]=v.useState(""),[h,m]=v.useState(""),[p,b]=v.useState(""),[g,S]=v.useState(1),[w,N]=v.useState(1),[y,C]=v.useState(null),[_,x]=v.useState(!1),[k,E]=v.useState(!1),[A,M]=v.useState(!1),[P,I]=v.useState(!1),[z,V]=v.useState([]),[D,J]=v.useState(!1),[te,se]=v.useState(""),[ge,ae]=v.useState(!1);v.useEffect(()=>{_e()},[g,l,h,p]);const _e=async()=>{try{o(!0);const Z=await re.get("/admin/complaints",{params:{page:g,limit:10,search:l,status:h,priority:p}});r(Z.data.data.complaints),N(Z.data.data.pagination.pages)}catch(Z){console.error("Error fetching complaints:",Z),ee.error("Failed to fetch complaints")}finally{o(!1)}},U=async Z=>{try{J(!0);const pe=await re.get(`/admin/complaints/${Z}/officers`);V(pe.data.data),se("")}catch(pe){console.error("Error fetching officers:",pe),ee.error("Failed to fetch officers"),V([])}finally{J(!1)}},T=Z=>{C(Z),I(!0);const pe=typeof Z.stationId=="object"?Z.stationId._id:Z.stationId;U(pe)},F=async()=>{var Z,pe;if(!te){ee.error("Please select an officer");return}try{ae(!0);const je=await re.put(`/admin/complaints/${y._id}/assign`,{policeId:te});r(t.map(De=>De._id===y._id?je.data.data:De)),_&&C(je.data.data),ee.success("Complaint assigned successfully"),I(!1)}catch(je){console.error("Error assigning complaint:",je),ee.error(((pe=(Z=je.response)==null?void 0:Z.data)==null?void 0:pe.message)||"Failed to assign complaint")}finally{ae(!1)}},$=async Z=>{var pe,je;if(window.confirm("Are you sure you want to unassign this complaint?"))try{const De=await re.put(`/admin/complaints/${Z}/unassign`);r(t.map(at=>at._id===Z?De.data.data:at)),y&&y._id===Z&&C(De.data.data),ee.success("Complaint unassigned successfully")}catch(De){console.error("Error unassigning complaint:",De),ee.error(((je=(pe=De.response)==null?void 0:pe.data)==null?void 0:je.message)||"Failed to unassign complaint")}},G=async(Z,pe)=>{try{E(!0);const je=await re.put(`/admin/complaints/${Z}`,{status:pe});r(t.map(De=>De._id===Z?je.data.data:De)),y&&y._id===Z&&C(je.data.data)}catch(je){console.error("Error updating complaint status:",je),ee.error("Failed to update status")}finally{E(!1)}},ce=async(Z,pe)=>{try{M(!0);const je=await re.put(`/admin/complaints/${Z}`,{priority:pe});r(t.map(De=>De._id===Z?je.data.data:De)),y&&y._id===Z&&C(je.data.data)}catch(je){console.error("Error updating complaint priority:",je),ee.error("Failed to update priority")}finally{M(!1)}},ue=Z=>{d(Z.target.value),S(1)},xe=Z=>{m(Z),S(1)},ie=Z=>{b(Z),S(1)},q=[{value:"",label:"All",icon:px},{value:"Pending",label:"Pending",icon:Be},{value:"In Progress",label:"In Progress",icon:gt},{value:"Resolved",label:"Resolved",icon:dt}],Ne=[{value:"",label:"All Priority",color:"gray"},{value:"Critical",label:"Critical",color:"red"},{value:"High",label:"High",color:"orange"},{value:"Medium",label:"Medium",color:"yellow"},{value:"Low",label:"Low",color:"blue"}],ze=Z=>{C(Z),x(!0)},Y=Z=>{switch(Z){case"Resolved":return"bg-green-100 text-green-800";case"In Progress":return"bg-yellow-100 text-yellow-800";case"Pending":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},fe=Z=>{switch(Z){case"Critical":return"bg-red-100 text-red-800 border-red-200";case"High":return"bg-orange-100 text-orange-800 border-orange-200";case"Medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ve=Z=>{switch(Z){case"Resolved":return s.jsx(dt,{className:"w-4 h-4"});case"In Progress":return s.jsx(gt,{className:"w-4 h-4"});case"Pending":return s.jsx(Be,{className:"w-4 h-4"});default:return s.jsx(Au,{className:"w-4 h-4"})}},Ce=({complaint:Z})=>{var pe,je,De,at,_n;return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-blue-200 cursor-pointer overflow-hidden group",onClick:()=>ze(Z),children:[s.jsx("div",{className:`h-1 w-full ${fe(Z.priority||"Medium")}`}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[(pe=Z.userId)!=null&&pe.profilePhoto?s.jsx("img",{src:Z.userId.profilePhoto,alt:((je=Z.userId)==null?void 0:je.name)||"User",className:"w-12 h-12 rounded-full object-cover shadow-md group-hover:scale-105 transition-transform"}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-md group-hover:scale-105 transition-transform",children:s.jsx(wt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:((De=Z.userId)==null?void 0:De.name)||"Unknown User"}),s.jsx("p",{className:"text-sm text-gray-600",children:(at=Z.userId)==null?void 0:at.email})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${Y(Z.status)} shadow-sm`,children:[ve(Z.status),s.jsx("span",{className:"ml-1",children:Z.status})]})})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${fe(Z.priority||"Medium")}`,children:[s.jsx(Br,{className:"w-3 h-3"}),Z.priority||"Medium"," Priority"]})}),s.jsx("p",{className:"text-gray-700 mb-4 line-clamp-2 text-sm leading-relaxed",children:Z.description}),Z.assignedTo&&s.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg border border-blue-100",children:s.jsxs("p",{className:"text-xs text-blue-700 font-medium",children:["Assigned to: ",Z.assignedTo.name]})}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center text-gray-500",children:[s.jsx(Te,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"truncate max-w-[120px]",children:((_n=Z.stationId)==null?void 0:_n.name)||"No Station"})]}),s.jsxs("div",{className:"flex items-center text-gray-500",children:[s.jsx($n,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:new Date(Z.createdAt).toLocaleDateString()})]})]}),s.jsxs("button",{className:"text-blue-600 hover:text-blue-800 font-medium flex items-center group-hover:translate-x-1 transition-transform",children:["View Details",s.jsx("span",{className:"ml-1",children:""})]})]})]})]})},Q=()=>{var Z,pe;return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Assign Complaint"})]}),s.jsx("button",{onClick:()=>I(!1),className:"text-gray-500 hover:text-gray-700 transition-colors",children:s.jsx(Jn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Complaint ID"}),s.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded-lg",children:(Z=y==null?void 0:y._id)==null?void 0:Z.slice(-8)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Police Station"}),s.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded-lg",children:(pe=y==null?void 0:y.stationId)==null?void 0:pe.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Police Officer"}),D?s.jsx("div",{className:"p-3 text-center text-gray-600",children:"Loading officers..."}):z.length===0?s.jsx("div",{className:"p-3 text-center text-gray-600 bg-gray-50 rounded-lg",children:"No officers available at this station"}):s.jsxs("select",{value:te,onChange:je=>se(je.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none bg-white",children:[s.jsx("option",{value:"",children:"-- Select an officer --"}),z.map(je=>s.jsxs("option",{value:je._id,children:[je.name," (",je.email,")"]},je._id))]})]})]}),s.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>I(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-900 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Cancel"}),s.jsx("button",{onClick:F,disabled:ge||!te,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:ge?"Assigning...":"Assign"})]})]})})};return _&&y?s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>x(!1),className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors shadow-md",children:[s.jsx("span",{className:"mr-2",children:""}),"Back to All Complaints"]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Complaint ID: ",y._id.slice(-8)]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Complaint Details"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Y(y.status)}`,children:[ve(y.status),s.jsx("span",{className:"ml-1",children:y.status})]}),s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium border ${fe(y.priority||"Medium")}`,children:[s.jsx(Br,{className:"w-4 h-4"}),y.priority||"Medium"]})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"rounded-lg bg-blue-50 border border-blue-100 p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Complainant Information"}),s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[(he=y.userId)!=null&&he.profilePhoto?s.jsx("img",{src:y.userId.profilePhoto,alt:((ye=y.userId)==null?void 0:ye.name)||"User",className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:s.jsx(wt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900 truncate",children:(O=y.userId)==null?void 0:O.name}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:(K=y.userId)==null?void 0:K.email})]})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx($n,{className:"w-4 h-4 mr-2 text-gray-500"}),(oe=y.userId)==null?void 0:oe.phone]})})]}),s.jsxs("div",{className:"rounded-lg bg-purple-50 border border-purple-100 p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Complaint Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(Te,{className:"w-4 h-4 mr-2 text-gray-500"}),(de=y.stationId)==null?void 0:de.name]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx($n,{className:"w-4 h-4 mr-2 text-gray-500"}),"Filed on ",new Date(y.createdAt).toLocaleDateString()]}),y.location&&s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(Te,{className:"w-4 h-4 mr-2 text-gray-500"}),"Location: ",y.location.coordinates[1].toFixed(4),", ",y.location.coordinates[0].toFixed(4)]})]})]})]}),s.jsx("div",{className:"mb-6 rounded-lg bg-green-50 border border-green-100 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Assigned Officer"}),y.assignedTo?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wt,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{className:"text-sm text-gray-700",children:[y.assignedTo.name," (",y.assignedTo.email,")"]})]}):s.jsx("p",{className:"text-sm text-gray-600",children:"No officer assigned yet"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Z=>{Z.preventDefault(),Z.stopPropagation(),T(y)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm",children:[y.assignedTo?"Reassign":"Assign"," Officer"]}),y.assignedTo&&s.jsx("button",{onClick:()=>$(y._id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium text-sm",children:"Unassign"})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:y.description})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Update Status"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>G(y._id,"Pending"),disabled:y.status==="Pending"||k,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.status==="Pending"?"bg-red-100 text-red-800 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700 disabled:opacity-50"}`,children:"Mark as Pending"}),s.jsx("button",{onClick:()=>G(y._id,"In Progress"),disabled:y.status==="In Progress"||k,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.status==="In Progress"?"bg-yellow-100 text-yellow-800 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700 disabled:opacity-50"}`,children:"Mark as In Progress"}),s.jsx("button",{onClick:()=>G(y._id,"Resolved"),disabled:y.status==="Resolved"||k,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.status==="Resolved"?"bg-green-100 text-green-800 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 disabled:opacity-50"}`,children:"Mark as Resolved"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Set Priority Level"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>ce(y._id,"Low"),disabled:y.priority==="Low"||A,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.priority==="Low"?"bg-blue-100 text-blue-800 cursor-not-allowed border border-blue-200":"bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50"}`,children:"Low Priority"}),s.jsx("button",{onClick:()=>ce(y._id,"Medium"),disabled:y.priority==="Medium"||A,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.priority==="Medium"?"bg-yellow-100 text-yellow-800 cursor-not-allowed border border-yellow-200":"bg-yellow-600 text-white hover:bg-yellow-700 disabled:opacity-50"}`,children:"Medium Priority"}),s.jsx("button",{onClick:()=>ce(y._id,"High"),disabled:y.priority==="High"||A,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.priority==="High"?"bg-orange-100 text-orange-800 cursor-not-allowed border border-orange-200":"bg-orange-600 text-white hover:bg-orange-700 disabled:opacity-50"}`,children:"High Priority"}),s.jsx("button",{onClick:()=>ce(y._id,"Critical"),disabled:y.priority==="Critical"||A,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.priority==="Critical"?"bg-red-100 text-red-800 cursor-not-allowed border border-red-200":"bg-red-600 text-white hover:bg-red-700 disabled:opacity-50"}`,children:"Critical Priority"})]})]})]})]})]})}),P&&s.jsx(Q,{})]}):s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Complaints"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all user complaints"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Complaints"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.filter(Z=>Z.status==="Pending").length})]}),s.jsx(Be,{className:"w-8 h-8 text-red-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-yellow-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(Z=>Z.status==="In Progress").length})]}),s.jsx(gt,{className:"w-8 h-8 text-yellow-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(Z=>Z.status==="Resolved").length})]}),s.jsx(dt,{className:"w-8 h-8 text-green-500"})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8 border border-gray-100",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search complaints by description, user name, or email...",value:l,onChange:ue,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 mr-1",children:"Status:"}),q.map(({value:Z,label:pe,icon:je})=>{const De=h===Z,at=Z===""?"bg-gray-900 text-white border-gray-900 shadow-sm":Z==="Pending"?"bg-red-100 text-red-800 border-red-200":Z==="In Progress"?"bg-amber-100 text-amber-800 border-amber-200":"bg-green-100 text-green-800 border-green-200";return s.jsxs("button",{type:"button",onClick:()=>xe(Z),className:`inline-flex items-center gap-1.5 px-4 py-2 rounded-xl border text-sm font-medium transition-all ${De?at:"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100 hover:border-gray-300"}`,children:[s.jsx(je,{className:"w-4 h-4"}),pe]},Z||"all")})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 mr-1",children:"Priority:"}),Ne.map(({value:Z,label:pe})=>{const je=p===Z,De={Critical:"bg-red-100 text-red-800 border-red-200",High:"bg-orange-100 text-orange-800 border-orange-200",Medium:"bg-yellow-100 text-yellow-800 border-yellow-200",Low:"bg-blue-100 text-blue-800 border-blue-200"};return s.jsx("button",{type:"button",onClick:()=>ie(Z),className:`inline-flex items-center gap-1.5 px-4 py-2 rounded-xl border text-sm font-medium transition-all ${je?Z===""?"bg-gray-900 text-white border-gray-900":De[Z]:"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"}`,children:pe},Z||"all")})]})]})}),i?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((Z,pe)=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-3/4"})]})]}),s.jsx("div",{className:"h-3 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-5/6"})]},pe))}):t.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(He,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No complaints found"}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:l||h||p?"Try adjusting your search or filter criteria":"No complaints have been filed yet"}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>{d(""),m(""),b("")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Filters"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(Z=>s.jsx(Ce,{complaint:Z},Z._id))}),w>1&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-lg shadow-lg px-4 py-2",children:[s.jsx("button",{onClick:()=>S(Math.max(1,g-1)),disabled:g===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),s.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:w},(Z,pe)=>pe+1).map(Z=>s.jsx("button",{onClick:()=>S(Z),className:`w-8 h-8 text-sm font-medium rounded-md transition-colors ${g===Z?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:Z},Z))}),s.jsx("button",{onClick:()=>S(Math.min(w,g+1)),disabled:g===w,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})})]}),P&&s.jsx(Q,{})]})]})},Dj=Ts.divIcon({className:"sos-location-marker",html:'<div style="background:#dc2626;width:28px;height:28px;border-radius:50%;border:4px solid white;box-shadow:0 2px 12px rgba(220,38,38,0.6);animation:pulse 2s infinite;"></div><style>@keyframes pulse{0%,100%{box-shadow:0 2px 12px rgba(220,38,38,0.6)}50%{box-shadow:0 2px 20px rgba(220,38,38,0.9)}}</style>',iconSize:[28,28],iconAnchor:[14,14]}),Fj=Ts.divIcon({className:"station-marker",html:'<div style="background:#2563eb;width:24px;height:24px;border-radius:50%;border:3px solid white;box-shadow:0 2px 8px rgba(37,99,235,0.5);"></div>',iconSize:[24,24],iconAnchor:[12,12]}),no=(e,t,r,i)=>{const l=(r-e)*Math.PI/180,d=(i-t)*Math.PI/180,h=Math.sin(l/2)*Math.sin(l/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))},Bj=()=>{const e="admin",[t,r]=v.useState([]),[i,o]=v.useState(!0),[l,d]=v.useState(null),[h,m]=v.useState(""),[p,b]=v.useState(!1),[g,S]=v.useState(null),[w,N]=v.useState(null),[y,C]=v.useState(null),[_,x]=v.useState(!1),[k,E]=v.useState([]),[A,M]=v.useState(null),[P,I]=v.useState([]),[z,V]=v.useState(null),[D,J]=v.useState([]),[te,se]=v.useState(5),[ge,ae]=v.useState(!1),[_e,U]=v.useState(null),[T,F]=v.useState(!1),$=O=>{U(O),F(!0)};v.useEffect(()=>{G(),ce()},[]),v.useEffect(()=>{const O=setInterval(()=>{re.get("/sos/alerts").then(K=>{var de;const oe=((de=K==null?void 0:K.data)==null?void 0:de.data)||[];r(oe)}).catch(K=>{console.error("Error auto-refreshing locations:",K)})},3e4);return()=>clearInterval(O)},[]),v.useEffect(()=>{z?xe(z,te):J([])},[z,te,P]);const G=async()=>{var O,K,oe;try{o(!0),d(null);const de=await re.get("/sos/alerts"),Z=((O=de==null?void 0:de.data)==null?void 0:O.data)||[];r(Z),V(pe=>pe&&!Z.find(je=>je._id===pe._id)?(J([]),null):pe)}catch(de){console.error("Error fetching emergency locations:",de),d(((oe=(K=de.response)==null?void 0:K.data)==null?void 0:oe.message)||"Failed to load emergency locations"),r([])}finally{o(!1)}},ce=async()=>{var O;try{const K=await re.get("/stations"),oe=((O=K==null?void 0:K.data)==null?void 0:O.data)||(K==null?void 0:K.data)||[],de=Array.isArray(oe)?oe:[];I(de)}catch(K){console.error("Error fetching all stations:",K),I([])}},ue=async(O,K)=>{var oe;try{const de=await re.get("/stations");let Z=((oe=de==null?void 0:de.data)==null?void 0:oe.data)||[];Z=Z.map(pe=>{let je=null;if(pe.location&&pe.location.coordinates){const[De,at]=pe.location.coordinates;je=no(O,K,at,De)}return{...pe,calculatedDistance:je}}),Z.sort((pe,je)=>pe.calculatedDistance===null?1:je.calculatedDistance===null?-1:pe.calculatedDistance-je.calculatedDistance),E(Z)}catch(de){console.error("Error fetching stations:",de),ee.error("Failed to load available stations")}},xe=(O,K)=>{if(!O||!O.lat||!O.lng){J([]);return}if(!P||P.length===0){J([]);return}const oe=K*1e3,de=P.map(Z=>{let pe,je;if(Z.latitude!=null&&Z.longitude!=null)pe=Number(Z.latitude),je=Number(Z.longitude);else if(Z.location&&Array.isArray(Z.location.coordinates))[je,pe]=Z.location.coordinates;else if(Z.location&&Z.location.lat&&Z.location.lng)pe=Number(Z.location.lat),je=Number(Z.location.lng);else return null;if(isNaN(pe)||isNaN(je))return null;const De=no(O.lat,O.lng,pe,je);return De<=oe?{...Z,distanceToAlert:De,stationLat:pe,stationLng:je}:null}).filter(Boolean).sort((Z,pe)=>Z.distanceToAlert-pe.distanceToAlert);J(de)},ie=O=>{const K=O.location||O;!K||!K.lat||!K.lng||(z&&z.lat===K.lat&&z.lng===K.lng?V(null):V({...K,_id:O._id}))},q=async()=>{b(!0),await G(),setTimeout(()=>b(!1),1e3)},Ne=async O=>{var oe,de,Z;const K=t.find(pe=>pe._id===O);C(K),M(((oe=K.nearestStation)==null?void 0:oe._id)||null),await ue((de=K.location)==null?void 0:de.lat,(Z=K.location)==null?void 0:Z.lng),x(!0)},ze=async()=>{var O,K;if(!A){ee.error("Please select a police station");return}try{N(y._id),await re.put(`/sos/alerts/${y._id}/assign-officers`,{stationId:A});const oe=t.map(de=>{if(de._id===y._id){const Z=k.find(pe=>pe._id===A);return{...de,nearestStation:Z,assignmentStatus:"Assigned"}}return de});r(oe),ee.success("Officers assigned successfully"),x(!1)}catch(oe){console.error("Error assigning officers:",oe),ee.error(((K=(O=oe.response)==null?void 0:O.data)==null?void 0:K.message)||"Failed to assign officers")}finally{N(null)}},Y=async O=>{var K,oe;if(window.confirm("Are you sure you want to resolve this SOS alert?"))try{S(O),await re.put(`/sos/alerts/${O}/resolve`),r(t.filter(de=>de._id!==O)),(z==null?void 0:z._id)===O&&(V(null),J([])),ee.success("SOS Alert resolved successfully")}catch(de){console.error("Error resolving alert:",de),ee.error(((oe=(K=de.response)==null?void 0:K.data)==null?void 0:oe.message)||"Failed to resolve alert")}finally{S(null)}},fe=v.useMemo(()=>{let O=t;if(h.trim()){const K=h.toLowerCase();O=t.filter(oe=>oe.name&&oe.name.toLowerCase().includes(K)||oe.email&&oe.email.toLowerCase().includes(K)||oe.phone&&oe.phone.toLowerCase().includes(K))}return O.map(K=>{if(K.distanceToStation==null&&K.nearestStation&&K.location&&K.nearestStation.location&&Array.isArray(K.nearestStation.location.coordinates)&&K.nearestStation.location.coordinates.length>=2){const[oe,de]=K.nearestStation.location.coordinates;if(typeof de=="number"&&typeof oe=="number"&&typeof K.location.lat=="number"&&typeof K.location.lng=="number"){const Z=no(K.location.lat,K.location.lng,de,oe);return{...K,distanceToStation:Z}}}return K})},[t,h]),ve=v.useMemo(()=>{if(t.length===0)return[28.7041,77.1025];const O=t.reduce((oe,de)=>{var Z;return oe+(((Z=de.location)==null?void 0:Z.lat)||0)},0)/t.length,K=t.reduce((oe,de)=>{var Z;return oe+(((Z=de.location)==null?void 0:Z.lng)||0)},0)/t.length;return[O,K]},[t]),Ce=(O,K)=>{window.open(`https://www.google.com/maps?q=${O},${K}`,"_blank","noopener,noreferrer")},Q=O=>{const K=Math.floor((new Date-new Date(O))/1e3),oe=Math.floor(K/60),de=Math.floor(oe/60);return de>0?`${de}h ago`:oe>0?`${oe}m ago`:"Just now"},he=O=>!O&&O!==0?"N/A":O>1e3?`${(O/1e3).toFixed(1)} km`:`${Math.round(O)} m`,ye=O=>{switch(O){case"Assigned":return"bg-green-50 text-green-700 border-green-200";case"In Progress":return"bg-blue-50 text-blue-700 border-blue-200";case"Unassigned":return"bg-yellow-50 text-yellow-700 border-yellow-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-100 flex items-center justify-center",children:s.jsx(Be,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Active SOS Alerts"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time emergency locations with police officer assignments"})]})]}),s.jsxs("button",{onClick:q,disabled:i||p,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-gray-200 text-gray-700 text-sm font-medium hover:bg-white hover:border-gray-300 disabled:opacity-50 shrink-0",children:[s.jsx(on,{className:`w-4 h-4 ${p?"animate-spin":""}`}),"Refresh"]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Alerts"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:i?"":t.length})]}),s.jsx(Be,{className:"w-8 h-8 text-red-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Assigned"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:i?"":t.filter(O=>O.assignmentStatus==="Assigned").length})]}),s.jsx(We,{className:"w-8 h-8 text-green-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unassigned"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:i?"":t.filter(O=>O.assignmentStatus==="Unassigned").length})]}),s.jsx(Ur,{className:"w-8 h-8 text-yellow-500"})]})})]}),l&&s.jsxs("div",{className:"mb-6 p-4 rounded-xl bg-red-50 border border-red-100 flex items-center gap-3",children:[s.jsx(vn,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),s.jsx("p",{className:"text-red-800 text-sm",children:l})]}),i&&t.length===0?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 border border-gray-100 h-96 animate-pulse",children:s.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((O,K)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse border border-gray-100",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]}),s.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},K))})]}):t.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:s.jsx(Ed,{className:"w-10 h-10 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No active SOS alerts"}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto mb-6",children:"When users trigger SOS alerts, their emergency locations will appear here for immediate response coordination."}),s.jsx("button",{onClick:G,className:"px-4 py-2 text-sm font-medium text-red-700 bg-red-100 rounded-lg hover:bg-red-200 transition-colors",children:"Refresh"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Be,{className:"w-4 h-4 text-red-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Emergency Map  Active SOS Locations"})]}),s.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx(Te,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{children:"Range:"}),s.jsx("input",{type:"number",min:"1",max:"50",value:te,onChange:O=>se(Math.max(1,Math.min(50,Number(O.target.value)||5))),className:"w-16 px-2 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("span",{className:"text-gray-600",children:"km"})]}),z&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>V(null),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition-colors",children:"Clear Selection"}),s.jsxs("button",{onClick:()=>ae(!ge),className:`text-xs px-2 py-1 rounded-lg transition-colors ${ge?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,title:"Show all stations on map (for testing)",children:[ge?"Hide All":"Show All"," Stations"]}),s.jsxs("span",{className:"text-xs text-gray-600 hidden sm:inline",children:["Stations: ",P.length," | In range: ",D.length]})]})]})]}),s.jsx("div",{className:"h-96 relative z-0",children:s.jsxs(pa,{center:z?[z.lat,z.lng]:ve,zoom:z?13:t.length===1?15:12,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(ga,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),z&&s.jsx(uj,{center:[z.lat,z.lng],radius:te*1e3,pathOptions:{color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.1,weight:2,dashArray:"5, 5"}}),fe.map(O=>{var oe,de;if(!((oe=O.location)!=null&&oe.lat)||!((de=O.location)!=null&&de.lng))return null;const K=z&&z.lat===O.location.lat&&z.lng===O.location.lng;return s.jsx(Kn,{position:[O.location.lat,O.location.lng],icon:Dj,eventHandlers:{click:()=>ie(O)},children:s.jsx(Qn,{children:s.jsxs("div",{className:"text-sm max-w-xs",children:[s.jsx("strong",{className:"block text-gray-900 mb-2 text-red-600",children:" SOS ALERT"}),s.jsx("strong",{className:"block text-gray-900",children:O.name}),s.jsx("span",{className:"text-gray-600",children:O.email}),O.phone&&s.jsx("span",{className:"block text-gray-600",children:O.phone}),s.jsxs("span",{className:"text-gray-500 text-xs block mt-2",children:[O.location.lat.toFixed(5),", ",O.location.lng.toFixed(5)]}),O.guardianCount&&s.jsxs("span",{className:"text-gray-500 text-xs block mt-1",children:[O.guardianCount," guardian(s) notified"]}),O.nearestStation&&s.jsxs("span",{className:"text-gray-500 text-xs block mt-1",children:["Station: ",O.nearestStation.name," (",he(O.distanceToStation),")"]}),O.createdAt&&s.jsx("span",{className:"text-gray-500 text-xs block mt-1",children:Q(O.createdAt)}),K&&D.length>0&&s.jsxs("span",{className:"text-blue-600 text-xs block mt-2 font-medium",children:[D.length," station(s) within ",te,"km"]})]})})},O._id)}),z&&(ge?P:D).map((O,K)=>{let oe=O.stationLat,de=O.stationLng;if(oe==null||de==null)if(O.latitude!=null&&O.longitude!=null)oe=Number(O.latitude),de=Number(O.longitude);else if(O.location&&Array.isArray(O.location.coordinates))[de,oe]=O.location.coordinates;else if(O.location&&O.location.lat&&O.location.lng)oe=Number(O.location.lat),de=Number(O.location.lng);else return null;if(isNaN(oe)||isNaN(de))return null;const Z=O.distanceToAlert!=null?O.distanceToAlert:z?no(z.lat,z.lng,oe,de):null;return s.jsx(Kn,{position:[oe,de],icon:Fj,children:s.jsx(Qn,{children:s.jsxs("div",{className:"text-sm max-w-xs",children:[s.jsx("strong",{className:"block text-gray-900 mb-1 text-blue-600",children:" Police Station"}),s.jsx("strong",{className:"block text-gray-900",children:O.name}),s.jsxs("p",{className:"text-gray-600 text-xs mt-1",children:[O.area,", ",O.city]}),O.helpline&&s.jsxs("p",{className:"text-gray-600 text-xs mt-1",children:[" ",O.helpline]}),Z!=null&&s.jsxs("p",{className:"text-blue-600 text-xs mt-2 font-medium",children:["Distance: ",he(Z)]})]})})},O._id||`station-${K}-${oe}-${de}`)})]},`map-${(z==null?void 0:z._id)||"default"}`)}),s.jsxs("div",{className:"px-4 py-3 flex gap-4 text-xs text-gray-500 border-t border-gray-100 flex-wrap",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"})," Active SOS Location"]}),z&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500"})," Police Station (",D.length," in range)"]}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-3 h-3 rounded-full border-2 border-blue-500 border-dashed bg-blue-100"})," ",te,"km Range"]}),P.length===0&&s.jsx("span",{className:"text-amber-600 text-xs",children:"Loading stations..."}),P.length>0&&D.length===0&&s.jsx("span",{className:"text-gray-500 text-xs",children:"No stations found in range"})]})]})]}),z&&D.length>0&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Te,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-gray-900",children:[D.length," Police Station",D.length!==1?"s":""," within ",te,"km"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Click on SOS alert markers to view nearby stations"})]})]})}),s.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:[D.slice(0,6).map(O=>s.jsxs("div",{className:"bg-white rounded-lg p-2 text-xs border border-blue-100",children:[s.jsx("p",{className:"font-medium text-gray-900 truncate",children:O.name}),s.jsxs("p",{className:"text-gray-600",children:[he(O.distanceToAlert)," away"]})]},O._id)),D.length>6&&s.jsxs("div",{className:"bg-white rounded-lg p-2 text-xs border border-blue-100 flex items-center justify-center text-gray-500",children:["+",D.length-6," more"]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:h,onChange:O=>m(O.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500/20 focus:border-red-500 outline-none bg-white"})]})}),fe.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 text-center",children:[s.jsx(Ed,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"No matching SOS alerts"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Try a different search term"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fe.map(O=>{var oe,de,Z,pe,je,De;const K=z&&O.location&&z.lat===O.location.lat&&z.lng===O.location.lng;return s.jsxs("div",{onClick:()=>O.location&&ie(O),className:`bg-white rounded-xl shadow-lg border overflow-hidden hover:shadow-xl transition-all flex flex-col ${K?"border-blue-500 border-2 ring-2 ring-blue-200 cursor-pointer":"border-red-200 cursor-pointer"}`,children:[s.jsx("div",{className:"h-2 w-full bg-gradient-to-r from-red-500 to-red-600 animate-pulse"}),s.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[O.profilePhoto||(oe=O.userId)!=null&&oe.profilePhoto?s.jsx("img",{src:O.profilePhoto||((de=O.userId)==null?void 0:de.profilePhoto),alt:O.name,className:"w-11 h-11 rounded-full object-cover flex-shrink-0 ring-2 ring-red-200"}):s.jsx("div",{className:"w-11 h-11 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0 animate-pulse",children:s.jsx(Be,{className:"w-5 h-5 text-red-600"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:O.name}),s.jsxs("p",{className:"text-sm text-gray-500 truncate flex items-center gap-1",children:[s.jsx(Gn,{className:"w-3.5 h-3.5 flex-shrink-0"}),O.email]})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium flex-shrink-0",children:[s.jsx(Be,{className:"w-3 h-3"}),"SOS"]}),K&&D.length>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:[s.jsx(Te,{className:"w-2.5 h-2.5"}),D.length," in range"]})]})]}),O.phone&&s.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2 mb-3",children:[s.jsx(Et,{className:"w-4 h-4 text-gray-400"}),O.phone]}),s.jsxs("div",{className:"text-xs text-gray-500 mb-3 p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"font-medium text-gray-700",children:" Coordinates:"})," ",(pe=(Z=O.location)==null?void 0:Z.lat)==null?void 0:pe.toFixed(5),", ",(De=(je=O.location)==null?void 0:je.lng)==null?void 0:De.toFixed(5)]}),O.guardianCount>0&&s.jsxs("div",{className:"text-xs text-gray-600 mb-3 bg-blue-50 p-2 rounded border border-blue-100",children:[" ",O.guardianCount," guardian(s) notified"]}),s.jsxs("div",{className:`text-xs mb-3 p-2 rounded border ${ye(O.assignmentStatus)}`,children:[s.jsx("span",{className:"font-medium",children:"Status:"})," ",O.assignmentStatus]}),O.nearestStation&&s.jsxs("div",{className:"text-xs text-gray-700 mb-3 p-2 bg-amber-50 rounded border border-amber-100",children:[s.jsxs("div",{className:"font-medium flex items-center gap-1 mb-1",children:[s.jsx(Te,{className:"w-3 h-3"}),"Nearest Station"]}),s.jsxs("div",{className:"text-gray-600",children:[s.jsx("p",{className:"font-medium",children:O.nearestStation.name}),s.jsxs("p",{className:"text-gray-500",children:[O.nearestStation.area,", ",O.nearestStation.city]}),s.jsxs("p",{className:"text-gray-500",children:["Distance: ",he(O.distanceToStation)]}),O.nearestStation.helpline&&s.jsxs("p",{className:"text-gray-500",children:["Helpline: ",O.nearestStation.helpline]})]})]}),O.assignedOfficers&&O.assignedOfficers.length>0&&s.jsxs("div",{className:"text-xs text-gray-700 mb-3 p-2 bg-green-50 rounded border border-green-100",children:[s.jsxs("div",{className:"font-medium flex items-center gap-1 mb-2",children:[s.jsx(We,{className:"w-3 h-3"}),"Assigned Officers (",O.assignedOfficers.length,")"]}),s.jsx("div",{className:"space-y-1",children:O.assignedOfficers.map(at=>s.jsxs("div",{className:"text-gray-600",children:[s.jsx("p",{className:"font-medium",children:at.name}),s.jsx("p",{className:"text-gray-500",children:at.phone})]},at._id))})]}),O.createdAt&&s.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Alert triggered: ",Q(O.createdAt)]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-auto pt-2",onClick:at=>at.stopPropagation(),children:[s.jsxs("button",{type:"button",onClick:()=>{var at,_n;return Ce((at=O.location)==null?void 0:at.lat,(_n=O.location)==null?void 0:_n.lng)},className:"flex-1 min-w-[100px] flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-blue-600 text-white text-xs sm:text-sm font-medium hover:bg-blue-700 transition-colors",children:[s.jsx(ca,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Maps"})]}),O.assignmentStatus==="Unassigned"&&s.jsxs("button",{type:"button",onClick:()=>Ne(O._id),disabled:w===O._id,className:"flex-1 min-w-[100px] flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-yellow-600 text-white text-xs sm:text-sm font-medium hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(We,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:w===O._id?"Assigning...":"Assign"})]}),O.assignmentStatus==="Assigned"&&s.jsxs("button",{type:"button",onClick:()=>Ne(O._id),disabled:w===O._id,className:"flex-1 min-w-[100px] flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-purple-600 text-white text-xs sm:text-sm font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(We,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:w===O._id?"Reassigning...":"Reassign"})]}),s.jsxs("button",{type:"button",onClick:()=>$(O._id),className:"flex-1 min-w-[100px] flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-blue-600 text-white text-xs sm:text-sm font-medium hover:bg-blue-700 transition-colors",children:[s.jsx(Ss,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Chat"})]}),s.jsxs("button",{type:"button",onClick:()=>Y(O._id),disabled:g===O._id,className:"flex-1 min-w-[100px] flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-green-600 text-white text-xs sm:text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(dt,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:g===O._id?"Resolving...":"Resolve"})]})]})]})]},O._id)})})]}),_&&y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(We,{className:"w-5 h-5 text-blue-600"}),"Assign Police Officers"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select a police station to assign officers to this SOS alert"})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-lg border border-red-200",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.name}),s.jsx("p",{className:"text-xs text-gray-600",children:y.email})]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Police Station (sorted by nearest)"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:k.length===0?s.jsx("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No stations available"}):k.map(O=>s.jsx("button",{onClick:()=>M(O._id),className:`w-full text-left p-3 rounded-lg border-2 transition-all ${A===O._id?"border-blue-500 bg-blue-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:O.name}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[O.area,", ",O.city]}),O.helpline&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[" ",O.helpline]})]}),O.calculatedDistance!==null&&s.jsx("div",{className:"text-xs font-semibold text-blue-600 whitespace-nowrap ml-2",children:he(O.calculatedDistance)})]})},O._id))})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"button",onClick:ze,disabled:!A||w===y._id,className:"flex-1 px-4 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Assign Officers"})]})]})}),s.jsx(Zu,{sosAlertId:_e,isOpen:T,onClose:()=>{F(!1),U(null)}})]})]})},Uj=()=>{var M;const e="admin",[t,r]=v.useState([]),[i,o]=v.useState(null),[l,d]=v.useState(!0),[h,m]=v.useState(""),[p,b]=v.useState(1),[g,S]=v.useState(1),[w,N]=v.useState(!1),[y,C]=v.useState(null);v.useEffect(()=>{_()},[p,h]);const _=async()=>{try{d(!0);const P=await re.get("/admin/users",{params:{page:p,limit:10,search:h}});r(P.data.data.users),S(P.data.data.pagination.pages)}catch(P){console.error("Error fetching users:",P)}finally{d(!1)}},x=async P=>{try{const I=await re.get(`/admin/users/${P}`);o(I.data.data),N(!0)}catch(I){console.error("Error fetching user details:",I)}},k=async P=>{try{await re.delete(`/admin/users/${P}`),r(t.filter(I=>I._id!==P)),C(null),w&&(N(!1),o(null))}catch(I){console.error("Error deleting user:",I)}},E=P=>{m(P.target.value),b(1)},A=({user:P})=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[P.profilePhoto?s.jsx("img",{src:P.profilePhoto,alt:P.name,className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-medium text-lg",children:P.name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:P.name}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[s.jsx(Gn,{className:"w-4 h-4 mr-1"}),P.email]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[s.jsx(Et,{className:"w-4 h-4 mr-1"}),P.phone]}),P.location&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[s.jsx(Te,{className:"w-4 h-4 mr-1"}),P.location.coordinates[1].toFixed(4),", ",P.location.coordinates[0].toFixed(4)]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>x(P._id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:s.jsx(u_,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>C(P._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",children:s.jsx(fl,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-500",children:[s.jsx($n,{className:"w-4 h-4 mr-1"}),"Joined ",new Date(P.createdAt).toLocaleDateString()]})]});return w&&i?s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsx("button",{onClick:()=>N(!1),className:"text-blue-600 hover:text-blue-800 font-medium",children:" Back to Users"})}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Details"})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[i.user.profilePhoto?s.jsx("img",{src:i.user.profilePhoto,alt:i.user.name,className:"w-16 h-16 rounded-full object-cover"}):s.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-medium text-xl",children:i.user.name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:i.user.name}),s.jsx("p",{className:"text-gray-600",children:i.user.email})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Contact Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(Gn,{className:"w-4 h-4 mr-2 text-gray-500"}),i.user.email]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(Et,{className:"w-4 h-4 mr-2 text-gray-500"}),i.user.phone]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Account Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx($n,{className:"w-4 h-4 mr-2 text-gray-500"}),"Joined ",new Date(i.user.createdAt).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(We,{className:"w-4 h-4 mr-2 text-gray-500"}),((M=i.user.guardians)==null?void 0:M.length)||0," Guardians"]})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900 mb-4",children:["Complaint History (",i.complaints.length,")"]}),i.complaints.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No complaints filed"}):s.jsx("div",{className:"space-y-3",children:i.complaints.map(P=>{var I;return s.jsx("div",{className:"border rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-gray-900",children:P.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[s.jsx("span",{children:(I=P.stationId)==null?void 0:I.name}),s.jsx("span",{children:new Date(P.createdAt).toLocaleDateString()})]})]}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${P.status==="Resolved"?"bg-green-100 text-green-800":P.status==="In Progress"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:P.status})]})},P._id)})})]})]})]})]})})]}):s.jsxs("div",{className:"flex",children:[s.jsx(Ge,{role:e}),s.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Users"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all registered users"})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search users by name, email, or phone...",value:h,onChange:E,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),l?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((P,I)=>s.jsx("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-3/4"})]})]})},I))}):t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(We,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),s.jsx("p",{className:"text-gray-600",children:h?"Try adjusting your search terms":"No users have registered yet"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(P=>s.jsx(A,{user:P},P._id))}),g>1&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>b(Math.max(1,p-1)),disabled:p===1,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),s.jsxs("span",{className:"px-4 py-2",children:["Page ",p," of ",g]}),s.jsx("button",{onClick:()=>b(Math.min(g,p+1)),disabled:p===g,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})})]}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this user? This action will also delete all their complaints and cannot be undone."}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>C(null),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>k(y),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})]})};function $j(){return s.jsx(n_,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(W1,{}),s.jsxs(zw,{children:[s.jsx(Qe,{path:"/",element:s.jsx(V1,{})}),s.jsx(Qe,{path:"/login",element:s.jsx(q1,{})}),s.jsx(Qe,{path:"/register",element:s.jsx(G1,{})}),s.jsx(Qe,{path:"/verify-email",element:s.jsx(K1,{})}),s.jsx(Qe,{path:"/user/dashboard",element:s.jsx(vt,{allowedRoles:["user"],children:s.jsx(Y1,{})})}),s.jsx(Qe,{path:"/user/sos",element:s.jsx(vt,{allowedRoles:["user"],children:s.jsx(xj,{})})}),s.jsx(Qe,{path:"/user/guardians",element:s.jsx(vt,{allowedRoles:["user"],children:s.jsx(yj,{})})}),s.jsx(Qe,{path:"/user/nearby-police",element:s.jsx(vt,{allowedRoles:["user"],children:s.jsx(wj,{})})}),s.jsx(Qe,{path:"/user/create-complaint",element:s.jsx(vt,{allowedRoles:["user"],children:s.jsx(Nj,{})})}),s.jsx(Qe,{path:"/user/complaints",element:s.jsx(vt,{allowedRoles:["user"],children:s.jsx(Sj,{})})}),s.jsx(Qe,{path:"/user/profile",element:s.jsx(vt,{allowedRoles:["user"],children:s.jsx(kj,{})})}),s.jsx(Qe,{path:"/user/travel-buddy",element:s.jsx(vt,{allowedRoles:["user"],children:s.jsx(Ej,{})})}),s.jsx(Qe,{path:"/police/dashboard",element:s.jsx(vt,{allowedRoles:["police"],children:s.jsx(Lj,{})})}),s.jsx(Qe,{path:"/police/complaints",element:s.jsx(vt,{allowedRoles:["police"],children:s.jsx(Tj,{})})}),s.jsx(Qe,{path:"/police/sos-alerts",element:s.jsx(vt,{allowedRoles:["police"],children:s.jsx(Rj,{})})}),s.jsx(Qe,{path:"/admin/dashboard",element:s.jsx(vt,{allowedRoles:["admin"],children:s.jsx(Oj,{})})}),s.jsx(Qe,{path:"/admin/users",element:s.jsx(vt,{allowedRoles:["admin"],children:s.jsx(Uj,{})})}),s.jsx(Qe,{path:"/admin/stations",element:s.jsx(vt,{allowedRoles:["admin"],children:s.jsx(Aj,{})})}),s.jsx(Qe,{path:"/admin/police-accounts",element:s.jsx(vt,{allowedRoles:["admin"],children:s.jsx(Ij,{})})}),s.jsx(Qe,{path:"/admin/complaints",element:s.jsx(vt,{allowedRoles:["admin"],children:s.jsx(zj,{})})}),s.jsx(Qe,{path:"/admin/emergency-locations",element:s.jsx(vt,{allowedRoles:["admin"],children:s.jsx(Bj,{})})}),s.jsx(Qe,{path:"*",element:s.jsx(fr,{to:"/",replace:!0})})]}),s.jsx(Cd,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})}Tc.createRoot(document.getElementById("root")).render(s.jsx(Ie.StrictMode,{children:s.jsx(Hw,{children:s.jsx($j,{})})}));
